(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();function tf(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Bp(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var n=a.default;if(typeof n=="function"){var i=function o(){var c=!1;try{c=this instanceof o}catch{}return c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var c=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:function(){return a[o]}})}),i}var yl={exports:{}},Is={},vl={exports:{}},ye={};var ch;function Hp(){if(ch)return ye;ch=1;var a=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function j(_){return _===null||typeof _!="object"?null:(_=v&&_[v]||_["@@iterator"],typeof _=="function"?_:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function S(_,I,Y){this.props=_,this.context=I,this.refs=E,this.updater=Y||N}S.prototype.isReactComponent={},S.prototype.setState=function(_,I){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,I,"setState")},S.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function T(){}T.prototype=S.prototype;function D(_,I,Y){this.props=_,this.context=I,this.refs=E,this.updater=Y||N}var A=D.prototype=new T;A.constructor=D,b(A,S.prototype),A.isPureReactComponent=!0;var O=Array.isArray,q=Object.prototype.hasOwnProperty,Z={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function $(_,I,Y){var re,fe={},pe=null,_e=null;if(I!=null)for(re in I.ref!==void 0&&(_e=I.ref),I.key!==void 0&&(pe=""+I.key),I)q.call(I,re)&&!ee.hasOwnProperty(re)&&(fe[re]=I[re]);var ke=arguments.length-2;if(ke===1)fe.children=Y;else if(1<ke){for(var Ce=Array(ke),se=0;se<ke;se++)Ce[se]=arguments[se+2];fe.children=Ce}if(_&&_.defaultProps)for(re in ke=_.defaultProps,ke)fe[re]===void 0&&(fe[re]=ke[re]);return{$$typeof:a,type:_,key:pe,ref:_e,props:fe,_owner:Z.current}}function F(_,I){return{$$typeof:a,type:_.type,key:I,ref:_.ref,props:_.props,_owner:_._owner}}function B(_){return typeof _=="object"&&_!==null&&_.$$typeof===a}function J(_){var I={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(Y){return I[Y]})}var ue=/\/+/g;function ge(_,I){return typeof _=="object"&&_!==null&&_.key!=null?J(""+_.key):I.toString(36)}function be(_,I,Y,re,fe){var pe=typeof _;(pe==="undefined"||pe==="boolean")&&(_=null);var _e=!1;if(_===null)_e=!0;else switch(pe){case"string":case"number":_e=!0;break;case"object":switch(_.$$typeof){case a:case n:_e=!0}}if(_e)return _e=_,fe=fe(_e),_=re===""?"."+ge(_e,0):re,O(fe)?(Y="",_!=null&&(Y=_.replace(ue,"$&/")+"/"),be(fe,I,Y,"",function(se){return se})):fe!=null&&(B(fe)&&(fe=F(fe,Y+(!fe.key||_e&&_e.key===fe.key?"":(""+fe.key).replace(ue,"$&/")+"/")+_)),I.push(fe)),1;if(_e=0,re=re===""?".":re+":",O(_))for(var ke=0;ke<_.length;ke++){pe=_[ke];var Ce=re+ge(pe,ke);_e+=be(pe,I,Y,Ce,fe)}else if(Ce=j(_),typeof Ce=="function")for(_=Ce.call(_),ke=0;!(pe=_.next()).done;)pe=pe.value,Ce=re+ge(pe,ke++),_e+=be(pe,I,Y,Ce,fe);else if(pe==="object")throw I=String(_),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return _e}function C(_,I,Y){if(_==null)return _;var re=[],fe=0;return be(_,re,"","",function(pe){return I.call(Y,pe,fe++)}),re}function H(_){if(_._status===-1){var I=_._result;I=I(),I.then(function(Y){(_._status===0||_._status===-1)&&(_._status=1,_._result=Y)},function(Y){(_._status===0||_._status===-1)&&(_._status=2,_._result=Y)}),_._status===-1&&(_._status=0,_._result=I)}if(_._status===1)return _._result.default;throw _._result}var ae={current:null},V={transition:null},W={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:V,ReactCurrentOwner:Z};function z(){throw Error("act(...) is not supported in production builds of React.")}return ye.Children={map:C,forEach:function(_,I,Y){C(_,function(){I.apply(this,arguments)},Y)},count:function(_){var I=0;return C(_,function(){I++}),I},toArray:function(_){return C(_,function(I){return I})||[]},only:function(_){if(!B(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},ye.Component=S,ye.Fragment=i,ye.Profiler=c,ye.PureComponent=D,ye.StrictMode=o,ye.Suspense=p,ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,ye.act=z,ye.cloneElement=function(_,I,Y){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var re=b({},_.props),fe=_.key,pe=_.ref,_e=_._owner;if(I!=null){if(I.ref!==void 0&&(pe=I.ref,_e=Z.current),I.key!==void 0&&(fe=""+I.key),_.type&&_.type.defaultProps)var ke=_.type.defaultProps;for(Ce in I)q.call(I,Ce)&&!ee.hasOwnProperty(Ce)&&(re[Ce]=I[Ce]===void 0&&ke!==void 0?ke[Ce]:I[Ce])}var Ce=arguments.length-2;if(Ce===1)re.children=Y;else if(1<Ce){ke=Array(Ce);for(var se=0;se<Ce;se++)ke[se]=arguments[se+2];re.children=ke}return{$$typeof:a,type:_.type,key:fe,ref:pe,props:re,_owner:_e}},ye.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:u,_context:_},_.Consumer=_},ye.createElement=$,ye.createFactory=function(_){var I=$.bind(null,_);return I.type=_,I},ye.createRef=function(){return{current:null}},ye.forwardRef=function(_){return{$$typeof:m,render:_}},ye.isValidElement=B,ye.lazy=function(_){return{$$typeof:x,_payload:{_status:-1,_result:_},_init:H}},ye.memo=function(_,I){return{$$typeof:g,type:_,compare:I===void 0?null:I}},ye.startTransition=function(_){var I=V.transition;V.transition={};try{_()}finally{V.transition=I}},ye.unstable_act=z,ye.useCallback=function(_,I){return ae.current.useCallback(_,I)},ye.useContext=function(_){return ae.current.useContext(_)},ye.useDebugValue=function(){},ye.useDeferredValue=function(_){return ae.current.useDeferredValue(_)},ye.useEffect=function(_,I){return ae.current.useEffect(_,I)},ye.useId=function(){return ae.current.useId()},ye.useImperativeHandle=function(_,I,Y){return ae.current.useImperativeHandle(_,I,Y)},ye.useInsertionEffect=function(_,I){return ae.current.useInsertionEffect(_,I)},ye.useLayoutEffect=function(_,I){return ae.current.useLayoutEffect(_,I)},ye.useMemo=function(_,I){return ae.current.useMemo(_,I)},ye.useReducer=function(_,I,Y){return ae.current.useReducer(_,I,Y)},ye.useRef=function(_){return ae.current.useRef(_)},ye.useState=function(_){return ae.current.useState(_)},ye.useSyncExternalStore=function(_,I,Y){return ae.current.useSyncExternalStore(_,I,Y)},ye.useTransition=function(){return ae.current.useTransition()},ye.version="18.3.1",ye}var uh;function Zl(){return uh||(uh=1,vl.exports=Hp()),vl.exports}var dh;function Wp(){if(dh)return Is;dh=1;var a=Zl(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,g){var x,v={},j=null,N=null;g!==void 0&&(j=""+g),p.key!==void 0&&(j=""+p.key),p.ref!==void 0&&(N=p.ref);for(x in p)o.call(p,x)&&!u.hasOwnProperty(x)&&(v[x]=p[x]);if(m&&m.defaultProps)for(x in p=m.defaultProps,p)v[x]===void 0&&(v[x]=p[x]);return{$$typeof:n,type:m,key:j,ref:N,props:v,_owner:c.current}}return Is.Fragment=i,Is.jsx=h,Is.jsxs=h,Is}var hh;function Vp(){return hh||(hh=1,yl.exports=Wp()),yl.exports}var r=Vp(),w=Zl();const Lt=tf(w);var ta={},wl={exports:{}},pt={},bl={exports:{}},jl={};var fh;function qp(){return fh||(fh=1,(function(a){function n(V,W){var z=V.length;V.push(W);e:for(;0<z;){var _=z-1>>>1,I=V[_];if(0<c(I,W))V[_]=W,V[z]=I,z=_;else break e}}function i(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var W=V[0],z=V.pop();if(z!==W){V[0]=z;e:for(var _=0,I=V.length,Y=I>>>1;_<Y;){var re=2*(_+1)-1,fe=V[re],pe=re+1,_e=V[pe];if(0>c(fe,z))pe<I&&0>c(_e,fe)?(V[_]=_e,V[pe]=z,_=pe):(V[_]=fe,V[re]=z,_=re);else if(pe<I&&0>c(_e,z))V[_]=_e,V[pe]=z,_=pe;else break e}}return W}function c(V,W){var z=V.sortIndex-W.sortIndex;return z!==0?z:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();a.unstable_now=function(){return h.now()-m}}var p=[],g=[],x=1,v=null,j=3,N=!1,b=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(V){for(var W=i(g);W!==null;){if(W.callback===null)o(g);else if(W.startTime<=V)o(g),W.sortIndex=W.expirationTime,n(p,W);else break;W=i(g)}}function O(V){if(E=!1,A(V),!b)if(i(p)!==null)b=!0,H(q);else{var W=i(g);W!==null&&ae(O,W.startTime-V)}}function q(V,W){b=!1,E&&(E=!1,T($),$=-1),N=!0;var z=j;try{for(A(W),v=i(p);v!==null&&(!(v.expirationTime>W)||V&&!J());){var _=v.callback;if(typeof _=="function"){v.callback=null,j=v.priorityLevel;var I=_(v.expirationTime<=W);W=a.unstable_now(),typeof I=="function"?v.callback=I:v===i(p)&&o(p),A(W)}else o(p);v=i(p)}if(v!==null)var Y=!0;else{var re=i(g);re!==null&&ae(O,re.startTime-W),Y=!1}return Y}finally{v=null,j=z,N=!1}}var Z=!1,ee=null,$=-1,F=5,B=-1;function J(){return!(a.unstable_now()-B<F)}function ue(){if(ee!==null){var V=a.unstable_now();B=V;var W=!0;try{W=ee(!0,V)}finally{W?ge():(Z=!1,ee=null)}}else Z=!1}var ge;if(typeof D=="function")ge=function(){D(ue)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,C=be.port2;be.port1.onmessage=ue,ge=function(){C.postMessage(null)}}else ge=function(){S(ue,0)};function H(V){ee=V,Z||(Z=!0,ge())}function ae(V,W){$=S(function(){V(a.unstable_now())},W)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(V){V.callback=null},a.unstable_continueExecution=function(){b||N||(b=!0,H(q))},a.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<V?Math.floor(1e3/V):5},a.unstable_getCurrentPriorityLevel=function(){return j},a.unstable_getFirstCallbackNode=function(){return i(p)},a.unstable_next=function(V){switch(j){case 1:case 2:case 3:var W=3;break;default:W=j}var z=j;j=W;try{return V()}finally{j=z}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=j;j=V;try{return W()}finally{j=z}},a.unstable_scheduleCallback=function(V,W,z){var _=a.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?_+z:_):z=_,V){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=z+I,V={id:x++,callback:W,priorityLevel:V,startTime:z,expirationTime:I,sortIndex:-1},z>_?(V.sortIndex=z,n(g,V),i(p)===null&&V===i(g)&&(E?(T($),$=-1):E=!0,ae(O,z-_))):(V.sortIndex=I,n(p,V),b||N||(b=!0,H(q))),V},a.unstable_shouldYield=J,a.unstable_wrapCallback=function(V){var W=j;return function(){var z=j;j=W;try{return V.apply(this,arguments)}finally{j=z}}}})(jl)),jl}var mh;function Kp(){return mh||(mh=1,bl.exports=qp()),bl.exports}var ph;function Jp(){if(ph)return pt;ph=1;var a=Zl(),n=Kp();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},v={};function j(e){return p.call(v,e)?!0:p.call(x,e)?!1:g.test(e)?v[e]=!0:(x[e]=!0,!1)}function N(e,t,s,l){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b(e,t,s,l){if(t===null||typeof t>"u"||N(e,t,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function E(e,t,s,l,d,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){S[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];S[t]=new E(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){S[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){S[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){S[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){S[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){S[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){S[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){S[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(T,D);S[t]=new E(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(T,D);S[t]=new E(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(T,D);S[t]=new E(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){S[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){S[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function A(e,t,s,l){var d=S.hasOwnProperty(t)?S[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b(t,s,d,l)&&(s=null),l||d===null?j(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):d.mustUseProperty?e[d.propertyName]=s===null?d.type===3?!1:"":s:(t=d.attributeName,l=d.attributeNamespace,s===null?e.removeAttribute(t):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,l?e.setAttributeNS(l,t,s):e.setAttribute(t,s))))}var O=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),J=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),V=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var z=Object.assign,_;function I(e){if(_===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return`
`+_+e}var Y=!1;function re(e,t){if(!e||Y)return"";Y=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(U){var l=U}Reflect.construct(e,[],t)}else{try{t.call()}catch(U){l=U}e.call(t.prototype)}else{try{throw Error()}catch(U){l=U}e()}}catch(U){if(U&&l&&typeof U.stack=="string"){for(var d=U.stack.split(`
`),f=l.stack.split(`
`),y=d.length-1,k=f.length-1;1<=y&&0<=k&&d[y]!==f[k];)k--;for(;1<=y&&0<=k;y--,k--)if(d[y]!==f[k]){if(y!==1||k!==1)do if(y--,k--,0>k||d[y]!==f[k]){var P=`
`+d[y].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=y&&0<=k);break}}}finally{Y=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?I(e):""}function fe(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=re(e.type,!1),e;case 11:return e=re(e.type.render,!1),e;case 1:return e=re(e.type,!0),e;default:return""}}function pe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case Z:return"Portal";case F:return"Profiler";case $:return"StrictMode";case ge:return"Suspense";case be:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case J:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case ue:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C:return t=e.displayName||null,t!==null?t:pe(e.type)||"Memo";case H:t=e._payload,e=e._init;try{return pe(e(t))}catch{}}return null}function _e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(t);case 8:return t===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ke(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function se(e){var t=Ce(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){l=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qe(e){e._valueTracker||(e._valueTracker=se(e))}function tt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Ce(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Ft(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ka(e,t){var s=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function gc(e,t){var s=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;s=ke(t.value!=null?t.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xc(e,t){t=t.checked,t!=null&&A(e,"checked",t,!1)}function _a(e,t){xc(e,t);var s=ke(t.value),l=t.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sa(e,t.type,s):t.hasOwnProperty("defaultValue")&&Sa(e,t.type,ke(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Sa(e,t,s){(t!=="number"||Ft(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Kn=Array.isArray;function nn(e,t,s,l){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&l&&(e[s].defaultSelected=!0)}else{for(s=""+ke(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Ca(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(i(92));if(Kn(s)){if(1<s.length)throw Error(i(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:ke(s)}}function wc(e,t){var s=ke(t.value),l=ke(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function bc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ea(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ks,Nc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,s,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ks=Ks||document.createElement("div"),Ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qf=["Webkit","ms","Moz","O"];Object.keys(Gn).forEach(function(e){qf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gn[t]=Gn[e]})});function kc(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Gn.hasOwnProperty(e)&&Gn[e]?(""+t).trim():t+"px"}function _c(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var l=s.indexOf("--")===0,d=kc(s,t[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,d):e[s]=d}}var Kf=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pa(e,t){if(t){if(Kf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function Ta(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ra=null;function Ia(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aa=null,sn=null,an=null;function Sc(e){if(e=xs(e)){if(typeof Aa!="function")throw Error(i(280));var t=e.stateNode;t&&(t=gi(t),Aa(e.stateNode,e.type,t))}}function Cc(e){sn?an?an.push(e):an=[e]:sn=e}function Ec(){if(sn){var e=sn,t=an;if(an=sn=null,Sc(e),t)for(e=0;e<t.length;e++)Sc(t[e])}}function Pc(e,t){return e(t)}function Tc(){}var Oa=!1;function Rc(e,t,s){if(Oa)return e(t,s);Oa=!0;try{return Pc(e,t,s)}finally{Oa=!1,(sn!==null||an!==null)&&(Tc(),Ec())}}function Qn(e,t){var s=e.stateNode;if(s===null)return null;var l=gi(s);if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var Da=!1;if(m)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Da=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Da=!1}function Jf(e,t,s,l,d,f,y,k,P){var U=Array.prototype.slice.call(arguments,3);try{t.apply(s,U)}catch(G){this.onError(G)}}var Xn=!1,Js=null,Gs=!1,Ma=null,Gf={onError:function(e){Xn=!0,Js=e}};function Qf(e,t,s,l,d,f,y,k,P){Xn=!1,Js=null,Jf.apply(Gf,arguments)}function Yf(e,t,s,l,d,f,y,k,P){if(Qf.apply(this,arguments),Xn){if(Xn){var U=Js;Xn=!1,Js=null}else throw Error(i(198));Gs||(Gs=!0,Ma=U)}}function Or(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Ic(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ac(e){if(Or(e)!==e)throw Error(i(188))}function Xf(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,l=t;;){var d=s.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){s=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===s)return Ac(d),e;if(f===l)return Ac(d),t;f=f.sibling}throw Error(i(188))}if(s.return!==l.return)s=d,l=f;else{for(var y=!1,k=d.child;k;){if(k===s){y=!0,s=d,l=f;break}if(k===l){y=!0,l=d,s=f;break}k=k.sibling}if(!y){for(k=f.child;k;){if(k===s){y=!0,s=f,l=d;break}if(k===l){y=!0,l=f,s=d;break}k=k.sibling}if(!y)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function Oc(e){return e=Xf(e),e!==null?Dc(e):null}function Dc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dc(e);if(t!==null)return t;e=e.sibling}return null}var Mc=n.unstable_scheduleCallback,Lc=n.unstable_cancelCallback,Zf=n.unstable_shouldYield,em=n.unstable_requestPaint,$e=n.unstable_now,tm=n.unstable_getCurrentPriorityLevel,La=n.unstable_ImmediatePriority,$c=n.unstable_UserBlockingPriority,Qs=n.unstable_NormalPriority,rm=n.unstable_LowPriority,Uc=n.unstable_IdlePriority,Ys=null,Bt=null;function nm(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Ys,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:am,sm=Math.log,im=Math.LN2;function am(e){return e>>>=0,e===0?32:31-(sm(e)/im|0)|0}var Xs=64,Zs=4194304;function Zn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ei(e,t){var s=e.pendingLanes;if(s===0)return 0;var l=0,d=e.suspendedLanes,f=e.pingedLanes,y=s&268435455;if(y!==0){var k=y&~d;k!==0?l=Zn(k):(f&=y,f!==0&&(l=Zn(f)))}else y=s&~d,y!==0?l=Zn(y):f!==0&&(l=Zn(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)s=31-Et(t),d=1<<s,l|=e[s],t&=~d;return l}function om(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Et(f),k=1<<y,P=d[y];P===-1?((k&s)===0||(k&l)!==0)&&(d[y]=om(k,t)):P<=t&&(e.expiredLanes|=k),f&=~k}}function $a(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zc(){var e=Xs;return Xs<<=1,(Xs&4194240)===0&&(Xs=64),e}function Ua(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function es(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=s}function cm(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var d=31-Et(s),f=1<<d;t[d]=0,l[d]=-1,e[d]=-1,s&=~f}}function za(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Et(s),d=1<<l;d&t|e[l]&t&&(e[l]|=t),s&=~d}}var Se=0;function Fc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Bc,Fa,Hc,Wc,Vc,Ba=!1,ti=[],dr=null,hr=null,fr=null,ts=new Map,rs=new Map,mr=[],um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qc(e,t){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(t.pointerId)}}function ns(e,t,s,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=xs(t),t!==null&&Fa(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function dm(e,t,s,l,d){switch(t){case"focusin":return dr=ns(dr,e,t,s,l,d),!0;case"dragenter":return hr=ns(hr,e,t,s,l,d),!0;case"mouseover":return fr=ns(fr,e,t,s,l,d),!0;case"pointerover":var f=d.pointerId;return ts.set(f,ns(ts.get(f)||null,e,t,s,l,d)),!0;case"gotpointercapture":return f=d.pointerId,rs.set(f,ns(rs.get(f)||null,e,t,s,l,d)),!0}return!1}function Kc(e){var t=Dr(e.target);if(t!==null){var s=Or(t);if(s!==null){if(t=s.tag,t===13){if(t=Ic(s),t!==null){e.blockedOn=t,Vc(e.priority,function(){Hc(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Ra=l,s.target.dispatchEvent(l),Ra=null}else return t=xs(s),t!==null&&Fa(t),e.blockedOn=s,!1;t.shift()}return!0}function Jc(e,t,s){ri(e)&&s.delete(t)}function hm(){Ba=!1,dr!==null&&ri(dr)&&(dr=null),hr!==null&&ri(hr)&&(hr=null),fr!==null&&ri(fr)&&(fr=null),ts.forEach(Jc),rs.forEach(Jc)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,Ba||(Ba=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hm)))}function is(e){function t(d){return ss(d,e)}if(0<ti.length){ss(ti[0],e);for(var s=1;s<ti.length;s++){var l=ti[s];l.blockedOn===e&&(l.blockedOn=null)}}for(dr!==null&&ss(dr,e),hr!==null&&ss(hr,e),fr!==null&&ss(fr,e),ts.forEach(t),rs.forEach(t),s=0;s<mr.length;s++)l=mr[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<mr.length&&(s=mr[0],s.blockedOn===null);)Kc(s),s.blockedOn===null&&mr.shift()}var on=O.ReactCurrentBatchConfig,ni=!0;function fm(e,t,s,l){var d=Se,f=on.transition;on.transition=null;try{Se=1,Ha(e,t,s,l)}finally{Se=d,on.transition=f}}function mm(e,t,s,l){var d=Se,f=on.transition;on.transition=null;try{Se=4,Ha(e,t,s,l)}finally{Se=d,on.transition=f}}function Ha(e,t,s,l){if(ni){var d=Wa(e,t,s,l);if(d===null)oo(e,t,l,si,s),qc(e,l);else if(dm(d,e,t,s,l))l.stopPropagation();else if(qc(e,l),t&4&&-1<um.indexOf(e)){for(;d!==null;){var f=xs(d);if(f!==null&&Bc(f),f=Wa(e,t,s,l),f===null&&oo(e,t,l,si,s),f===d)break;d=f}d!==null&&l.stopPropagation()}else oo(e,t,l,null,s)}}var si=null;function Wa(e,t,s,l){if(si=null,e=Ia(l),e=Dr(e),e!==null)if(t=Or(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Ic(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return si=e,null}function Gc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tm()){case La:return 1;case $c:return 4;case Qs:case rm:return 16;case Uc:return 536870912;default:return 16}default:return 16}}var pr=null,Va=null,ii=null;function Qc(){if(ii)return ii;var e,t=Va,s=t.length,l,d="value"in pr?pr.value:pr.textContent,f=d.length;for(e=0;e<s&&t[e]===d[e];e++);var y=s-e;for(l=1;l<=y&&t[s-l]===d[f-l];l++);return ii=d.slice(e,1<l?1-l:void 0)}function ai(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oi(){return!0}function Yc(){return!1}function gt(e){function t(s,l,d,f,y){this._reactName=s,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(s=e[k],this[k]=s?s(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?oi:Yc,this.isPropagationStopped=Yc,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),t}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=gt(ln),as=z({},ln,{view:0,detail:0}),pm=gt(as),Ka,Ja,os,li=z({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==os&&(os&&e.type==="mousemove"?(Ka=e.screenX-os.screenX,Ja=e.screenY-os.screenY):Ja=Ka=0,os=e),Ka)},movementY:function(e){return"movementY"in e?e.movementY:Ja}}),Xc=gt(li),gm=z({},li,{dataTransfer:0}),xm=gt(gm),ym=z({},as,{relatedTarget:0}),Ga=gt(ym),vm=z({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),wm=gt(vm),bm=z({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jm=gt(bm),Nm=z({},ln,{data:0}),Zc=gt(Nm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sm[e])?!!t[e]:!1}function Qa(){return Cm}var Em=z({},as,{key:function(e){if(e.key){var t=km[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qa,charCode:function(e){return e.type==="keypress"?ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pm=gt(Em),Tm=z({},li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=gt(Tm),Rm=z({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qa}),Im=gt(Rm),Am=z({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Om=gt(Am),Dm=z({},li,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mm=gt(Dm),Lm=[9,13,27,32],Ya=m&&"CompositionEvent"in window,ls=null;m&&"documentMode"in document&&(ls=document.documentMode);var $m=m&&"TextEvent"in window&&!ls,tu=m&&(!Ya||ls&&8<ls&&11>=ls),ru=" ",nu=!1;function su(e,t){switch(e){case"keyup":return Lm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cn=!1;function Um(e,t){switch(e){case"compositionend":return iu(t);case"keypress":return t.which!==32?null:(nu=!0,ru);case"textInput":return e=t.data,e===ru&&nu?null:e;default:return null}}function zm(e,t){if(cn)return e==="compositionend"||!Ya&&su(e,t)?(e=Qc(),ii=Va=pr=null,cn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tu&&t.locale!=="ko"?null:t.data;default:return null}}var Fm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fm[e.type]:t==="textarea"}function ou(e,t,s,l){Cc(l),t=fi(t,"onChange"),0<t.length&&(s=new qa("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var cs=null,us=null;function Bm(e){_u(e,0)}function ci(e){var t=mn(e);if(tt(t))return e}function Hm(e,t){if(e==="change")return t}var lu=!1;if(m){var Xa;if(m){var Za="oninput"in document;if(!Za){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),Za=typeof cu.oninput=="function"}Xa=Za}else Xa=!1;lu=Xa&&(!document.documentMode||9<document.documentMode)}function uu(){cs&&(cs.detachEvent("onpropertychange",du),us=cs=null)}function du(e){if(e.propertyName==="value"&&ci(us)){var t=[];ou(t,us,e,Ia(e)),Rc(Bm,t)}}function Wm(e,t,s){e==="focusin"?(uu(),cs=t,us=s,cs.attachEvent("onpropertychange",du)):e==="focusout"&&uu()}function Vm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ci(us)}function qm(e,t){if(e==="click")return ci(t)}function Km(e,t){if(e==="input"||e==="change")return ci(t)}function Jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:Jm;function ds(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var d=s[l];if(!p.call(t,d)||!Pt(e[d],t[d]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var s=hu(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hu(s)}}function mu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pu(){for(var e=window,t=Ft();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ft(e.document)}return t}function eo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gm(e){var t=pu(),s=e.focusedElem,l=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&mu(s.ownerDocument.documentElement,s)){if(l!==null&&eo(s)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=s.textContent.length,f=Math.min(l.start,d);l=l.end===void 0?f:Math.min(l.end,d),!e.extend&&f>l&&(d=l,l=f,f=d),d=fu(s,f);var y=fu(s,l);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qm=m&&"documentMode"in document&&11>=document.documentMode,un=null,to=null,hs=null,ro=!1;function gu(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ro||un==null||un!==Ft(l)||(l=un,"selectionStart"in l&&eo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hs&&ds(hs,l)||(hs=l,l=fi(to,"onSelect"),0<l.length&&(t=new qa("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=un)))}function ui(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var dn={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionend:ui("Transition","TransitionEnd")},no={},xu={};m&&(xu=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);function di(e){if(no[e])return no[e];if(!dn[e])return e;var t=dn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in xu)return no[e]=t[s];return e}var yu=di("animationend"),vu=di("animationiteration"),wu=di("animationstart"),bu=di("transitionend"),ju=new Map,Nu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,t){ju.set(e,t),u(t,[e])}for(var so=0;so<Nu.length;so++){var io=Nu[so],Ym=io.toLowerCase(),Xm=io[0].toUpperCase()+io.slice(1);gr(Ym,"on"+Xm)}gr(yu,"onAnimationEnd"),gr(vu,"onAnimationIteration"),gr(wu,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(bu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zm=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function ku(e,t,s){var l=e.type||"unknown-event";e.currentTarget=s,Yf(l,t,void 0,e),e.currentTarget=null}function _u(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var y=l.length-1;0<=y;y--){var k=l[y],P=k.instance,U=k.currentTarget;if(k=k.listener,P!==f&&d.isPropagationStopped())break e;ku(d,k,U),f=P}else for(y=0;y<l.length;y++){if(k=l[y],P=k.instance,U=k.currentTarget,k=k.listener,P!==f&&d.isPropagationStopped())break e;ku(d,k,U),f=P}}}if(Gs)throw e=Ma,Gs=!1,Ma=null,e}function Te(e,t){var s=t[mo];s===void 0&&(s=t[mo]=new Set);var l=e+"__bubble";s.has(l)||(Su(t,e,2,!1),s.add(l))}function ao(e,t,s){var l=0;t&&(l|=4),Su(s,e,l,t)}var hi="_reactListening"+Math.random().toString(36).slice(2);function ms(e){if(!e[hi]){e[hi]=!0,o.forEach(function(s){s!=="selectionchange"&&(Zm.has(s)||ao(s,!1,e),ao(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hi]||(t[hi]=!0,ao("selectionchange",!1,t))}}function Su(e,t,s,l){switch(Gc(t)){case 1:var d=fm;break;case 4:d=mm;break;default:d=Ha}s=d.bind(null,t,s,e),d=void 0,!Da||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function oo(e,t,s,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var k=l.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(y===4)for(y=l.return;y!==null;){var P=y.tag;if((P===3||P===4)&&(P=y.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;y=y.return}for(;k!==null;){if(y=Dr(k),y===null)return;if(P=y.tag,P===5||P===6){l=f=y;continue e}k=k.parentNode}}l=l.return}Rc(function(){var U=f,G=Ia(s),Q=[];e:{var K=ju.get(e);if(K!==void 0){var te=qa,ie=e;switch(e){case"keypress":if(ai(s)===0)break e;case"keydown":case"keyup":te=Pm;break;case"focusin":ie="focus",te=Ga;break;case"focusout":ie="blur",te=Ga;break;case"beforeblur":case"afterblur":te=Ga;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=xm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Im;break;case yu:case vu:case wu:te=wm;break;case bu:te=Om;break;case"scroll":te=pm;break;case"wheel":te=Mm;break;case"copy":case"cut":case"paste":te=jm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=eu}var oe=(t&4)!==0,Ue=!oe&&e==="scroll",M=oe?K!==null?K+"Capture":null:K;oe=[];for(var R=U,L;R!==null;){L=R;var X=L.stateNode;if(L.tag===5&&X!==null&&(L=X,M!==null&&(X=Qn(R,M),X!=null&&oe.push(ps(R,X,L)))),Ue)break;R=R.return}0<oe.length&&(K=new te(K,ie,null,s,G),Q.push({event:K,listeners:oe}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",K&&s!==Ra&&(ie=s.relatedTarget||s.fromElement)&&(Dr(ie)||ie[Qt]))break e;if((te||K)&&(K=G.window===G?G:(K=G.ownerDocument)?K.defaultView||K.parentWindow:window,te?(ie=s.relatedTarget||s.toElement,te=U,ie=ie?Dr(ie):null,ie!==null&&(Ue=Or(ie),ie!==Ue||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(te=null,ie=U),te!==ie)){if(oe=Xc,X="onMouseLeave",M="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(oe=eu,X="onPointerLeave",M="onPointerEnter",R="pointer"),Ue=te==null?K:mn(te),L=ie==null?K:mn(ie),K=new oe(X,R+"leave",te,s,G),K.target=Ue,K.relatedTarget=L,X=null,Dr(G)===U&&(oe=new oe(M,R+"enter",ie,s,G),oe.target=L,oe.relatedTarget=Ue,X=oe),Ue=X,te&&ie)t:{for(oe=te,M=ie,R=0,L=oe;L;L=hn(L))R++;for(L=0,X=M;X;X=hn(X))L++;for(;0<R-L;)oe=hn(oe),R--;for(;0<L-R;)M=hn(M),L--;for(;R--;){if(oe===M||M!==null&&oe===M.alternate)break t;oe=hn(oe),M=hn(M)}oe=null}else oe=null;te!==null&&Cu(Q,K,te,oe,!1),ie!==null&&Ue!==null&&Cu(Q,Ue,ie,oe,!0)}}e:{if(K=U?mn(U):window,te=K.nodeName&&K.nodeName.toLowerCase(),te==="select"||te==="input"&&K.type==="file")var le=Hm;else if(au(K))if(lu)le=Km;else{le=Vm;var de=Wm}else(te=K.nodeName)&&te.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(le=qm);if(le&&(le=le(e,U))){ou(Q,le,s,G);break e}de&&de(e,K,U),e==="focusout"&&(de=K._wrapperState)&&de.controlled&&K.type==="number"&&Sa(K,"number",K.value)}switch(de=U?mn(U):window,e){case"focusin":(au(de)||de.contentEditable==="true")&&(un=de,to=U,hs=null);break;case"focusout":hs=to=un=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,gu(Q,s,G);break;case"selectionchange":if(Qm)break;case"keydown":case"keyup":gu(Q,s,G)}var he;if(Ya)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else cn?su(e,s)&&(me="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(me="onCompositionStart");me&&(tu&&s.locale!=="ko"&&(cn||me!=="onCompositionStart"?me==="onCompositionEnd"&&cn&&(he=Qc()):(pr=G,Va="value"in pr?pr.value:pr.textContent,cn=!0)),de=fi(U,me),0<de.length&&(me=new Zc(me,e,null,s,G),Q.push({event:me,listeners:de}),he?me.data=he:(he=iu(s),he!==null&&(me.data=he)))),(he=$m?Um(e,s):zm(e,s))&&(U=fi(U,"onBeforeInput"),0<U.length&&(G=new Zc("onBeforeInput","beforeinput",null,s,G),Q.push({event:G,listeners:U}),G.data=he))}_u(Q,t)})}function ps(e,t,s){return{instance:e,listener:t,currentTarget:s}}function fi(e,t){for(var s=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Qn(e,s),f!=null&&l.unshift(ps(e,f,d)),f=Qn(e,t),f!=null&&l.push(ps(e,f,d))),e=e.return}return l}function hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cu(e,t,s,l,d){for(var f=t._reactName,y=[];s!==null&&s!==l;){var k=s,P=k.alternate,U=k.stateNode;if(P!==null&&P===l)break;k.tag===5&&U!==null&&(k=U,d?(P=Qn(s,f),P!=null&&y.unshift(ps(s,P,k))):d||(P=Qn(s,f),P!=null&&y.push(ps(s,P,k)))),s=s.return}y.length!==0&&e.push({event:t,listeners:y})}var ep=/\r\n?/g,tp=/\u0000|\uFFFD/g;function Eu(e){return(typeof e=="string"?e:""+e).replace(ep,`
`).replace(tp,"")}function mi(e,t,s){if(t=Eu(t),Eu(e)!==t&&s)throw Error(i(425))}function pi(){}var lo=null,co=null;function uo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ho=typeof setTimeout=="function"?setTimeout:void 0,rp=typeof clearTimeout=="function"?clearTimeout:void 0,Pu=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof Pu<"u"?function(e){return Pu.resolve(null).then(e).catch(sp)}:ho;function sp(e){setTimeout(function(){throw e})}function fo(e,t){var s=t,l=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(l===0){e.removeChild(d),is(t);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=d}while(s);is(t)}function xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var fn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+fn,gs="__reactProps$"+fn,Qt="__reactContainer$"+fn,mo="__reactEvents$"+fn,ip="__reactListeners$"+fn,ap="__reactHandles$"+fn;function Dr(e){var t=e[Ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Qt]||s[Ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Tu(e);e!==null;){if(s=e[Ht])return s;e=Tu(e)}return t}e=s,s=e.parentNode}return null}function xs(e){return e=e[Ht]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function gi(e){return e[gs]||null}var po=[],pn=-1;function yr(e){return{current:e}}function Re(e){0>pn||(e.current=po[pn],po[pn]=null,pn--)}function Ee(e,t){pn++,po[pn]=e.current,e.current=t}var vr={},rt=yr(vr),ut=yr(!1),Mr=vr;function gn(e,t){var s=e.type.contextTypes;if(!s)return vr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in s)d[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function dt(e){return e=e.childContextTypes,e!=null}function xi(){Re(ut),Re(rt)}function Ru(e,t,s){if(rt.current!==vr)throw Error(i(168));Ee(rt,t),Ee(ut,s)}function Iu(e,t,s){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(i(108,_e(e)||"Unknown",d));return z({},s,l)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vr,Mr=rt.current,Ee(rt,e),Ee(ut,ut.current),!0}function Au(e,t,s){var l=e.stateNode;if(!l)throw Error(i(169));s?(e=Iu(e,t,Mr),l.__reactInternalMemoizedMergedChildContext=e,Re(ut),Re(rt),Ee(rt,e)):Re(ut),Ee(ut,s)}var Yt=null,vi=!1,go=!1;function Ou(e){Yt===null?Yt=[e]:Yt.push(e)}function op(e){vi=!0,Ou(e)}function wr(){if(!go&&Yt!==null){go=!0;var e=0,t=Se;try{var s=Yt;for(Se=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}Yt=null,vi=!1}catch(d){throw Yt!==null&&(Yt=Yt.slice(e+1)),Mc(La,wr),d}finally{Se=t,go=!1}}return null}var xn=[],yn=0,wi=null,bi=0,wt=[],bt=0,Lr=null,Xt=1,Zt="";function $r(e,t){xn[yn++]=bi,xn[yn++]=wi,wi=e,bi=t}function Du(e,t,s){wt[bt++]=Xt,wt[bt++]=Zt,wt[bt++]=Lr,Lr=e;var l=Xt;e=Zt;var d=32-Et(l)-1;l&=~(1<<d),s+=1;var f=32-Et(t)+d;if(30<f){var y=d-d%5;f=(l&(1<<y)-1).toString(32),l>>=y,d-=y,Xt=1<<32-Et(t)+d|s<<d|l,Zt=f+e}else Xt=1<<f|s<<d|l,Zt=e}function xo(e){e.return!==null&&($r(e,1),Du(e,1,0))}function yo(e){for(;e===wi;)wi=xn[--yn],xn[yn]=null,bi=xn[--yn],xn[yn]=null;for(;e===Lr;)Lr=wt[--bt],wt[bt]=null,Zt=wt[--bt],wt[bt]=null,Xt=wt[--bt],wt[bt]=null}var xt=null,yt=null,Ie=!1,Tt=null;function Mu(e,t){var s=_t(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Lu(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,yt=xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Lr!==null?{id:Xt,overflow:Zt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=_t(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,xt=e,yt=null,!0):!1;default:return!1}}function vo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wo(e){if(Ie){var t=yt;if(t){var s=t;if(!Lu(e,t)){if(vo(e))throw Error(i(418));t=xr(s.nextSibling);var l=xt;t&&Lu(e,t)?Mu(l,s):(e.flags=e.flags&-4097|2,Ie=!1,xt=e)}}else{if(vo(e))throw Error(i(418));e.flags=e.flags&-4097|2,Ie=!1,xt=e}}}function $u(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function ji(e){if(e!==xt)return!1;if(!Ie)return $u(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uo(e.type,e.memoizedProps)),t&&(t=yt)){if(vo(e))throw Uu(),Error(i(418));for(;t;)Mu(e,t),t=xr(t.nextSibling)}if($u(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){yt=xr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=xt?xr(e.stateNode.nextSibling):null;return!0}function Uu(){for(var e=yt;e;)e=xr(e.nextSibling)}function vn(){yt=xt=null,Ie=!1}function bo(e){Tt===null?Tt=[e]:Tt.push(e)}var lp=O.ReactCurrentBatchConfig;function ys(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(i(309));var l=s.stateNode}if(!l)throw Error(i(147,e));var d=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var k=d.refs;y===null?delete k[f]:k[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(i(284));if(!s._owner)throw Error(i(290,e))}return e}function Ni(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zu(e){var t=e._init;return t(e._payload)}function Fu(e){function t(M,R){if(e){var L=M.deletions;L===null?(M.deletions=[R],M.flags|=16):L.push(R)}}function s(M,R){if(!e)return null;for(;R!==null;)t(M,R),R=R.sibling;return null}function l(M,R){for(M=new Map;R!==null;)R.key!==null?M.set(R.key,R):M.set(R.index,R),R=R.sibling;return M}function d(M,R){return M=Er(M,R),M.index=0,M.sibling=null,M}function f(M,R,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<R?(M.flags|=2,R):L):(M.flags|=2,R)):(M.flags|=1048576,R)}function y(M){return e&&M.alternate===null&&(M.flags|=2),M}function k(M,R,L,X){return R===null||R.tag!==6?(R=hl(L,M.mode,X),R.return=M,R):(R=d(R,L),R.return=M,R)}function P(M,R,L,X){var le=L.type;return le===ee?G(M,R,L.props.children,X,L.key):R!==null&&(R.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===H&&zu(le)===R.type)?(X=d(R,L.props),X.ref=ys(M,R,L),X.return=M,X):(X=Ki(L.type,L.key,L.props,null,M.mode,X),X.ref=ys(M,R,L),X.return=M,X)}function U(M,R,L,X){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?(R=fl(L,M.mode,X),R.return=M,R):(R=d(R,L.children||[]),R.return=M,R)}function G(M,R,L,X,le){return R===null||R.tag!==7?(R=qr(L,M.mode,X,le),R.return=M,R):(R=d(R,L),R.return=M,R)}function Q(M,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return R=hl(""+R,M.mode,L),R.return=M,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case q:return L=Ki(R.type,R.key,R.props,null,M.mode,L),L.ref=ys(M,null,R),L.return=M,L;case Z:return R=fl(R,M.mode,L),R.return=M,R;case H:var X=R._init;return Q(M,X(R._payload),L)}if(Kn(R)||W(R))return R=qr(R,M.mode,L,null),R.return=M,R;Ni(M,R)}return null}function K(M,R,L,X){var le=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return le!==null?null:k(M,R,""+L,X);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case q:return L.key===le?P(M,R,L,X):null;case Z:return L.key===le?U(M,R,L,X):null;case H:return le=L._init,K(M,R,le(L._payload),X)}if(Kn(L)||W(L))return le!==null?null:G(M,R,L,X,null);Ni(M,L)}return null}function te(M,R,L,X,le){if(typeof X=="string"&&X!==""||typeof X=="number")return M=M.get(L)||null,k(R,M,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case q:return M=M.get(X.key===null?L:X.key)||null,P(R,M,X,le);case Z:return M=M.get(X.key===null?L:X.key)||null,U(R,M,X,le);case H:var de=X._init;return te(M,R,L,de(X._payload),le)}if(Kn(X)||W(X))return M=M.get(L)||null,G(R,M,X,le,null);Ni(R,X)}return null}function ie(M,R,L,X){for(var le=null,de=null,he=R,me=R=0,Ge=null;he!==null&&me<L.length;me++){he.index>me?(Ge=he,he=null):Ge=he.sibling;var Ne=K(M,he,L[me],X);if(Ne===null){he===null&&(he=Ge);break}e&&he&&Ne.alternate===null&&t(M,he),R=f(Ne,R,me),de===null?le=Ne:de.sibling=Ne,de=Ne,he=Ge}if(me===L.length)return s(M,he),Ie&&$r(M,me),le;if(he===null){for(;me<L.length;me++)he=Q(M,L[me],X),he!==null&&(R=f(he,R,me),de===null?le=he:de.sibling=he,de=he);return Ie&&$r(M,me),le}for(he=l(M,he);me<L.length;me++)Ge=te(he,M,me,L[me],X),Ge!==null&&(e&&Ge.alternate!==null&&he.delete(Ge.key===null?me:Ge.key),R=f(Ge,R,me),de===null?le=Ge:de.sibling=Ge,de=Ge);return e&&he.forEach(function(Pr){return t(M,Pr)}),Ie&&$r(M,me),le}function oe(M,R,L,X){var le=W(L);if(typeof le!="function")throw Error(i(150));if(L=le.call(L),L==null)throw Error(i(151));for(var de=le=null,he=R,me=R=0,Ge=null,Ne=L.next();he!==null&&!Ne.done;me++,Ne=L.next()){he.index>me?(Ge=he,he=null):Ge=he.sibling;var Pr=K(M,he,Ne.value,X);if(Pr===null){he===null&&(he=Ge);break}e&&he&&Pr.alternate===null&&t(M,he),R=f(Pr,R,me),de===null?le=Pr:de.sibling=Pr,de=Pr,he=Ge}if(Ne.done)return s(M,he),Ie&&$r(M,me),le;if(he===null){for(;!Ne.done;me++,Ne=L.next())Ne=Q(M,Ne.value,X),Ne!==null&&(R=f(Ne,R,me),de===null?le=Ne:de.sibling=Ne,de=Ne);return Ie&&$r(M,me),le}for(he=l(M,he);!Ne.done;me++,Ne=L.next())Ne=te(he,M,me,Ne.value,X),Ne!==null&&(e&&Ne.alternate!==null&&he.delete(Ne.key===null?me:Ne.key),R=f(Ne,R,me),de===null?le=Ne:de.sibling=Ne,de=Ne);return e&&he.forEach(function(Fp){return t(M,Fp)}),Ie&&$r(M,me),le}function Ue(M,R,L,X){if(typeof L=="object"&&L!==null&&L.type===ee&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case q:e:{for(var le=L.key,de=R;de!==null;){if(de.key===le){if(le=L.type,le===ee){if(de.tag===7){s(M,de.sibling),R=d(de,L.props.children),R.return=M,M=R;break e}}else if(de.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===H&&zu(le)===de.type){s(M,de.sibling),R=d(de,L.props),R.ref=ys(M,de,L),R.return=M,M=R;break e}s(M,de);break}else t(M,de);de=de.sibling}L.type===ee?(R=qr(L.props.children,M.mode,X,L.key),R.return=M,M=R):(X=Ki(L.type,L.key,L.props,null,M.mode,X),X.ref=ys(M,R,L),X.return=M,M=X)}return y(M);case Z:e:{for(de=L.key;R!==null;){if(R.key===de)if(R.tag===4&&R.stateNode.containerInfo===L.containerInfo&&R.stateNode.implementation===L.implementation){s(M,R.sibling),R=d(R,L.children||[]),R.return=M,M=R;break e}else{s(M,R);break}else t(M,R);R=R.sibling}R=fl(L,M.mode,X),R.return=M,M=R}return y(M);case H:return de=L._init,Ue(M,R,de(L._payload),X)}if(Kn(L))return ie(M,R,L,X);if(W(L))return oe(M,R,L,X);Ni(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,R!==null&&R.tag===6?(s(M,R.sibling),R=d(R,L),R.return=M,M=R):(s(M,R),R=hl(L,M.mode,X),R.return=M,M=R),y(M)):s(M,R)}return Ue}var wn=Fu(!0),Bu=Fu(!1),ki=yr(null),_i=null,bn=null,jo=null;function No(){jo=bn=_i=null}function ko(e){var t=ki.current;Re(ki),e._currentValue=t}function _o(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function jn(e,t){_i=e,jo=bn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ht=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(jo!==e)if(e={context:e,memoizedValue:t,next:null},bn===null){if(_i===null)throw Error(i(308));bn=e,_i.dependencies={lanes:0,firstContext:e}}else bn=bn.next=e;return t}var Ur=null;function So(e){Ur===null?Ur=[e]:Ur.push(e)}function Hu(e,t,s,l){var d=t.interleaved;return d===null?(s.next=s,So(t)):(s.next=d.next,d.next=s),t.interleaved=s,er(e,l)}function er(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var br=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jr(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,er(e,s)}return d=l.interleaved,d===null?(t.next=t,So(l)):(t.next=d.next,d.next=t),l.interleaved=t,er(e,s)}function Si(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,za(e,s)}}function Vu(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var d=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var y={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?d=f=y:f=f.next=y,s=s.next}while(s!==null);f===null?d=f=t:f=f.next=t}else d=f=t;s={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ci(e,t,s,l){var d=e.updateQueue;br=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var P=k,U=P.next;P.next=null,y===null?f=U:y.next=U,y=P;var G=e.alternate;G!==null&&(G=G.updateQueue,k=G.lastBaseUpdate,k!==y&&(k===null?G.firstBaseUpdate=U:k.next=U,G.lastBaseUpdate=P))}if(f!==null){var Q=d.baseState;y=0,G=U=P=null,k=f;do{var K=k.lane,te=k.eventTime;if((l&K)===K){G!==null&&(G=G.next={eventTime:te,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ie=e,oe=k;switch(K=t,te=s,oe.tag){case 1:if(ie=oe.payload,typeof ie=="function"){Q=ie.call(te,Q,K);break e}Q=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=oe.payload,K=typeof ie=="function"?ie.call(te,Q,K):ie,K==null)break e;Q=z({},Q,K);break e;case 2:br=!0}}k.callback!==null&&k.lane!==0&&(e.flags|=64,K=d.effects,K===null?d.effects=[k]:K.push(k))}else te={eventTime:te,lane:K,tag:k.tag,payload:k.payload,callback:k.callback,next:null},G===null?(U=G=te,P=Q):G=G.next=te,y|=K;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;K=k,k=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(G===null&&(P=Q),d.baseState=P,d.firstBaseUpdate=U,d.lastBaseUpdate=G,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Br|=y,e.lanes=y,e.memoizedState=Q}}function qu(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=s,typeof d!="function")throw Error(i(191,d));d.call(l)}}}var vs={},Wt=yr(vs),ws=yr(vs),bs=yr(vs);function zr(e){if(e===vs)throw Error(i(174));return e}function Eo(e,t){switch(Ee(bs,t),Ee(ws,e),Ee(Wt,vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ea(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ea(t,e)}Re(Wt),Ee(Wt,t)}function Nn(){Re(Wt),Re(ws),Re(bs)}function Ku(e){zr(bs.current);var t=zr(Wt.current),s=Ea(t,e.type);t!==s&&(Ee(ws,e),Ee(Wt,s))}function Po(e){ws.current===e&&(Re(Wt),Re(ws))}var De=yr(0);function Ei(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var To=[];function Ro(){for(var e=0;e<To.length;e++)To[e]._workInProgressVersionPrimary=null;To.length=0}var Pi=O.ReactCurrentDispatcher,Io=O.ReactCurrentBatchConfig,Fr=0,Me=null,Be=null,Ke=null,Ti=!1,js=!1,Ns=0,cp=0;function nt(){throw Error(i(321))}function Ao(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Pt(e[s],t[s]))return!1;return!0}function Oo(e,t,s,l,d,f){if(Fr=f,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pi.current=e===null||e.memoizedState===null?fp:mp,e=s(l,d),js){f=0;do{if(js=!1,Ns=0,25<=f)throw Error(i(301));f+=1,Ke=Be=null,t.updateQueue=null,Pi.current=pp,e=s(l,d)}while(js)}if(Pi.current=Ai,t=Be!==null&&Be.next!==null,Fr=0,Ke=Be=Me=null,Ti=!1,t)throw Error(i(300));return e}function Do(){var e=Ns!==0;return Ns=0,e}function Vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Me.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Nt(){if(Be===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ke===null?Me.memoizedState:Ke.next;if(t!==null)Ke=t,Be=e;else{if(e===null)throw Error(i(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ke===null?Me.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function ks(e,t){return typeof t=="function"?t(e):t}function Mo(e){var t=Nt(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var l=Be,d=l.baseQueue,f=s.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}l.baseQueue=d=f,s.pending=null}if(d!==null){f=d.next,l=l.baseState;var k=y=null,P=null,U=f;do{var G=U.lane;if((Fr&G)===G)P!==null&&(P=P.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),l=U.hasEagerState?U.eagerState:e(l,U.action);else{var Q={lane:G,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};P===null?(k=P=Q,y=l):P=P.next=Q,Me.lanes|=G,Br|=G}U=U.next}while(U!==null&&U!==f);P===null?y=l:P.next=k,Pt(l,t.memoizedState)||(ht=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=P,s.lastRenderedState=l}if(e=s.interleaved,e!==null){d=e;do f=d.lane,Me.lanes|=f,Br|=f,d=d.next;while(d!==e)}else d===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Lo(e){var t=Nt(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var l=s.dispatch,d=s.pending,f=t.memoizedState;if(d!==null){s.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);Pt(f,t.memoizedState)||(ht=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,l]}function Ju(){}function Gu(e,t){var s=Me,l=Nt(),d=t(),f=!Pt(l.memoizedState,d);if(f&&(l.memoizedState=d,ht=!0),l=l.queue,$o(Xu.bind(null,s,l,e),[e]),l.getSnapshot!==t||f||Ke!==null&&Ke.memoizedState.tag&1){if(s.flags|=2048,_s(9,Yu.bind(null,s,l,d,t),void 0,null),Je===null)throw Error(i(349));(Fr&30)!==0||Qu(s,t,d)}return d}function Qu(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Yu(e,t,s,l){t.value=s,t.getSnapshot=l,Zu(t)&&ed(e)}function Xu(e,t,s){return s(function(){Zu(t)&&ed(e)})}function Zu(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Pt(e,s)}catch{return!0}}function ed(e){var t=er(e,1);t!==null&&Ot(t,e,1,-1)}function td(e){var t=Vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:e},t.queue=e,e=e.dispatch=hp.bind(null,Me,e),[t.memoizedState,e]}function _s(e,t,s,l){return e={tag:e,create:t,destroy:s,deps:l,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e)),e}function rd(){return Nt().memoizedState}function Ri(e,t,s,l){var d=Vt();Me.flags|=e,d.memoizedState=_s(1|t,s,void 0,l===void 0?null:l)}function Ii(e,t,s,l){var d=Nt();l=l===void 0?null:l;var f=void 0;if(Be!==null){var y=Be.memoizedState;if(f=y.destroy,l!==null&&Ao(l,y.deps)){d.memoizedState=_s(t,s,f,l);return}}Me.flags|=e,d.memoizedState=_s(1|t,s,f,l)}function nd(e,t){return Ri(8390656,8,e,t)}function $o(e,t){return Ii(2048,8,e,t)}function sd(e,t){return Ii(4,2,e,t)}function id(e,t){return Ii(4,4,e,t)}function ad(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function od(e,t,s){return s=s!=null?s.concat([e]):null,Ii(4,4,ad.bind(null,t,e),s)}function Uo(){}function ld(e,t){var s=Nt();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&Ao(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function cd(e,t){var s=Nt();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&Ao(t,l[1])?l[0]:(e=e(),s.memoizedState=[e,t],e)}function ud(e,t,s){return(Fr&21)===0?(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=s):(Pt(s,t)||(s=zc(),Me.lanes|=s,Br|=s,e.baseState=!0),t)}function up(e,t){var s=Se;Se=s!==0&&4>s?s:4,e(!0);var l=Io.transition;Io.transition={};try{e(!1),t()}finally{Se=s,Io.transition=l}}function dd(){return Nt().memoizedState}function dp(e,t,s){var l=Sr(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},hd(e))fd(t,s);else if(s=Hu(e,t,s,l),s!==null){var d=ot();Ot(s,e,l,d),md(s,t,l)}}function hp(e,t,s){var l=Sr(e),d={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(hd(e))fd(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,k=f(y,s);if(d.hasEagerState=!0,d.eagerState=k,Pt(k,y)){var P=t.interleaved;P===null?(d.next=d,So(t)):(d.next=P.next,P.next=d),t.interleaved=d;return}}catch{}finally{}s=Hu(e,t,d,l),s!==null&&(d=ot(),Ot(s,e,l,d),md(s,t,l))}}function hd(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function fd(e,t){js=Ti=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function md(e,t,s){if((s&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,za(e,s)}}var Ai={readContext:jt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},fp={readContext:jt,useCallback:function(e,t){return Vt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:nd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Ri(4194308,4,ad.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var s=Vt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var l=Vt();return t=s!==void 0?s(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=dp.bind(null,Me,e),[l.memoizedState,e]},useRef:function(e){var t=Vt();return e={current:e},t.memoizedState=e},useState:td,useDebugValue:Uo,useDeferredValue:function(e){return Vt().memoizedState=e},useTransition:function(){var e=td(!1),t=e[0];return e=up.bind(null,e[1]),Vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var l=Me,d=Vt();if(Ie){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),Je===null)throw Error(i(349));(Fr&30)!==0||Qu(l,t,s)}d.memoizedState=s;var f={value:s,getSnapshot:t};return d.queue=f,nd(Xu.bind(null,l,f,e),[e]),l.flags|=2048,_s(9,Yu.bind(null,l,f,s,t),void 0,null),s},useId:function(){var e=Vt(),t=Je.identifierPrefix;if(Ie){var s=Zt,l=Xt;s=(l&~(1<<32-Et(l)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ns++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=cp++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mp={readContext:jt,useCallback:ld,useContext:jt,useEffect:$o,useImperativeHandle:od,useInsertionEffect:sd,useLayoutEffect:id,useMemo:cd,useReducer:Mo,useRef:rd,useState:function(){return Mo(ks)},useDebugValue:Uo,useDeferredValue:function(e){var t=Nt();return ud(t,Be.memoizedState,e)},useTransition:function(){var e=Mo(ks)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Ju,useSyncExternalStore:Gu,useId:dd,unstable_isNewReconciler:!1},pp={readContext:jt,useCallback:ld,useContext:jt,useEffect:$o,useImperativeHandle:od,useInsertionEffect:sd,useLayoutEffect:id,useMemo:cd,useReducer:Lo,useRef:rd,useState:function(){return Lo(ks)},useDebugValue:Uo,useDeferredValue:function(e){var t=Nt();return Be===null?t.memoizedState=e:ud(t,Be.memoizedState,e)},useTransition:function(){var e=Lo(ks)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Ju,useSyncExternalStore:Gu,useId:dd,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=z({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function zo(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:z({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Oi={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var l=ot(),d=Sr(e),f=tr(l,d);f.payload=t,s!=null&&(f.callback=s),t=jr(e,f,d),t!==null&&(Ot(t,e,d,l),Si(t,e,d))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=ot(),d=Sr(e),f=tr(l,d);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=jr(e,f,d),t!==null&&(Ot(t,e,d,l),Si(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ot(),l=Sr(e),d=tr(s,l);d.tag=2,t!=null&&(d.callback=t),t=jr(e,d,l),t!==null&&(Ot(t,e,l,s),Si(t,e,l))}};function pd(e,t,s,l,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,y):t.prototype&&t.prototype.isPureReactComponent?!ds(s,l)||!ds(d,f):!0}function gd(e,t,s){var l=!1,d=vr,f=t.contextType;return typeof f=="object"&&f!==null?f=jt(f):(d=dt(t)?Mr:rt.current,l=t.contextTypes,f=(l=l!=null)?gn(e,d):vr),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oi,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function xd(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Oi.enqueueReplaceState(t,t.state,null)}function Fo(e,t,s,l){var d=e.stateNode;d.props=s,d.state=e.memoizedState,d.refs={},Co(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=jt(f):(f=dt(t)?Mr:rt.current,d.context=gn(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(zo(e,t,f,s),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Oi.enqueueReplaceState(d,d.state,null),Ci(e,s,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function kn(e,t){try{var s="",l=t;do s+=fe(l),l=l.return;while(l);var d=s}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function Bo(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ho(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var gp=typeof WeakMap=="function"?WeakMap:Map;function yd(e,t,s){s=tr(-1,s),s.tag=3,s.payload={element:null};var l=t.value;return s.callback=function(){Fi||(Fi=!0,sl=l),Ho(e,t)},s}function vd(e,t,s){s=tr(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;s.payload=function(){return l(d)},s.callback=function(){Ho(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Ho(e,t),typeof l!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),s}function wd(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new gp;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(s)||(d.add(s),e=Tp.bind(null,e,t,s),t.then(e,e))}function bd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jd(e,t,s,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=tr(-1,1),t.tag=2,jr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var xp=O.ReactCurrentOwner,ht=!1;function at(e,t,s,l){t.child=e===null?Bu(t,null,s,l):wn(t,e.child,s,l)}function Nd(e,t,s,l,d){s=s.render;var f=t.ref;return jn(t,d),l=Oo(e,t,s,l,f,d),s=Do(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,rr(e,t,d)):(Ie&&s&&xo(t),t.flags|=1,at(e,t,l,d),t.child)}function kd(e,t,s,l,d){if(e===null){var f=s.type;return typeof f=="function"&&!dl(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,_d(e,t,f,l,d)):(e=Ki(s.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var y=f.memoizedProps;if(s=s.compare,s=s!==null?s:ds,s(y,l)&&e.ref===t.ref)return rr(e,t,d)}return t.flags|=1,e=Er(f,l),e.ref=t.ref,e.return=t,t.child=e}function _d(e,t,s,l,d){if(e!==null){var f=e.memoizedProps;if(ds(f,l)&&e.ref===t.ref)if(ht=!1,t.pendingProps=l=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ht=!0);else return t.lanes=e.lanes,rr(e,t,d)}return Wo(e,t,s,l,d)}function Sd(e,t,s){var l=t.pendingProps,d=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Sn,vt),vt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(Sn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:s,Ee(Sn,vt),vt|=l}else f!==null?(l=f.baseLanes|s,t.memoizedState=null):l=s,Ee(Sn,vt),vt|=l;return at(e,t,d,s),t.child}function Cd(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Wo(e,t,s,l,d){var f=dt(s)?Mr:rt.current;return f=gn(t,f),jn(t,d),s=Oo(e,t,s,l,f,d),l=Do(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,rr(e,t,d)):(Ie&&l&&xo(t),t.flags|=1,at(e,t,s,d),t.child)}function Ed(e,t,s,l,d){if(dt(s)){var f=!0;yi(t)}else f=!1;if(jn(t,d),t.stateNode===null)Mi(e,t),gd(t,s,l),Fo(t,s,l,d),l=!0;else if(e===null){var y=t.stateNode,k=t.memoizedProps;y.props=k;var P=y.context,U=s.contextType;typeof U=="object"&&U!==null?U=jt(U):(U=dt(s)?Mr:rt.current,U=gn(t,U));var G=s.getDerivedStateFromProps,Q=typeof G=="function"||typeof y.getSnapshotBeforeUpdate=="function";Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==l||P!==U)&&xd(t,y,l,U),br=!1;var K=t.memoizedState;y.state=K,Ci(t,l,y,d),P=t.memoizedState,k!==l||K!==P||ut.current||br?(typeof G=="function"&&(zo(t,s,G,l),P=t.memoizedState),(k=br||pd(t,s,k,l,K,P,U))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=P),y.props=l,y.state=P,y.context=U,l=k):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,Wu(e,t),k=t.memoizedProps,U=t.type===t.elementType?k:Rt(t.type,k),y.props=U,Q=t.pendingProps,K=y.context,P=s.contextType,typeof P=="object"&&P!==null?P=jt(P):(P=dt(s)?Mr:rt.current,P=gn(t,P));var te=s.getDerivedStateFromProps;(G=typeof te=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==Q||K!==P)&&xd(t,y,l,P),br=!1,K=t.memoizedState,y.state=K,Ci(t,l,y,d);var ie=t.memoizedState;k!==Q||K!==ie||ut.current||br?(typeof te=="function"&&(zo(t,s,te,l),ie=t.memoizedState),(U=br||pd(t,s,U,l,K,ie,P)||!1)?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,ie,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,ie,P)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ie),y.props=l,y.state=ie,y.context=P,l=U):(typeof y.componentDidUpdate!="function"||k===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),l=!1)}return Vo(e,t,s,l,f,d)}function Vo(e,t,s,l,d,f){Cd(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return d&&Au(t,s,!1),rr(e,t,f);l=t.stateNode,xp.current=t;var k=y&&typeof s.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=wn(t,e.child,null,f),t.child=wn(t,null,k,f)):at(e,t,k,f),t.memoizedState=l.state,d&&Au(t,s,!0),t.child}function Pd(e){var t=e.stateNode;t.pendingContext?Ru(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ru(e,t.context,!1),Eo(e,t.containerInfo)}function Td(e,t,s,l,d){return vn(),bo(d),t.flags|=256,at(e,t,s,l),t.child}var qo={dehydrated:null,treeContext:null,retryLane:0};function Ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rd(e,t,s){var l=t.pendingProps,d=De.current,f=!1,y=(t.flags&128)!==0,k;if((k=y)||(k=e!==null&&e.memoizedState===null?!1:(d&2)!==0),k?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ee(De,d&1),e===null)return wo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=l.children,e=l.fallback,f?(l=t.mode,f=t.child,y={mode:"hidden",children:y},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Ji(y,l,0,null),e=qr(e,l,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Ko(s),t.memoizedState=qo,e):Jo(t,y));if(d=e.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return yp(e,t,y,l,k,d,s);if(f){f=l.fallback,y=t.mode,d=e.child,k=d.sibling;var P={mode:"hidden",children:l.children};return(y&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=P,t.deletions=null):(l=Er(d,P),l.subtreeFlags=d.subtreeFlags&14680064),k!==null?f=Er(k,f):(f=qr(f,y,s,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,y=e.child.memoizedState,y=y===null?Ko(s):{baseLanes:y.baseLanes|s,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~s,t.memoizedState=qo,l}return f=e.child,e=f.sibling,l=Er(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=s),l.return=t,l.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=l,t.memoizedState=null,l}function Jo(e,t){return t=Ji({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Di(e,t,s,l){return l!==null&&bo(l),wn(t,e.child,null,s),e=Jo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yp(e,t,s,l,d,f,y){if(s)return t.flags&256?(t.flags&=-257,l=Bo(Error(i(422))),Di(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,d=t.mode,l=Ji({mode:"visible",children:l.children},d,0,null),f=qr(f,d,y,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&wn(t,e.child,null,y),t.child.memoizedState=Ko(y),t.memoizedState=qo,f);if((t.mode&1)===0)return Di(e,t,y,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var k=l.dgst;return l=k,f=Error(i(419)),l=Bo(f,l,void 0),Di(e,t,y,l)}if(k=(y&e.childLanes)!==0,ht||k){if(l=Je,l!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|y))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,er(e,d),Ot(l,e,d,-1))}return ul(),l=Bo(Error(i(421))),Di(e,t,y,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Rp.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,yt=xr(d.nextSibling),xt=t,Ie=!0,Tt=null,e!==null&&(wt[bt++]=Xt,wt[bt++]=Zt,wt[bt++]=Lr,Xt=e.id,Zt=e.overflow,Lr=t),t=Jo(t,l.children),t.flags|=4096,t)}function Id(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),_o(e.return,t,s)}function Go(e,t,s,l,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=d)}function Ad(e,t,s){var l=t.pendingProps,d=l.revealOrder,f=l.tail;if(at(e,t,l.children,s),l=De.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Id(e,s,t);else if(e.tag===19)Id(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ee(De,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&Ei(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Go(t,!1,d,s,f);break;case"backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ei(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}Go(t,!0,s,null,f);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=Er(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Er(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function vp(e,t,s){switch(t.tag){case 3:Pd(t),vn();break;case 5:Ku(t);break;case 1:dt(t.type)&&yi(t);break;case 4:Eo(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Ee(ki,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ee(De,De.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Rd(e,t,s):(Ee(De,De.current&1),e=rr(e,t,s),e!==null?e.sibling:null);Ee(De,De.current&1);break;case 19:if(l=(s&t.childLanes)!==0,(e.flags&128)!==0){if(l)return Ad(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ee(De,De.current),l)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,s)}return rr(e,t,s)}var Od,Qo,Dd,Md;Od=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Qo=function(){},Dd=function(e,t,s,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,zr(Wt.current);var f=null;switch(s){case"input":d=ka(e,d),l=ka(e,l),f=[];break;case"select":d=z({},d,{value:void 0}),l=z({},l,{value:void 0}),f=[];break;case"textarea":d=Ca(e,d),l=Ca(e,l),f=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=pi)}Pa(s,l);var y;s=null;for(U in d)if(!l.hasOwnProperty(U)&&d.hasOwnProperty(U)&&d[U]!=null)if(U==="style"){var k=d[U];for(y in k)k.hasOwnProperty(y)&&(s||(s={}),s[y]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(c.hasOwnProperty(U)?f||(f=[]):(f=f||[]).push(U,null));for(U in l){var P=l[U];if(k=d?.[U],l.hasOwnProperty(U)&&P!==k&&(P!=null||k!=null))if(U==="style")if(k){for(y in k)!k.hasOwnProperty(y)||P&&P.hasOwnProperty(y)||(s||(s={}),s[y]="");for(y in P)P.hasOwnProperty(y)&&k[y]!==P[y]&&(s||(s={}),s[y]=P[y])}else s||(f||(f=[]),f.push(U,s)),s=P;else U==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,k=k?k.__html:void 0,P!=null&&k!==P&&(f=f||[]).push(U,P)):U==="children"?typeof P!="string"&&typeof P!="number"||(f=f||[]).push(U,""+P):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(c.hasOwnProperty(U)?(P!=null&&U==="onScroll"&&Te("scroll",e),f||k===P||(f=[])):(f=f||[]).push(U,P))}s&&(f=f||[]).push("style",s);var U=f;(t.updateQueue=U)&&(t.flags|=4)}},Md=function(e,t,s,l){s!==l&&(t.flags|=4)};function Ss(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function wp(e,t,s){var l=t.pendingProps;switch(yo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return dt(t.type)&&xi(),st(t),null;case 3:return l=t.stateNode,Nn(),Re(ut),Re(rt),Ro(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ji(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tt!==null&&(ol(Tt),Tt=null))),Qo(e,t),st(t),null;case 5:Po(t);var d=zr(bs.current);if(s=t.type,e!==null&&t.stateNode!=null)Dd(e,t,s,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(i(166));return st(t),null}if(e=zr(Wt.current),ji(t)){l=t.stateNode,s=t.type;var f=t.memoizedProps;switch(l[Ht]=t,l[gs]=f,e=(t.mode&1)!==0,s){case"dialog":Te("cancel",l),Te("close",l);break;case"iframe":case"object":case"embed":Te("load",l);break;case"video":case"audio":for(d=0;d<fs.length;d++)Te(fs[d],l);break;case"source":Te("error",l);break;case"img":case"image":case"link":Te("error",l),Te("load",l);break;case"details":Te("toggle",l);break;case"input":gc(l,f),Te("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Te("invalid",l);break;case"textarea":vc(l,f),Te("invalid",l)}Pa(s,f),d=null;for(var y in f)if(f.hasOwnProperty(y)){var k=f[y];y==="children"?typeof k=="string"?l.textContent!==k&&(f.suppressHydrationWarning!==!0&&mi(l.textContent,k,e),d=["children",k]):typeof k=="number"&&l.textContent!==""+k&&(f.suppressHydrationWarning!==!0&&mi(l.textContent,k,e),d=["children",""+k]):c.hasOwnProperty(y)&&k!=null&&y==="onScroll"&&Te("scroll",l)}switch(s){case"input":qe(l),yc(l,f,!0);break;case"textarea":qe(l),bc(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=pi)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jc(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(s,{is:l.is}):(e=y.createElement(s),s==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,s),e[Ht]=t,e[gs]=l,Od(e,t,!1,!1),t.stateNode=e;e:{switch(y=Ta(s,l),s){case"dialog":Te("cancel",e),Te("close",e),d=l;break;case"iframe":case"object":case"embed":Te("load",e),d=l;break;case"video":case"audio":for(d=0;d<fs.length;d++)Te(fs[d],e);d=l;break;case"source":Te("error",e),d=l;break;case"img":case"image":case"link":Te("error",e),Te("load",e),d=l;break;case"details":Te("toggle",e),d=l;break;case"input":gc(e,l),d=ka(e,l),Te("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=z({},l,{value:void 0}),Te("invalid",e);break;case"textarea":vc(e,l),d=Ca(e,l),Te("invalid",e);break;default:d=l}Pa(s,d),k=d;for(f in k)if(k.hasOwnProperty(f)){var P=k[f];f==="style"?_c(e,P):f==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Nc(e,P)):f==="children"?typeof P=="string"?(s!=="textarea"||P!=="")&&Jn(e,P):typeof P=="number"&&Jn(e,""+P):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(c.hasOwnProperty(f)?P!=null&&f==="onScroll"&&Te("scroll",e):P!=null&&A(e,f,P,y))}switch(s){case"input":qe(e),yc(e,l,!1);break;case"textarea":qe(e),bc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ke(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?nn(e,!!l.multiple,f,!1):l.defaultValue!=null&&nn(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=pi)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)Md(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(i(166));if(s=zr(bs.current),zr(Wt.current),ji(t)){if(l=t.stateNode,s=t.memoizedProps,l[Ht]=t,(f=l.nodeValue!==s)&&(e=xt,e!==null))switch(e.tag){case 3:mi(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mi(l.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Ht]=t,t.stateNode=l}return st(t),null;case 13:if(Re(De),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&yt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Uu(),vn(),t.flags|=98560,f=!1;else if(f=ji(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(i(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ht]=t}else vn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),f=!1}else Tt!==null&&(ol(Tt),Tt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(De.current&1)!==0?He===0&&(He=3):ul())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return Nn(),Qo(e,t),e===null&&ms(t.stateNode.containerInfo),st(t),null;case 10:return ko(t.type._context),st(t),null;case 17:return dt(t.type)&&xi(),st(t),null;case 19:if(Re(De),f=t.memoizedState,f===null)return st(t),null;if(l=(t.flags&128)!==0,y=f.rendering,y===null)if(l)Ss(f,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=Ei(e),y!==null){for(t.flags|=128,Ss(f,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=s,s=t.child;s!==null;)f=s,e=l,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ee(De,De.current&1|2),t.child}e=e.sibling}f.tail!==null&&$e()>Cn&&(t.flags|=128,l=!0,Ss(f,!1),t.lanes=4194304)}else{if(!l)if(e=Ei(y),e!==null){if(t.flags|=128,l=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ss(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Ie)return st(t),null}else 2*$e()-f.renderingStartTime>Cn&&s!==1073741824&&(t.flags|=128,l=!0,Ss(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(s=f.last,s!==null?s.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=$e(),t.sibling=null,s=De.current,Ee(De,l?s&1|2:s&1),t):(st(t),null);case 22:case 23:return cl(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(vt&1073741824)!==0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function bp(e,t){switch(yo(t),t.tag){case 1:return dt(t.type)&&xi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nn(),Re(ut),Re(rt),Ro(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Po(t),null;case 13:if(Re(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));vn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(De),null;case 4:return Nn(),null;case 10:return ko(t.type._context),null;case 22:case 23:return cl(),null;case 24:return null;default:return null}}var Li=!1,it=!1,jp=typeof WeakSet=="function"?WeakSet:Set,ne=null;function _n(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Le(e,t,l)}else s.current=null}function Yo(e,t,s){try{s()}catch(l){Le(e,t,l)}}var Ld=!1;function Np(e,t){if(lo=ni,e=pu(),eo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var y=0,k=-1,P=-1,U=0,G=0,Q=e,K=null;t:for(;;){for(var te;Q!==s||d!==0&&Q.nodeType!==3||(k=y+d),Q!==f||l!==0&&Q.nodeType!==3||(P=y+l),Q.nodeType===3&&(y+=Q.nodeValue.length),(te=Q.firstChild)!==null;)K=Q,Q=te;for(;;){if(Q===e)break t;if(K===s&&++U===d&&(k=y),K===f&&++G===l&&(P=y),(te=Q.nextSibling)!==null)break;Q=K,K=Q.parentNode}Q=te}s=k===-1||P===-1?null:{start:k,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(co={focusedElem:e,selectionRange:s},ni=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var oe=ie.memoizedProps,Ue=ie.memoizedState,M=t.stateNode,R=M.getSnapshotBeforeUpdate(t.elementType===t.type?oe:Rt(t.type,oe),Ue);M.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(X){Le(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return ie=Ld,Ld=!1,ie}function Cs(e,t,s){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&Yo(t,s,f)}d=d.next}while(d!==l)}}function $i(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==t)}}function Xo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function $d(e){var t=e.alternate;t!==null&&(e.alternate=null,$d(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[gs],delete t[mo],delete t[ip],delete t[ap])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ud(e){return e.tag===5||e.tag===3||e.tag===4}function zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ud(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zo(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=pi));else if(l!==4&&(e=e.child,e!==null))for(Zo(e,t,s),e=e.sibling;e!==null;)Zo(e,t,s),e=e.sibling}function el(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(el(e,t,s),e=e.sibling;e!==null;)el(e,t,s),e=e.sibling}var Ye=null,It=!1;function Nr(e,t,s){for(s=s.child;s!==null;)Fd(e,t,s),s=s.sibling}function Fd(e,t,s){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Ys,s)}catch{}switch(s.tag){case 5:it||_n(s,t);case 6:var l=Ye,d=It;Ye=null,Nr(e,t,s),Ye=l,It=d,Ye!==null&&(It?(e=Ye,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ye.removeChild(s.stateNode));break;case 18:Ye!==null&&(It?(e=Ye,s=s.stateNode,e.nodeType===8?fo(e.parentNode,s):e.nodeType===1&&fo(e,s),is(e)):fo(Ye,s.stateNode));break;case 4:l=Ye,d=It,Ye=s.stateNode.containerInfo,It=!0,Nr(e,t,s),Ye=l,It=d;break;case 0:case 11:case 14:case 15:if(!it&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var f=d,y=f.destroy;f=f.tag,y!==void 0&&((f&2)!==0||(f&4)!==0)&&Yo(s,t,y),d=d.next}while(d!==l)}Nr(e,t,s);break;case 1:if(!it&&(_n(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(k){Le(s,t,k)}Nr(e,t,s);break;case 21:Nr(e,t,s);break;case 22:s.mode&1?(it=(l=it)||s.memoizedState!==null,Nr(e,t,s),it=l):Nr(e,t,s);break;default:Nr(e,t,s)}}function Bd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new jp),t.forEach(function(l){var d=Ip.bind(null,e,l);s.has(l)||(s.add(l),l.then(d,d))})}}function At(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];try{var f=e,y=t,k=y;e:for(;k!==null;){switch(k.tag){case 5:Ye=k.stateNode,It=!1;break e;case 3:Ye=k.stateNode.containerInfo,It=!0;break e;case 4:Ye=k.stateNode.containerInfo,It=!0;break e}k=k.return}if(Ye===null)throw Error(i(160));Fd(f,y,d),Ye=null,It=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(U){Le(d,t,U)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hd(t,e),t=t.sibling}function Hd(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),qt(e),l&4){try{Cs(3,e,e.return),$i(3,e)}catch(oe){Le(e,e.return,oe)}try{Cs(5,e,e.return)}catch(oe){Le(e,e.return,oe)}}break;case 1:At(t,e),qt(e),l&512&&s!==null&&_n(s,s.return);break;case 5:if(At(t,e),qt(e),l&512&&s!==null&&_n(s,s.return),e.flags&32){var d=e.stateNode;try{Jn(d,"")}catch(oe){Le(e,e.return,oe)}}if(l&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,y=s!==null?s.memoizedProps:f,k=e.type,P=e.updateQueue;if(e.updateQueue=null,P!==null)try{k==="input"&&f.type==="radio"&&f.name!=null&&xc(d,f),Ta(k,y);var U=Ta(k,f);for(y=0;y<P.length;y+=2){var G=P[y],Q=P[y+1];G==="style"?_c(d,Q):G==="dangerouslySetInnerHTML"?Nc(d,Q):G==="children"?Jn(d,Q):A(d,G,Q,U)}switch(k){case"input":_a(d,f);break;case"textarea":wc(d,f);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var te=f.value;te!=null?nn(d,!!f.multiple,te,!1):K!==!!f.multiple&&(f.defaultValue!=null?nn(d,!!f.multiple,f.defaultValue,!0):nn(d,!!f.multiple,f.multiple?[]:"",!1))}d[gs]=f}catch(oe){Le(e,e.return,oe)}}break;case 6:if(At(t,e),qt(e),l&4){if(e.stateNode===null)throw Error(i(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(oe){Le(e,e.return,oe)}}break;case 3:if(At(t,e),qt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(oe){Le(e,e.return,oe)}break;case 4:At(t,e),qt(e);break;case 13:At(t,e),qt(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(nl=$e())),l&4&&Bd(e);break;case 22:if(G=s!==null&&s.memoizedState!==null,e.mode&1?(it=(U=it)||G,At(t,e),it=U):At(t,e),qt(e),l&8192){if(U=e.memoizedState!==null,(e.stateNode.isHidden=U)&&!G&&(e.mode&1)!==0)for(ne=e,G=e.child;G!==null;){for(Q=ne=G;ne!==null;){switch(K=ne,te=K.child,K.tag){case 0:case 11:case 14:case 15:Cs(4,K,K.return);break;case 1:_n(K,K.return);var ie=K.stateNode;if(typeof ie.componentWillUnmount=="function"){l=K,s=K.return;try{t=l,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(oe){Le(l,s,oe)}}break;case 5:_n(K,K.return);break;case 22:if(K.memoizedState!==null){qd(Q);continue}}te!==null?(te.return=K,ne=te):qd(Q)}G=G.sibling}e:for(G=null,Q=e;;){if(Q.tag===5){if(G===null){G=Q;try{d=Q.stateNode,U?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(k=Q.stateNode,P=Q.memoizedProps.style,y=P!=null&&P.hasOwnProperty("display")?P.display:null,k.style.display=kc("display",y))}catch(oe){Le(e,e.return,oe)}}}else if(Q.tag===6){if(G===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(oe){Le(e,e.return,oe)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;G===Q&&(G=null),Q=Q.return}G===Q&&(G=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:At(t,e),qt(e),l&4&&Bd(e);break;case 21:break;default:At(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Ud(s)){var l=s;break e}s=s.return}throw Error(i(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(Jn(d,""),l.flags&=-33);var f=zd(e);el(e,f,d);break;case 3:case 4:var y=l.stateNode.containerInfo,k=zd(e);Zo(e,k,y);break;default:throw Error(i(161))}}catch(P){Le(e,e.return,P)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kp(e,t,s){ne=e,Wd(e)}function Wd(e,t,s){for(var l=(e.mode&1)!==0;ne!==null;){var d=ne,f=d.child;if(d.tag===22&&l){var y=d.memoizedState!==null||Li;if(!y){var k=d.alternate,P=k!==null&&k.memoizedState!==null||it;k=Li;var U=it;if(Li=y,(it=P)&&!U)for(ne=d;ne!==null;)y=ne,P=y.child,y.tag===22&&y.memoizedState!==null?Kd(d):P!==null?(P.return=y,ne=P):Kd(d);for(;f!==null;)ne=f,Wd(f),f=f.sibling;ne=d,Li=k,it=U}Vd(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ne=f):Vd(e)}}function Vd(e){for(;ne!==null;){var t=ne;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:it||$i(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!it)if(s===null)l.componentDidMount();else{var d=t.elementType===t.type?s.memoizedProps:Rt(t.type,s.memoizedProps);l.componentDidUpdate(d,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&qu(t,f,l);break;case 3:var y=t.updateQueue;if(y!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}qu(t,y,s)}break;case 5:var k=t.stateNode;if(s===null&&t.flags&4){s=k;var P=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&s.focus();break;case"img":P.src&&(s.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var U=t.alternate;if(U!==null){var G=U.memoizedState;if(G!==null){var Q=G.dehydrated;Q!==null&&is(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}it||t.flags&512&&Xo(t)}catch(K){Le(t,t.return,K)}}if(t===e){ne=null;break}if(s=t.sibling,s!==null){s.return=t.return,ne=s;break}ne=t.return}}function qd(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ne=s;break}ne=t.return}}function Kd(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{$i(4,t)}catch(P){Le(t,s,P)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(P){Le(t,d,P)}}var f=t.return;try{Xo(t)}catch(P){Le(t,f,P)}break;case 5:var y=t.return;try{Xo(t)}catch(P){Le(t,y,P)}}}catch(P){Le(t,t.return,P)}if(t===e){ne=null;break}var k=t.sibling;if(k!==null){k.return=t.return,ne=k;break}ne=t.return}}var _p=Math.ceil,Ui=O.ReactCurrentDispatcher,tl=O.ReactCurrentOwner,kt=O.ReactCurrentBatchConfig,je=0,Je=null,ze=null,Xe=0,vt=0,Sn=yr(0),He=0,Es=null,Br=0,zi=0,rl=0,Ps=null,ft=null,nl=0,Cn=1/0,nr=null,Fi=!1,sl=null,kr=null,Bi=!1,_r=null,Hi=0,Ts=0,il=null,Wi=-1,Vi=0;function ot(){return(je&6)!==0?$e():Wi!==-1?Wi:Wi=$e()}function Sr(e){return(e.mode&1)===0?1:(je&2)!==0&&Xe!==0?Xe&-Xe:lp.transition!==null?(Vi===0&&(Vi=zc()),Vi):(e=Se,e!==0||(e=window.event,e=e===void 0?16:Gc(e.type)),e)}function Ot(e,t,s,l){if(50<Ts)throw Ts=0,il=null,Error(i(185));es(e,s,l),((je&2)===0||e!==Je)&&(e===Je&&((je&2)===0&&(zi|=s),He===4&&Cr(e,Xe)),mt(e,l),s===1&&je===0&&(t.mode&1)===0&&(Cn=$e()+500,vi&&wr()))}function mt(e,t){var s=e.callbackNode;lm(e,t);var l=ei(e,e===Je?Xe:0);if(l===0)s!==null&&Lc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(s!=null&&Lc(s),t===1)e.tag===0?op(Gd.bind(null,e)):Ou(Gd.bind(null,e)),np(function(){(je&6)===0&&wr()}),s=null;else{switch(Fc(l)){case 1:s=La;break;case 4:s=$c;break;case 16:s=Qs;break;case 536870912:s=Uc;break;default:s=Qs}s=nh(s,Jd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Jd(e,t){if(Wi=-1,Vi=0,(je&6)!==0)throw Error(i(327));var s=e.callbackNode;if(En()&&e.callbackNode!==s)return null;var l=ei(e,e===Je?Xe:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=qi(e,l);else{t=l;var d=je;je|=2;var f=Yd();(Je!==e||Xe!==t)&&(nr=null,Cn=$e()+500,Wr(e,t));do try{Ep();break}catch(k){Qd(e,k)}while(!0);No(),Ui.current=f,je=d,ze!==null?t=0:(Je=null,Xe=0,t=He)}if(t!==0){if(t===2&&(d=$a(e),d!==0&&(l=d,t=al(e,d))),t===1)throw s=Es,Wr(e,0),Cr(e,l),mt(e,$e()),s;if(t===6)Cr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!Sp(d)&&(t=qi(e,l),t===2&&(f=$a(e),f!==0&&(l=f,t=al(e,f))),t===1))throw s=Es,Wr(e,0),Cr(e,l),mt(e,$e()),s;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(i(345));case 2:Vr(e,ft,nr);break;case 3:if(Cr(e,l),(l&130023424)===l&&(t=nl+500-$e(),10<t)){if(ei(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){ot(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ho(Vr.bind(null,e,ft,nr),t);break}Vr(e,ft,nr);break;case 4:if(Cr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var y=31-Et(l);f=1<<y,y=t[y],y>d&&(d=y),l&=~f}if(l=d,l=$e()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*_p(l/1960))-l,10<l){e.timeoutHandle=ho(Vr.bind(null,e,ft,nr),l);break}Vr(e,ft,nr);break;case 5:Vr(e,ft,nr);break;default:throw Error(i(329))}}}return mt(e,$e()),e.callbackNode===s?Jd.bind(null,e):null}function al(e,t){var s=Ps;return e.current.memoizedState.isDehydrated&&(Wr(e,t).flags|=256),e=qi(e,t),e!==2&&(t=ft,ft=s,t!==null&&ol(t)),e}function ol(e){ft===null?ft=e:ft.push.apply(ft,e)}function Sp(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var d=s[l],f=d.getSnapshot;d=d.value;try{if(!Pt(f(),d))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t){for(t&=~rl,t&=~zi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Et(t),l=1<<s;e[s]=-1,t&=~l}}function Gd(e){if((je&6)!==0)throw Error(i(327));En();var t=ei(e,0);if((t&1)===0)return mt(e,$e()),null;var s=qi(e,t);if(e.tag!==0&&s===2){var l=$a(e);l!==0&&(t=l,s=al(e,l))}if(s===1)throw s=Es,Wr(e,0),Cr(e,t),mt(e,$e()),s;if(s===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,ft,nr),mt(e,$e()),null}function ll(e,t){var s=je;je|=1;try{return e(t)}finally{je=s,je===0&&(Cn=$e()+500,vi&&wr())}}function Hr(e){_r!==null&&_r.tag===0&&(je&6)===0&&En();var t=je;je|=1;var s=kt.transition,l=Se;try{if(kt.transition=null,Se=1,e)return e()}finally{Se=l,kt.transition=s,je=t,(je&6)===0&&wr()}}function cl(){vt=Sn.current,Re(Sn)}function Wr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,rp(s)),ze!==null)for(s=ze.return;s!==null;){var l=s;switch(yo(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&xi();break;case 3:Nn(),Re(ut),Re(rt),Ro();break;case 5:Po(l);break;case 4:Nn();break;case 13:Re(De);break;case 19:Re(De);break;case 10:ko(l.type._context);break;case 22:case 23:cl()}s=s.return}if(Je=e,ze=e=Er(e.current,null),Xe=vt=t,He=0,Es=null,rl=zi=Br=0,ft=Ps=null,Ur!==null){for(t=0;t<Ur.length;t++)if(s=Ur[t],l=s.interleaved,l!==null){s.interleaved=null;var d=l.next,f=s.pending;if(f!==null){var y=f.next;f.next=d,l.next=y}s.pending=l}Ur=null}return e}function Qd(e,t){do{var s=ze;try{if(No(),Pi.current=Ai,Ti){for(var l=Me.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ti=!1}if(Fr=0,Ke=Be=Me=null,js=!1,Ns=0,tl.current=null,s===null||s.return===null){He=1,Es=t,ze=null;break}e:{var f=e,y=s.return,k=s,P=t;if(t=Xe,k.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var U=P,G=k,Q=G.tag;if((G.mode&1)===0&&(Q===0||Q===11||Q===15)){var K=G.alternate;K?(G.updateQueue=K.updateQueue,G.memoizedState=K.memoizedState,G.lanes=K.lanes):(G.updateQueue=null,G.memoizedState=null)}var te=bd(y);if(te!==null){te.flags&=-257,jd(te,y,k,f,t),te.mode&1&&wd(f,U,t),t=te,P=U;var ie=t.updateQueue;if(ie===null){var oe=new Set;oe.add(P),t.updateQueue=oe}else ie.add(P);break e}else{if((t&1)===0){wd(f,U,t),ul();break e}P=Error(i(426))}}else if(Ie&&k.mode&1){var Ue=bd(y);if(Ue!==null){(Ue.flags&65536)===0&&(Ue.flags|=256),jd(Ue,y,k,f,t),bo(kn(P,k));break e}}f=P=kn(P,k),He!==4&&(He=2),Ps===null?Ps=[f]:Ps.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var M=yd(f,P,t);Vu(f,M);break e;case 1:k=P;var R=f.type,L=f.stateNode;if((f.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(kr===null||!kr.has(L)))){f.flags|=65536,t&=-t,f.lanes|=t;var X=vd(f,k,t);Vu(f,X);break e}}f=f.return}while(f!==null)}Zd(s)}catch(le){t=le,ze===s&&s!==null&&(ze=s=s.return);continue}break}while(!0)}function Yd(){var e=Ui.current;return Ui.current=Ai,e===null?Ai:e}function ul(){(He===0||He===3||He===2)&&(He=4),Je===null||(Br&268435455)===0&&(zi&268435455)===0||Cr(Je,Xe)}function qi(e,t){var s=je;je|=2;var l=Yd();(Je!==e||Xe!==t)&&(nr=null,Wr(e,t));do try{Cp();break}catch(d){Qd(e,d)}while(!0);if(No(),je=s,Ui.current=l,ze!==null)throw Error(i(261));return Je=null,Xe=0,He}function Cp(){for(;ze!==null;)Xd(ze)}function Ep(){for(;ze!==null&&!Zf();)Xd(ze)}function Xd(e){var t=rh(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Zd(e):ze=t,tl.current=null}function Zd(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=wp(s,t,vt),s!==null){ze=s;return}}else{if(s=bp(s,t),s!==null){s.flags&=32767,ze=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,ze=null;return}}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);He===0&&(He=5)}function Vr(e,t,s){var l=Se,d=kt.transition;try{kt.transition=null,Se=1,Pp(e,t,s,l)}finally{kt.transition=d,Se=l}return null}function Pp(e,t,s,l){do En();while(_r!==null);if((je&6)!==0)throw Error(i(327));s=e.finishedWork;var d=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(cm(e,f),e===Je&&(ze=Je=null,Xe=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Bi||(Bi=!0,nh(Qs,function(){return En(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=kt.transition,kt.transition=null;var y=Se;Se=1;var k=je;je|=4,tl.current=null,Np(e,s),Hd(s,e),Gm(co),ni=!!lo,co=lo=null,e.current=s,kp(s),em(),je=k,Se=y,kt.transition=f}else e.current=s;if(Bi&&(Bi=!1,_r=e,Hi=d),f=e.pendingLanes,f===0&&(kr=null),nm(s.stateNode),mt(e,$e()),t!==null)for(l=e.onRecoverableError,s=0;s<t.length;s++)d=t[s],l(d.value,{componentStack:d.stack,digest:d.digest});if(Fi)throw Fi=!1,e=sl,sl=null,e;return(Hi&1)!==0&&e.tag!==0&&En(),f=e.pendingLanes,(f&1)!==0?e===il?Ts++:(Ts=0,il=e):Ts=0,wr(),null}function En(){if(_r!==null){var e=Fc(Hi),t=kt.transition,s=Se;try{if(kt.transition=null,Se=16>e?16:e,_r===null)var l=!1;else{if(e=_r,_r=null,Hi=0,(je&6)!==0)throw Error(i(331));var d=je;for(je|=4,ne=e.current;ne!==null;){var f=ne,y=f.child;if((ne.flags&16)!==0){var k=f.deletions;if(k!==null){for(var P=0;P<k.length;P++){var U=k[P];for(ne=U;ne!==null;){var G=ne;switch(G.tag){case 0:case 11:case 15:Cs(8,G,f)}var Q=G.child;if(Q!==null)Q.return=G,ne=Q;else for(;ne!==null;){G=ne;var K=G.sibling,te=G.return;if($d(G),G===U){ne=null;break}if(K!==null){K.return=te,ne=K;break}ne=te}}}var ie=f.alternate;if(ie!==null){var oe=ie.child;if(oe!==null){ie.child=null;do{var Ue=oe.sibling;oe.sibling=null,oe=Ue}while(oe!==null)}}ne=f}}if((f.subtreeFlags&2064)!==0&&y!==null)y.return=f,ne=y;else e:for(;ne!==null;){if(f=ne,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Cs(9,f,f.return)}var M=f.sibling;if(M!==null){M.return=f.return,ne=M;break e}ne=f.return}}var R=e.current;for(ne=R;ne!==null;){y=ne;var L=y.child;if((y.subtreeFlags&2064)!==0&&L!==null)L.return=y,ne=L;else e:for(y=R;ne!==null;){if(k=ne,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:$i(9,k)}}catch(le){Le(k,k.return,le)}if(k===y){ne=null;break e}var X=k.sibling;if(X!==null){X.return=k.return,ne=X;break e}ne=k.return}}if(je=d,wr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Ys,e)}catch{}l=!0}return l}finally{Se=s,kt.transition=t}}return!1}function eh(e,t,s){t=kn(s,t),t=yd(e,t,1),e=jr(e,t,1),t=ot(),e!==null&&(es(e,1,t),mt(e,t))}function Le(e,t,s){if(e.tag===3)eh(e,e,s);else for(;t!==null;){if(t.tag===3){eh(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(kr===null||!kr.has(l))){e=kn(s,e),e=vd(t,e,1),t=jr(t,e,1),e=ot(),t!==null&&(es(t,1,e),mt(t,e));break}}t=t.return}}function Tp(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(Xe&s)===s&&(He===4||He===3&&(Xe&130023424)===Xe&&500>$e()-nl?Wr(e,0):rl|=s),mt(e,t)}function th(e,t){t===0&&((e.mode&1)===0?t=1:(t=Zs,Zs<<=1,(Zs&130023424)===0&&(Zs=4194304)));var s=ot();e=er(e,t),e!==null&&(es(e,t,s),mt(e,s))}function Rp(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),th(e,s)}function Ip(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(i(314))}l!==null&&l.delete(t),th(e,s)}var rh;rh=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)ht=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return ht=!1,vp(e,t,s);ht=(e.flags&131072)!==0}else ht=!1,Ie&&(t.flags&1048576)!==0&&Du(t,bi,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Mi(e,t),e=t.pendingProps;var d=gn(t,rt.current);jn(t,s),d=Oo(null,t,l,e,d,s);var f=Do();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(l)?(f=!0,yi(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Co(t),d.updater=Oi,t.stateNode=d,d._reactInternals=t,Fo(t,l,e,s),t=Vo(null,t,l,!0,f,s)):(t.tag=0,Ie&&f&&xo(t),at(null,t,d,s),t=t.child),t;case 16:l=t.elementType;e:{switch(Mi(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=Op(l),e=Rt(l,e),d){case 0:t=Wo(null,t,l,e,s);break e;case 1:t=Ed(null,t,l,e,s);break e;case 11:t=Nd(null,t,l,e,s);break e;case 14:t=kd(null,t,l,Rt(l.type,e),s);break e}throw Error(i(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Wo(e,t,l,d,s);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Ed(e,t,l,d,s);case 3:e:{if(Pd(t),e===null)throw Error(i(387));l=t.pendingProps,f=t.memoizedState,d=f.element,Wu(e,t),Ci(t,l,null,s);var y=t.memoizedState;if(l=y.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=kn(Error(i(423)),t),t=Td(e,t,l,s,d);break e}else if(l!==d){d=kn(Error(i(424)),t),t=Td(e,t,l,s,d);break e}else for(yt=xr(t.stateNode.containerInfo.firstChild),xt=t,Ie=!0,Tt=null,s=Bu(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(vn(),l===d){t=rr(e,t,s);break e}at(e,t,l,s)}t=t.child}return t;case 5:return Ku(t),e===null&&wo(t),l=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,y=d.children,uo(l,d)?y=null:f!==null&&uo(l,f)&&(t.flags|=32),Cd(e,t),at(e,t,y,s),t.child;case 6:return e===null&&wo(t),null;case 13:return Rd(e,t,s);case 4:return Eo(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=wn(t,null,l,s):at(e,t,l,s),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Nd(e,t,l,d,s);case 7:return at(e,t,t.pendingProps,s),t.child;case 8:return at(e,t,t.pendingProps.children,s),t.child;case 12:return at(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,f=t.memoizedProps,y=d.value,Ee(ki,l._currentValue),l._currentValue=y,f!==null)if(Pt(f.value,y)){if(f.children===d.children&&!ut.current){t=rr(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var k=f.dependencies;if(k!==null){y=f.child;for(var P=k.firstContext;P!==null;){if(P.context===l){if(f.tag===1){P=tr(-1,s&-s),P.tag=2;var U=f.updateQueue;if(U!==null){U=U.shared;var G=U.pending;G===null?P.next=P:(P.next=G.next,G.next=P),U.pending=P}}f.lanes|=s,P=f.alternate,P!==null&&(P.lanes|=s),_o(f.return,s,t),k.lanes|=s;break}P=P.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(i(341));y.lanes|=s,k=y.alternate,k!==null&&(k.lanes|=s),_o(y,s,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}at(e,t,d.children,s),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,jn(t,s),d=jt(d),l=l(d),t.flags|=1,at(e,t,l,s),t.child;case 14:return l=t.type,d=Rt(l,t.pendingProps),d=Rt(l.type,d),kd(e,t,l,d,s);case 15:return _d(e,t,t.type,t.pendingProps,s);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Mi(e,t),t.tag=1,dt(l)?(e=!0,yi(t)):e=!1,jn(t,s),gd(t,l,d),Fo(t,l,d,s),Vo(null,t,l,!0,e,s);case 19:return Ad(e,t,s);case 22:return Sd(e,t,s)}throw Error(i(156,t.tag))};function nh(e,t){return Mc(e,t)}function Ap(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,s,l){return new Ap(e,t,s,l)}function dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Op(e){if(typeof e=="function")return dl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ue)return 11;if(e===C)return 14}return 2}function Er(e,t){var s=e.alternate;return s===null?(s=_t(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ki(e,t,s,l,d,f){var y=2;if(l=e,typeof e=="function")dl(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case ee:return qr(s.children,d,f,t);case $:y=8,d|=8;break;case F:return e=_t(12,s,t,d|2),e.elementType=F,e.lanes=f,e;case ge:return e=_t(13,s,t,d),e.elementType=ge,e.lanes=f,e;case be:return e=_t(19,s,t,d),e.elementType=be,e.lanes=f,e;case ae:return Ji(s,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:y=10;break e;case J:y=9;break e;case ue:y=11;break e;case C:y=14;break e;case H:y=16,l=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=_t(y,s,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function qr(e,t,s,l){return e=_t(7,e,l,t),e.lanes=s,e}function Ji(e,t,s,l){return e=_t(22,e,l,t),e.elementType=ae,e.lanes=s,e.stateNode={isHidden:!1},e}function hl(e,t,s){return e=_t(6,e,null,t),e.lanes=s,e}function fl(e,t,s){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dp(e,t,s,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ua(0),this.expirationTimes=Ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function ml(e,t,s,l,d,f,y,k,P){return e=new Dp(e,t,s,k,P),t===1?(t=1,f===!0&&(t|=8)):t=0,f=_t(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Co(f),e}function Mp(e,t,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:l==null?null:""+l,children:e,containerInfo:t,implementation:s}}function sh(e){if(!e)return vr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var s=e.type;if(dt(s))return Iu(e,s,t)}return t}function ih(e,t,s,l,d,f,y,k,P){return e=ml(s,l,!0,e,d,f,y,k,P),e.context=sh(null),s=e.current,l=ot(),d=Sr(s),f=tr(l,d),f.callback=t??null,jr(s,f,d),e.current.lanes=d,es(e,d,l),mt(e,l),e}function Gi(e,t,s,l){var d=t.current,f=ot(),y=Sr(d);return s=sh(s),t.context===null?t.context=s:t.pendingContext=s,t=tr(f,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=jr(d,t,y),e!==null&&(Ot(e,d,y,f),Si(e,d,y)),y}function Qi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ah(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function pl(e,t){ah(e,t),(e=e.alternate)&&ah(e,t)}function Lp(){return null}var oh=typeof reportError=="function"?reportError:function(e){console.error(e)};function gl(e){this._internalRoot=e}Yi.prototype.render=gl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));Gi(e,t,null,null)},Yi.prototype.unmount=gl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){Gi(null,e,null,null)}),t[Qt]=null}};function Yi(e){this._internalRoot=e}Yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wc();e={blockedOn:null,target:e,priority:t};for(var s=0;s<mr.length&&t!==0&&t<mr[s].priority;s++);mr.splice(s,0,e),s===0&&Kc(e)}};function xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lh(){}function $p(e,t,s,l,d){if(d){if(typeof l=="function"){var f=l;l=function(){var U=Qi(y);f.call(U)}}var y=ih(t,l,e,0,null,!1,!1,"",lh);return e._reactRootContainer=y,e[Qt]=y.current,ms(e.nodeType===8?e.parentNode:e),Hr(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var k=l;l=function(){var U=Qi(P);k.call(U)}}var P=ml(e,0,!1,null,null,!1,!1,"",lh);return e._reactRootContainer=P,e[Qt]=P.current,ms(e.nodeType===8?e.parentNode:e),Hr(function(){Gi(t,P,s,l)}),P}function Zi(e,t,s,l,d){var f=s._reactRootContainer;if(f){var y=f;if(typeof d=="function"){var k=d;d=function(){var P=Qi(y);k.call(P)}}Gi(t,y,e,d)}else y=$p(s,t,e,d,l);return Qi(y)}Bc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Zn(t.pendingLanes);s!==0&&(za(t,s|1),mt(t,$e()),(je&6)===0&&(Cn=$e()+500,wr()))}break;case 13:Hr(function(){var l=er(e,1);if(l!==null){var d=ot();Ot(l,e,1,d)}}),pl(e,1)}},Fa=function(e){if(e.tag===13){var t=er(e,134217728);if(t!==null){var s=ot();Ot(t,e,134217728,s)}pl(e,134217728)}},Hc=function(e){if(e.tag===13){var t=Sr(e),s=er(e,t);if(s!==null){var l=ot();Ot(s,e,t,l)}pl(e,t)}},Wc=function(){return Se},Vc=function(e,t){var s=Se;try{return Se=e,t()}finally{Se=s}},Aa=function(e,t,s){switch(t){case"input":if(_a(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var d=gi(l);if(!d)throw Error(i(90));tt(l),_a(l,d)}}}break;case"textarea":wc(e,s);break;case"select":t=s.value,t!=null&&nn(e,!!s.multiple,t,!1)}},Pc=ll,Tc=Hr;var Up={usingClientEntryPoint:!1,Events:[xs,mn,gi,Cc,Ec,ll]},Rs={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Oc(e),e===null?null:e.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||Lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{Ys=ea.inject(zp),Bt=ea}catch{}}return pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Up,pt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xl(t))throw Error(i(200));return Mp(e,t,null,s)},pt.createRoot=function(e,t){if(!xl(e))throw Error(i(299));var s=!1,l="",d=oh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=ml(e,1,!1,null,null,s,!1,l,d),e[Qt]=t.current,ms(e.nodeType===8?e.parentNode:e),new gl(t)},pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Oc(t),e=e===null?null:e.stateNode,e},pt.flushSync=function(e){return Hr(e)},pt.hydrate=function(e,t,s){if(!Xi(t))throw Error(i(200));return Zi(null,e,t,!0,s)},pt.hydrateRoot=function(e,t,s){if(!xl(e))throw Error(i(405));var l=s!=null&&s.hydratedSources||null,d=!1,f="",y=oh;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),t=ih(t,null,e,1,s??null,d,!1,f,y),e[Qt]=t.current,ms(e),l)for(e=0;e<l.length;e++)s=l[e],d=s._getVersion,d=d(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,d]:t.mutableSourceEagerHydrationData.push(s,d);return new Yi(t)},pt.render=function(e,t,s){if(!Xi(t))throw Error(i(200));return Zi(null,e,t,!1,s)},pt.unmountComponentAtNode=function(e){if(!Xi(e))throw Error(i(40));return e._reactRootContainer?(Hr(function(){Zi(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1},pt.unstable_batchedUpdates=ll,pt.unstable_renderSubtreeIntoContainer=function(e,t,s,l){if(!Xi(s))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return Zi(e,t,s,!1,l)},pt.version="18.3.1-next-f1338f8080-20240426",pt}var gh;function Gp(){if(gh)return wl.exports;gh=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),wl.exports=Jp(),wl.exports}var xh;function Qp(){if(xh)return ta;xh=1;var a=Gp();return ta.createRoot=a.createRoot,ta.hydrateRoot=a.hydrateRoot,ta}var Yp=Qp();var yh="popstate";function Xp(a={}){function n(c,u){let{pathname:h="/",search:m="",hash:p=""}=en(c.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Ll("",{pathname:h,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(c,u){let h=c.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let p=c.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:Us(u))}function o(c,u){St(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return e0(n,i,o,a)}function Oe(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function St(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Zp(){return Math.random().toString(36).substring(2,10)}function vh(a,n){return{usr:a.state,key:a.key,idx:n}}function Ll(a,n,i=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof n=="string"?en(n):n,state:i,key:n&&n.key||o||Zp()}}function Us({pathname:a="/",search:n="",hash:i=""}){return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function en(a){let n={};if(a){let i=a.indexOf("#");i>=0&&(n.hash=a.substring(i),a=a.substring(0,i));let o=a.indexOf("?");o>=0&&(n.search=a.substring(o),a=a.substring(0,o)),a&&(n.pathname=a)}return n}function e0(a,n,i,o={}){let{window:c=document.defaultView,v5Compat:u=!1}=o,h=c.history,m="POP",p=null,g=x();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function x(){return(h.state||{idx:null}).idx}function v(){m="POP";let S=x(),T=S==null?null:S-g;g=S,p&&p({action:m,location:E.location,delta:T})}function j(S,T){m="PUSH";let D=Ll(E.location,S,T);i&&i(D,S),g=x()+1;let A=vh(D,g),O=E.createHref(D);try{h.pushState(A,"",O)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;c.location.assign(O)}u&&p&&p({action:m,location:E.location,delta:1})}function N(S,T){m="REPLACE";let D=Ll(E.location,S,T);i&&i(D,S),g=x();let A=vh(D,g),O=E.createHref(D);h.replaceState(A,"",O),u&&p&&p({action:m,location:E.location,delta:0})}function b(S){return t0(S)}let E={get action(){return m},get location(){return a(c,h)},listen(S){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(yh,v),p=S,()=>{c.removeEventListener(yh,v),p=null}},createHref(S){return n(c,S)},createURL:b,encodeLocation(S){let T=b(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:j,replace:N,go(S){return h.go(S)}};return E}function t0(a,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(i,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:Us(a);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function rf(a,n,i="/"){return r0(a,n,i,!1)}function r0(a,n,i,o){let c=typeof n=="string"?en(n):n,u=cr(c.pathname||"/",i);if(u==null)return null;let h=nf(a);n0(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=m0(u);m=h0(h[p],g,o)}return m}function nf(a,n=[],i=[],o="",c=!1){let u=(h,m,p=c,g)=>{let x={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(o)&&p)return;Oe(x.relativePath.startsWith(o),`Absolute route path "${x.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(o.length)}let v=lr([o,x.relativePath]),j=i.concat(x);h.children&&h.children.length>0&&(Oe(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),nf(h.children,n,j,v,p)),!(h.path==null&&!h.index)&&n.push({path:v,score:u0(v,h.index),routesMeta:j})};return a.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))u(h,m);else for(let p of sf(h.path))u(h,m,!0,p)}),n}function sf(a){let n=a.split("/");if(n.length===0)return[];let[i,...o]=n,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let h=sf(o.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...h),m.map(p=>a.startsWith("/")&&p===""?"/":p)}function n0(a){a.sort((n,i)=>n.score!==i.score?i.score-n.score:d0(n.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var s0=/^:[\w-]+$/,i0=3,a0=2,o0=1,l0=10,c0=-2,wh=a=>a==="*";function u0(a,n){let i=a.split("/"),o=i.length;return i.some(wh)&&(o+=c0),n&&(o+=a0),i.filter(c=>!wh(c)).reduce((c,u)=>c+(s0.test(u)?i0:u===""?o0:l0),o)}function d0(a,n){return a.length===n.length&&a.slice(0,-1).every((o,c)=>o===n[c])?a[a.length-1]-n[n.length-1]:0}function h0(a,n,i=!1){let{routesMeta:o}=a,c={},u="/",h=[];for(let m=0;m<o.length;++m){let p=o[m],g=m===o.length-1,x=u==="/"?n:n.slice(u.length)||"/",v=fa({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},x),j=p.route;if(!v&&g&&i&&!o[o.length-1].route.index&&(v=fa({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!v)return null;Object.assign(c,v.params),h.push({params:c,pathname:lr([u,v.pathname]),pathnameBase:y0(lr([u,v.pathnameBase])),route:j}),v.pathnameBase!=="/"&&(u=lr([u,v.pathnameBase]))}return h}function fa(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,o]=f0(a.path,a.caseSensitive,a.end),c=n.match(i);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:o.reduce((g,{paramName:x,isOptional:v},j)=>{if(x==="*"){let b=m[j]||"";h=u.slice(0,u.length-b.length).replace(/(.)\/+$/,"$1")}const N=m[j];return v&&!N?g[x]=void 0:g[x]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:a}}function f0(a,n=!1,i=!0){St(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],c="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),c+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":a!==""&&a!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),o]}function m0(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return St(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),a}}function cr(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,o=a.charAt(i);return o&&o!=="/"?null:a.slice(i)||"/"}function p0(a,n="/"){let{pathname:i,search:o="",hash:c=""}=typeof a=="string"?en(a):a;return{pathname:i?i.startsWith("/")?i:g0(i,n):n,search:v0(o),hash:w0(c)}}function g0(a,n){let i=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Nl(a,n,i,o){return`Cannot include a '${a}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x0(a){return a.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function ec(a){let n=x0(a);return n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase)}function tc(a,n,i,o=!1){let c;typeof a=="string"?c=en(a):(c={...a},Oe(!c.pathname||!c.pathname.includes("?"),Nl("?","pathname","search",c)),Oe(!c.pathname||!c.pathname.includes("#"),Nl("#","pathname","hash",c)),Oe(!c.search||!c.search.includes("#"),Nl("#","search","hash",c)));let u=a===""||c.pathname==="",h=u?"/":c.pathname,m;if(h==null)m=i;else{let v=n.length-1;if(!o&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),v-=1;c.pathname=j.join("/")}m=v>=0?n[v]:"/"}let p=p0(c,m),g=h&&h!=="/"&&h.endsWith("/"),x=(u||h===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(g||x)&&(p.pathname+="/"),p}var lr=a=>a.join("/").replace(/\/\/+/g,"/"),y0=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),v0=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,w0=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function b0(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var af=["POST","PUT","PATCH","DELETE"];new Set(af);var j0=["GET",...af];new Set(j0);var Wn=w.createContext(null);Wn.displayName="DataRouter";var xa=w.createContext(null);xa.displayName="DataRouterState";w.createContext(!1);var of=w.createContext({isTransitioning:!1});of.displayName="ViewTransition";var N0=w.createContext(new Map);N0.displayName="Fetchers";var k0=w.createContext(null);k0.displayName="Await";var zt=w.createContext(null);zt.displayName="Navigation";var Hs=w.createContext(null);Hs.displayName="Location";var Ct=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ct.displayName="Route";var rc=w.createContext(null);rc.displayName="RouteError";function _0(a,{relative:n}={}){Oe(Vn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=w.useContext(zt),{hash:c,pathname:u,search:h}=Ws(a,{relative:n}),m=u;return i!=="/"&&(m=u==="/"?i:lr([i,u])),o.createHref({pathname:m,search:h,hash:c})}function Vn(){return w.useContext(Hs)!=null}function ur(){return Oe(Vn(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Hs).location}var lf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cf(a){w.useContext(zt).static||w.useLayoutEffect(a)}function ya(){let{isDataRoute:a}=w.useContext(Ct);return a?z0():S0()}function S0(){Oe(Vn(),"useNavigate() may be used only in the context of a <Router> component.");let a=w.useContext(Wn),{basename:n,navigator:i}=w.useContext(zt),{matches:o}=w.useContext(Ct),{pathname:c}=ur(),u=JSON.stringify(ec(o)),h=w.useRef(!1);return cf(()=>{h.current=!0}),w.useCallback((p,g={})=>{if(St(h.current,lf),!h.current)return;if(typeof p=="number"){i.go(p);return}let x=tc(p,JSON.parse(u),c,g.relative==="path");a==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:lr([n,x.pathname])),(g.replace?i.replace:i.push)(x,g.state,g)},[n,i,u,c,a])}var C0=w.createContext(null);function E0(a){let n=w.useContext(Ct).outlet;return n&&w.createElement(C0.Provider,{value:a},n)}function uf(){let{matches:a}=w.useContext(Ct),n=a[a.length-1];return n?n.params:{}}function Ws(a,{relative:n}={}){let{matches:i}=w.useContext(Ct),{pathname:o}=ur(),c=JSON.stringify(ec(i));return w.useMemo(()=>tc(a,JSON.parse(c),o,n==="path"),[a,c,o,n])}function P0(a,n){return df(a,n)}function df(a,n,i,o,c){Oe(Vn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(zt),{matches:h}=w.useContext(Ct),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",x=m?m.pathnameBase:"/",v=m&&m.route;{let D=v&&v.path||"";hf(g,!v||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let j=ur(),N;if(n){let D=typeof n=="string"?en(n):n;Oe(x==="/"||D.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${D.pathname}" was given in the \`location\` prop.`),N=D}else N=j;let b=N.pathname||"/",E=b;if(x!=="/"){let D=x.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=rf(a,{pathname:E});St(v||S!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),St(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=O0(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},p,D.params),pathname:lr([x,u.encodeLocation?u.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?x:lr([x,u.encodeLocation?u.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),h,i,o,c);return n&&T?w.createElement(Hs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},T):T}function T0(){let a=U0(),n=b0(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},h=null;return console.error("Error handled by React Router default ErrorBoundary:",a),h=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),i?w.createElement("pre",{style:c},i):null,h)}var R0=w.createElement(T0,null),I0=class extends w.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,n){return n.location!==a.location||n.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:n.error,location:n.location,revalidation:a.revalidation||n.revalidation}}componentDidCatch(a,n){this.props.unstable_onError?this.props.unstable_onError(a,n):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?w.createElement(Ct.Provider,{value:this.props.routeContext},w.createElement(rc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function A0({routeContext:a,match:n,children:i}){let o=w.useContext(Wn);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Ct.Provider,{value:a},i)}function O0(a,n=[],i=null,o=null,c=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let u=a,h=i?.errors;if(h!=null){let g=u.findIndex(x=>x.route.id&&h?.[x.route.id]!==void 0);Oe(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(i)for(let g=0;g<u.length;g++){let x=u[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=g),x.route.id){let{loaderData:v,errors:j}=i,N=x.route.loader&&!v.hasOwnProperty(x.route.id)&&(!j||j[x.route.id]===void 0);if(x.route.lazy||N){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,x,v)=>{let j,N=!1,b=null,E=null;i&&(j=h&&x.route.id?h[x.route.id]:void 0,b=x.route.errorElement||R0,m&&(p<0&&v===0?(hf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,E=null):p===v&&(N=!0,E=x.route.hydrateFallbackElement||null)));let S=n.concat(u.slice(0,v+1)),T=()=>{let D;return j?D=b:N?D=E:x.route.Component?D=w.createElement(x.route.Component,null):x.route.element?D=x.route.element:D=g,w.createElement(A0,{match:x,routeContext:{outlet:g,matches:S,isDataRoute:i!=null},children:D})};return i&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?w.createElement(I0,{location:i.location,revalidation:i.revalidation,component:b,error:j,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:o}):T()},null)}function nc(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D0(a){let n=w.useContext(Wn);return Oe(n,nc(a)),n}function M0(a){let n=w.useContext(xa);return Oe(n,nc(a)),n}function L0(a){let n=w.useContext(Ct);return Oe(n,nc(a)),n}function sc(a){let n=L0(a),i=n.matches[n.matches.length-1];return Oe(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function $0(){return sc("useRouteId")}function U0(){let a=w.useContext(rc),n=M0("useRouteError"),i=sc("useRouteError");return a!==void 0?a:n.errors?.[i]}function z0(){let{router:a}=D0("useNavigate"),n=sc("useNavigate"),i=w.useRef(!1);return cf(()=>{i.current=!0}),w.useCallback(async(c,u={})=>{St(i.current,lf),i.current&&(typeof c=="number"?a.navigate(c):await a.navigate(c,{fromRouteId:n,...u}))},[a,n])}var bh={};function hf(a,n,i){!n&&!bh[a]&&(bh[a]=!0,St(!1,i))}w.memo(F0);function F0({routes:a,future:n,state:i,unstable_onError:o}){return df(a,void 0,i,o,n)}function ir({to:a,replace:n,state:i,relative:o}){Oe(Vn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=w.useContext(zt);St(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(Ct),{pathname:h}=ur(),m=ya(),p=tc(a,ec(u),h,o==="path"),g=JSON.stringify(p);return w.useEffect(()=>{m(JSON.parse(g),{replace:n,state:i,relative:o})},[m,g,o,n,i]),null}function ic(a){return E0(a.context)}function Ae(a){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function B0({basename:a="/",children:n=null,location:i,navigationType:o="POP",navigator:c,static:u=!1}){Oe(!Vn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=a.replace(/^\/*/,"/"),m=w.useMemo(()=>({basename:h,navigator:c,static:u,future:{}}),[h,c,u]);typeof i=="string"&&(i=en(i));let{pathname:p="/",search:g="",hash:x="",state:v=null,key:j="default"}=i,N=w.useMemo(()=>{let b=cr(p,h);return b==null?null:{location:{pathname:b,search:g,hash:x,state:v,key:j},navigationType:o}},[h,p,g,x,v,j,o]);return St(N!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:w.createElement(zt.Provider,{value:m},w.createElement(Hs.Provider,{children:n,value:N}))}function H0({children:a,location:n}){return P0($l(a),n)}function $l(a,n=[]){let i=[];return w.Children.forEach(a,(o,c)=>{if(!w.isValidElement(o))return;let u=[...n,c];if(o.type===w.Fragment){i.push.apply(i,$l(o.props.children,u));return}Oe(o.type===Ae,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=$l(o.props.children,u)),i.push(h)}),i}var da="get",ha="application/x-www-form-urlencoded";function va(a){return a!=null&&typeof a.tagName=="string"}function W0(a){return va(a)&&a.tagName.toLowerCase()==="button"}function V0(a){return va(a)&&a.tagName.toLowerCase()==="form"}function q0(a){return va(a)&&a.tagName.toLowerCase()==="input"}function K0(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function J0(a,n){return a.button===0&&(!n||n==="_self")&&!K0(a)}var ra=null;function G0(){if(ra===null)try{new FormData(document.createElement("form"),0),ra=!1}catch{ra=!0}return ra}var Q0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kl(a){return a!=null&&!Q0.has(a)?(St(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ha}"`),null):a}function Y0(a,n){let i,o,c,u,h;if(V0(a)){let m=a.getAttribute("action");o=m?cr(m,n):null,i=a.getAttribute("method")||da,c=kl(a.getAttribute("enctype"))||ha,u=new FormData(a)}else if(W0(a)||q0(a)&&(a.type==="submit"||a.type==="image")){let m=a.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=a.getAttribute("formaction")||m.getAttribute("action");if(o=p?cr(p,n):null,i=a.getAttribute("formmethod")||m.getAttribute("method")||da,c=kl(a.getAttribute("formenctype"))||kl(m.getAttribute("enctype"))||ha,u=new FormData(m,a),!G0()){let{name:g,type:x,value:v}=a;if(x==="image"){let j=g?`${g}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else g&&u.append(g,v)}}else{if(va(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=da,o=null,c=ha,h=a}return u&&c==="text/plain"&&(h=u,u=void 0),{action:o,method:i.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ac(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function X0(a,n,i){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return o.pathname==="/"?o.pathname=`_root.${i}`:n&&cr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function Z0(a,n){if(a.id in n)return n[a.id];try{let i=await import(a.module);return n[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eg(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function tg(a,n,i){let o=await Promise.all(a.map(async c=>{let u=n.routes[c.route.id];if(u){let h=await Z0(u,i);return h.links?h.links():[]}return[]}));return ig(o.flat(1).filter(eg).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function jh(a,n,i,o,c,u){let h=(p,g)=>i[g]?p.route.id!==i[g].route.id:!0,m=(p,g)=>i[g].pathname!==p.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==p.params["*"];return u==="assets"?n.filter((p,g)=>h(p,g)||m(p,g)):u==="data"?n.filter((p,g)=>{let x=o.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function rg(a,n,{includeHydrateFallback:i}={}){return ng(a.map(o=>{let c=n.routes[o.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function ng(a){return[...new Set(a)]}function sg(a){let n={},i=Object.keys(a).sort();for(let o of i)n[o]=a[o];return n}function ig(a,n){let i=new Set;return new Set(n),a.reduce((o,c)=>{let u=JSON.stringify(sg(c));return i.has(u)||(i.add(u),o.push({key:u,link:c})),o},[])}function ff(){let a=w.useContext(Wn);return ac(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function ag(){let a=w.useContext(xa);return ac(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var oc=w.createContext(void 0);oc.displayName="FrameworkContext";function mf(){let a=w.useContext(oc);return ac(a,"You must render this element inside a <HydratedRouter> element"),a}function og(a,n){let i=w.useContext(oc),[o,c]=w.useState(!1),[u,h]=w.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:x,onTouchStart:v}=n,j=w.useRef(null);w.useEffect(()=>{if(a==="render"&&h(!0),a==="viewport"){let E=T=>{T.forEach(D=>{h(D.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return j.current&&S.observe(j.current),()=>{S.disconnect()}}},[a]),w.useEffect(()=>{if(o){let E=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(E)}}},[o]);let N=()=>{c(!0)},b=()=>{c(!1),h(!1)};return i?a!=="intent"?[u,j,{}]:[u,j,{onFocus:As(m,N),onBlur:As(p,b),onMouseEnter:As(g,N),onMouseLeave:As(x,b),onTouchStart:As(v,N)}]:[!1,j,{}]}function As(a,n){return i=>{a&&a(i),i.defaultPrevented||n(i)}}function lg({page:a,...n}){let{router:i}=ff(),o=w.useMemo(()=>rf(i.routes,a,i.basename),[i.routes,a,i.basename]);return o?w.createElement(ug,{page:a,matches:o,...n}):null}function cg(a){let{manifest:n,routeModules:i}=mf(),[o,c]=w.useState([]);return w.useEffect(()=>{let u=!1;return tg(a,n,i).then(h=>{u||c(h)}),()=>{u=!0}},[a,n,i]),o}function ug({page:a,matches:n,...i}){let o=ur(),{manifest:c,routeModules:u}=mf(),{basename:h}=ff(),{loaderData:m,matches:p}=ag(),g=w.useMemo(()=>jh(a,n,p,c,o,"data"),[a,n,p,c,o]),x=w.useMemo(()=>jh(a,n,p,c,o,"assets"),[a,n,p,c,o]),v=w.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let b=new Set,E=!1;if(n.forEach(T=>{let D=c.routes[T.route.id];!D||!D.hasLoader||(!g.some(A=>A.route.id===T.route.id)&&T.route.id in m&&u[T.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:b.add(T.route.id))}),b.size===0)return[];let S=X0(a,h,"data");return E&&b.size>0&&S.searchParams.set("_routes",n.filter(T=>b.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[h,m,o,c,g,n,a,u]),j=w.useMemo(()=>rg(x,c),[x,c]),N=cg(x);return w.createElement(w.Fragment,null,v.map(b=>w.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...i})),j.map(b=>w.createElement("link",{key:b,rel:"modulepreload",href:b,...i})),N.map(({key:b,link:E})=>w.createElement("link",{key:b,nonce:i.nonce,...E})))}function dg(...a){return n=>{a.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var pf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pf&&(window.__reactRouterVersion="7.9.1")}catch{}function hg({basename:a,children:n,window:i}){let o=w.useRef();o.current==null&&(o.current=Xp({window:i,v5Compat:!0}));let c=o.current,[u,h]=w.useState({action:c.action,location:c.location}),m=w.useCallback(p=>{w.startTransition(()=>h(p))},[h]);return w.useLayoutEffect(()=>c.listen(m),[c,m]),w.createElement(B0,{basename:a,children:n,location:u.location,navigationType:u.action,navigator:c})}var gf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=w.forwardRef(function({onClick:n,discover:i="render",prefetch:o="none",relative:c,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:x,viewTransition:v,...j},N){let{basename:b}=w.useContext(zt),E=typeof g=="string"&&gf.test(g),S,T=!1;if(typeof g=="string"&&E&&(S=g,pf))try{let F=new URL(window.location.href),B=g.startsWith("//")?new URL(F.protocol+g):new URL(g),J=cr(B.pathname,b);B.origin===F.origin&&J!=null?g=J+B.search+B.hash:T=!0}catch{St(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=_0(g,{relative:c}),[A,O,q]=og(o,j),Z=gg(g,{replace:h,state:m,target:p,preventScrollReset:x,relative:c,viewTransition:v});function ee(F){n&&n(F),F.defaultPrevented||Z(F)}let $=w.createElement("a",{...j,...q,href:S||D,onClick:T||u?n:ee,ref:dg(N,O),target:p,"data-discover":!E&&i==="render"?"true":void 0});return A&&!E?w.createElement(w.Fragment,null,$,w.createElement(lg,{page:D})):$});et.displayName="Link";var fg=w.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:o="",end:c=!1,style:u,to:h,viewTransition:m,children:p,...g},x){let v=Ws(h,{relative:g.relative}),j=ur(),N=w.useContext(xa),{navigator:b,basename:E}=w.useContext(zt),S=N!=null&&bg(v)&&m===!0,T=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,D=j.pathname,A=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;i||(D=D.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&E&&(A=cr(A,E)||A);const O=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let q=D===T||!c&&D.startsWith(T)&&D.charAt(O)==="/",Z=A!=null&&(A===T||!c&&A.startsWith(T)&&A.charAt(T.length)==="/"),ee={isActive:q,isPending:Z,isTransitioning:S},$=q?n:void 0,F;typeof o=="function"?F=o(ee):F=[o,q?"active":null,Z?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof u=="function"?u(ee):u;return w.createElement(et,{...g,"aria-current":$,className:F,ref:x,style:B,to:h,viewTransition:m},typeof p=="function"?p(ee):p)});fg.displayName="NavLink";var mg=w.forwardRef(({discover:a="render",fetcherKey:n,navigate:i,reloadDocument:o,replace:c,state:u,method:h=da,action:m,onSubmit:p,relative:g,preventScrollReset:x,viewTransition:v,...j},N)=>{let b=vg(),E=wg(m,{relative:g}),S=h.toLowerCase()==="get"?"get":"post",T=typeof m=="string"&&gf.test(m),D=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let O=A.nativeEvent.submitter,q=O?.getAttribute("formmethod")||h;b(O||A.currentTarget,{fetcherKey:n,method:q,navigate:i,replace:c,state:u,relative:g,preventScrollReset:x,viewTransition:v})};return w.createElement("form",{ref:N,method:S,action:E,onSubmit:o?p:D,...j,"data-discover":!T&&a==="render"?"true":void 0})});mg.displayName="Form";function pg(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xf(a){let n=w.useContext(Wn);return Oe(n,pg(a)),n}function gg(a,{target:n,replace:i,state:o,preventScrollReset:c,relative:u,viewTransition:h}={}){let m=ya(),p=ur(),g=Ws(a,{relative:u});return w.useCallback(x=>{if(J0(x,n)){x.preventDefault();let v=i!==void 0?i:Us(p)===Us(g);m(a,{replace:v,state:o,preventScrollReset:c,relative:u,viewTransition:h})}},[p,m,g,i,o,n,a,c,u,h])}var xg=0,yg=()=>`__${String(++xg)}__`;function vg(){let{router:a}=xf("useSubmit"),{basename:n}=w.useContext(zt),i=$0();return w.useCallback(async(o,c={})=>{let{action:u,method:h,encType:m,formData:p,body:g}=Y0(o,n);if(c.navigate===!1){let x=c.fetcherKey||yg();await a.fetch(x,i,c.action||u,{preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await a.navigate(c.action||u,{preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,n,i])}function wg(a,{relative:n}={}){let{basename:i}=w.useContext(zt),o=w.useContext(Ct);Oe(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),u={...Ws(a||".",{relative:n})},h=ur();if(a==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(x=>x==="")){m.delete("index"),p.filter(v=>v).forEach(v=>m.append("index",v));let x=m.toString();u.search=x?`?${x}`:""}}return(!a||a===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:lr([i,u.pathname])),Us(u)}function bg(a,{relative:n}={}){let i=w.useContext(of);Oe(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=xf("useViewTransitionState"),c=Ws(a,{relative:n});if(!i.isTransitioning)return!1;let u=cr(i.currentLocation.pathname,o)||i.currentLocation.pathname,h=cr(i.nextLocation.pathname,o)||i.nextLocation.pathname;return fa(c.pathname,h)!=null||fa(c.pathname,u)!=null}const jg="modulepreload",Ng=function(a){return"/"+a},Nh={},Vs=function(n,i,o){let c=Promise.resolve();if(i&&i.length>0){let g=function(x){return Promise.all(x.map(v=>Promise.resolve(v).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");c=g(i.map(x=>{if(x=Ng(x),x in Nh)return;Nh[x]=!0;const v=x.endsWith(".css"),j=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${j}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":jg,v||(N.as="script"),N.crossOrigin="",N.href=x,p&&N.setAttribute("nonce",p),document.head.appendChild(N),v)return new Promise((b,E)=>{N.addEventListener("load",b),N.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return c.then(m=>{for(const p of m||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})},kg=a=>{let n;return a?n=a:typeof fetch>"u"?n=(...i)=>Vs(async()=>{const{default:o}=await Promise.resolve().then(()=>qn);return{default:o}},[]).then(({default:o})=>o(...i)):n=fetch,(...i)=>n(...i)};class lc extends Error{constructor(n,i="FunctionsError",o){super(n),this.name=i,this.context=o}}class _g extends lc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class kh extends lc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class _h extends lc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Ul;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Ul||(Ul={}));var Sg=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};class Cg{constructor(n,{headers:i={},customFetch:o,region:c=Ul.Any}={}){this.url=n,this.headers=i,this.region=c,this.fetch=kg(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,i={}){var o;return Sg(this,void 0,void 0,function*(){try{const{headers:c,method:u,body:h}=i;let m={},{region:p}=i;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let x;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(m["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(m["Content-Type"]="application/json",x=JSON.stringify(h)));const v=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),c),body:x}).catch(E=>{throw new _g(E)}),j=v.headers.get("x-relay-error");if(j&&j==="true")throw new kh(v);if(!v.ok)throw new _h(v);let N=((o=v.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),b;return N==="application/json"?b=yield v.json():N==="application/octet-stream"?b=yield v.blob():N==="text/event-stream"?b=v:N==="multipart/form-data"?b=yield v.formData():b=yield v.text(),{data:b,error:null,response:v}}catch(c){return{data:null,error:c,response:c instanceof _h||c instanceof kh?c.context:void 0}}})}}var Qe={},Pn={},Tn={},Rn={},In={},An={},Eg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fn=Eg();const Pg=Fn.fetch,yf=Fn.fetch.bind(Fn),vf=Fn.Headers,Tg=Fn.Request,Rg=Fn.Response,qn=Object.freeze(Object.defineProperty({__proto__:null,Headers:vf,Request:Tg,Response:Rg,default:yf,fetch:Pg},Symbol.toStringTag,{value:"Module"})),Ig=Bp(qn);var na={},Sh;function wf(){if(Sh)return na;Sh=1,Object.defineProperty(na,"__esModule",{value:!0});class a extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return na.default=a,na}var Ch;function bf(){if(Ch)return An;Ch=1;var a=An&&An.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(An,"__esModule",{value:!0});const n=a(Ig),i=a(wf());class o{constructor(u){var h,m;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(m=u.isMaybeSingle)!==null&&m!==void 0?m:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let p=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var x,v,j,N;let b=null,E=null,S=null,T=g.status,D=g.statusText;if(g.ok){if(this.method!=="HEAD"){const Z=await g.text();Z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?E=Z:E=JSON.parse(Z))}const O=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),q=(j=g.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");O&&q&&q.length>1&&(S=parseInt(q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(b={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,S=null,T=406,D="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const O=await g.text();try{b=JSON.parse(O),Array.isArray(b)&&g.status===404&&(E=[],b=null,T=200,D="OK")}catch{g.status===404&&O===""?(T=204,D="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((N=b?.details)===null||N===void 0)&&N.includes("0 rows"))&&(b=null,T=200,D="OK"),b&&this.shouldThrowOnError)throw new i.default(b)}return{error:b,data:E,count:S,status:T,statusText:D}});return this.shouldThrowOnError||(p=p.catch(g=>{var x,v,j;return{error:{message:`${(x=g?.name)!==null&&x!==void 0?x:"FetchError"}: ${g?.message}`,details:`${(v=g?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(j=g?.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),p.then(u,h)}returns(){return this}overrideTypes(){return this}}return An.default=o,An}var Eh;function jf(){if(Eh)return In;Eh=1;var a=In&&In.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(In,"__esModule",{value:!0});const n=a(bf());class i extends n.default{select(c){let u=!1;const h=(c??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:h,foreignTable:m,referencedTable:p=m}={}){const g=p?`${p}.order`:"order",x=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${x?`${x},`:""}${c}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${c}`),this}range(c,u,{foreignTable:h,referencedTable:m=h}={}){const p=typeof m>"u"?"offset":`${m}.offset`,g=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${c}`),this.url.searchParams.set(g,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:h=!1,buffers:m=!1,wal:p=!1,format:g="text"}={}){var x;const v=[c?"analyze":null,u?"verbose":null,h?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),j=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${j}"; options=${v};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return In.default=i,In}var Ph;function cc(){if(Ph)return Rn;Ph=1;var a=Rn&&Rn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Rn,"__esModule",{value:!0});const n=a(jf());class i extends n.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const h=Array.from(new Set(u)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:h,type:m}={}){let p="";m==="plain"?p="pl":m==="phrase"?p="ph":m==="websearch"&&(p="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${p}fts${g}.${u}`),this}match(c){return Object.entries(c).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(c,u,h){return this.url.searchParams.append(c,`not.${u}.${h}`),this}or(c,{foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.or`:"or";return this.url.searchParams.append(m,`(${c})`),this}filter(c,u,h){return this.url.searchParams.append(c,`${u}.${h}`),this}}return Rn.default=i,Rn}var Th;function Nf(){if(Th)return Tn;Th=1;var a=Tn&&Tn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Tn,"__esModule",{value:!0});const n=a(cc());class i{constructor(c,{headers:u={},schema:h,fetch:m}){this.url=c,this.headers=new Headers(u),this.schema=h,this.fetch=m}select(c,{head:u=!1,count:h}={}){const m=u?"HEAD":"GET";let p=!1;const g=(c??"*").split("").map(x=>/\s/.test(x)&&!p?"":(x==='"'&&(p=!p),x)).join("");return this.url.searchParams.set("select",g),h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:h=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const g=c.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(g.length>0){const x=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:h=!1,count:m,defaultToNull:p=!0}={}){var g;const x="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const v=c.reduce((j,N)=>j.concat(Object.keys(N)),[]);if(v.length>0){const j=[...new Set(v)].map(N=>`"${N}"`);this.url.searchParams.set("columns",j.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(c,{count:u}={}){var h;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:c}={}){var u;const h="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Tn.default=i,Tn}var Rh;function Ag(){if(Rh)return Pn;Rh=1;var a=Pn&&Pn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Pn,"__esModule",{value:!0});const n=a(Nf()),i=a(cc());class o{constructor(u,{headers:h={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(h),this.schemaName=m,this.fetch=p}from(u){const h=new URL(`${this.url}/${u}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:m=!1,get:p=!1,count:g}={}){var x;let v;const j=new URL(`${this.url}/rpc/${u}`);let N;m||p?(v=m?"HEAD":"GET",Object.entries(h).filter(([E,S])=>S!==void 0).map(([E,S])=>[E,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([E,S])=>{j.searchParams.append(E,S)})):(v="POST",N=h);const b=new Headers(this.headers);return g&&b.set("Prefer",`count=${g}`),new i.default({method:v,url:j,headers:b,schema:this.schemaName,body:N,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Pn.default=o,Pn}var Ih;function Og(){if(Ih)return Qe;Ih=1;var a=Qe&&Qe.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.PostgrestError=Qe.PostgrestBuilder=Qe.PostgrestTransformBuilder=Qe.PostgrestFilterBuilder=Qe.PostgrestQueryBuilder=Qe.PostgrestClient=void 0;const n=a(Ag());Qe.PostgrestClient=n.default;const i=a(Nf());Qe.PostgrestQueryBuilder=i.default;const o=a(cc());Qe.PostgrestFilterBuilder=o.default;const c=a(jf());Qe.PostgrestTransformBuilder=c.default;const u=a(bf());Qe.PostgrestBuilder=u.default;const h=a(wf());return Qe.PostgrestError=h.default,Qe.default={PostgrestClient:n.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:h.default},Qe}var Dg=Og();const Mg=tf(Dg),{PostgrestClient:Lg,PostgrestQueryBuilder:Cv,PostgrestFilterBuilder:Ev,PostgrestTransformBuilder:Pv,PostgrestBuilder:Tv,PostgrestError:Rv}=Mg;class $g{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let i=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(i+=`

Suggested solution: ${n.workaround}`),new Error(i)}static createWebSocket(n,i){const o=this.getWebSocketConstructor();return new o(n,i)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Ug="2.15.5",zg=`realtime-js/${Ug}`,Fg="1.0.0",zl=1e4,Bg=1e3,Hg=100;var Ms;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Ms||(Ms={}));var We;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(We||(We={}));var Mt;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(Mt||(Mt={}));var Fl;(function(a){a.websocket="websocket"})(Fl||(Fl={}));var Qr;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Qr||(Qr={}));class Wg{constructor(){this.HEADER_LENGTH=1}decode(n,i){return n.constructor===ArrayBuffer?i(this._binaryDecode(n)):i(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const i=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,i,o)}_decodeBroadcast(n,i,o){const c=i.getUint8(1),u=i.getUint8(2);let h=this.HEADER_LENGTH+2;const m=o.decode(n.slice(h,h+c));h=h+c;const p=o.decode(n.slice(h,h+u));h=h+u;const g=JSON.parse(o.decode(n.slice(h,n.byteLength)));return{ref:null,topic:m,event:p,payload:g}}}class kf{constructor(n,i){this.callback=n,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Pe||(Pe={}));const Ah=(a,n,i={})=>{var o;const c=(o=i.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((u,h)=>(u[h]=Vg(h,a,n,c),u),{})},Vg=(a,n,i,o)=>{const c=n.find(m=>m.name===a),u=c?.type,h=i[a];return u&&!o.includes(u)?_f(u,h):Bl(h)},_f=(a,n)=>{if(a.charAt(0)==="_"){const i=a.slice(1,a.length);return Gg(n,i)}switch(a){case Pe.bool:return qg(n);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Kg(n);case Pe.json:case Pe.jsonb:return Jg(n);case Pe.timestamp:return Qg(n);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Bl(n);default:return Bl(n)}},Bl=a=>a,qg=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Kg=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},Jg=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(n){return console.log(`JSON parse error: ${n}`),a}return a},Gg=(a,n)=>{if(typeof a!="string")return a;const i=a.length-1,o=a[i];if(a[0]==="{"&&o==="}"){let u;const h=a.slice(1,i);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(m=>_f(n,m))}return a},Qg=a=>typeof a=="string"?a.replace(" ","T"):a,Sf=a=>{let n=a;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class _l{constructor(n,i,o={},c=zl){this.channel=n,this.event=i,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,i){var o;return this._hasReceived(n)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:i}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(i))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Oh;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Oh||(Oh={}));class Ls{constructor(n,i){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ls.syncState(this.state,c,u,h),this.pendingDiffs.forEach(p=>{this.state=Ls.syncDiff(this.state,p,u,h)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},c=>{const{onJoin:u,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Ls.syncDiff(this.state,c,u,h),m())}),this.onJoin((c,u,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:h})}),this.onLeave((c,u,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,i,o,c){const u=this.cloneDeep(n),h=this.transformState(i),m={},p={};return this.map(u,(g,x)=>{h[g]||(p[g]=x)}),this.map(h,(g,x)=>{const v=u[g];if(v){const j=x.map(S=>S.presence_ref),N=v.map(S=>S.presence_ref),b=x.filter(S=>N.indexOf(S.presence_ref)<0),E=v.filter(S=>j.indexOf(S.presence_ref)<0);b.length>0&&(m[g]=b),E.length>0&&(p[g]=E)}else m[g]=x}),this.syncDiff(u,{joins:m,leaves:p},o,c)}static syncDiff(n,i,o,c){const{joins:u,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(u,(m,p)=>{var g;const x=(g=n[m])!==null&&g!==void 0?g:[];if(n[m]=this.cloneDeep(p),x.length>0){const v=n[m].map(N=>N.presence_ref),j=x.filter(N=>v.indexOf(N.presence_ref)<0);n[m].unshift(...j)}o(m,x,p)}),this.map(h,(m,p)=>{let g=n[m];if(!g)return;const x=p.map(v=>v.presence_ref);g=g.filter(v=>x.indexOf(v.presence_ref)<0),n[m]=g,c(m,g,p),g.length===0&&delete n[m]}),n}static map(n,i){return Object.getOwnPropertyNames(n).map(o=>i(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((i,o)=>{const c=n[o];return"metas"in c?i[o]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):i[o]=c,i},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dh;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Dh||(Dh={}));var $s;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})($s||($s={}));var ar;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(ar||(ar={}));class uc{constructor(n,i={config:{}},o){this.topic=n,this.params=i,this.socket=o,this.bindings={},this.state=We.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new _l(this,Mt.join,this.params,this.timeout),this.rejoinTimer=new kf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=We.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=We.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=We.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mt.reply,{},(c,u)=>{this._trigger(this._replyEventName(u),c)}),this.presence=new Ls(this),this.broadcastEndpointURL=Sf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,i=this.timeout){var o,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==We.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,g=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(N=>N.filter))!==null&&c!==void 0?c:[],x=!!this.bindings[$s.PRESENCE]&&this.bindings[$s.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},j={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:x}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(N=>n?.(ar.CHANNEL_ERROR,N)),this._onClose(()=>n?.(ar.CLOSED)),this.updateJoinPayload(Object.assign({config:j},v)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:N})=>{var b;if(this.socket.setAuth(),N===void 0){n?.(ar.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,S=(b=E?.length)!==null&&b!==void 0?b:0,T=[];for(let D=0;D<S;D++){const A=E[D],{filter:{event:O,schema:q,table:Z,filter:ee}}=A,$=N&&N[D];if($&&$.event===O&&$.schema===q&&$.table===Z&&$.filter===ee)T.push(Object.assign(Object.assign({},A),{id:$.id}));else{this.unsubscribe(),this.state=We.errored,n?.(ar.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,n&&n(ar.SUBSCRIBED);return}}).receive("error",N=>{this.state=We.errored,n?.(ar.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{n?.(ar.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,i={}){return await this.send({type:"presence",event:"track",payload:n},i.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,i,o){return this.state===We.joined&&n===$s.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,i,o)}async send(n,i={}){var o,c;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:h}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,m,p;const g=this._push(n.type,n,i.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),g.receive("ok",()=>u("ok")),g.receive("error",()=>u("error")),g.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=We.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new _l(this,Mt.leave,{},n),o.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=We.closed,this.bindings={}}async _fetchWithTimeout(n,i,o){const c=new AbortController,u=setTimeout(()=>c.abort(),o),h=await this.socket.fetch(n,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(u),h}_push(n,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new _l(this,n,i,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Hg){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(n,i,o){return i}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,i,o){var c,u;const h=n.toLocaleLowerCase(),{close:m,error:p,leave:g,join:x}=Mt;if(o&&[m,p,g,x].indexOf(h)>=0&&o!==this._joinRef())return;let j=this._onMessage(h,i,o);if(i&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(N=>{var b,E,S;return((b=N.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(E=N.filter)===null||E===void 0?void 0:E.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===h}).map(N=>N.callback(j,o)):(u=this.bindings[h])===null||u===void 0||u.filter(N=>{var b,E,S,T,D,A;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in N){const O=N.id,q=(b=N.filter)===null||b===void 0?void 0:b.event;return O&&((E=i.ids)===null||E===void 0?void 0:E.includes(O))&&(q==="*"||q?.toLocaleLowerCase()===((S=i.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(D=(T=N?.filter)===null||T===void 0?void 0:T.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return O==="*"||O===((A=i?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===h}).map(N=>{if(typeof j=="object"&&"ids"in j){const b=j.data,{schema:E,table:S,commit_timestamp:T,type:D,errors:A}=b;j=Object.assign(Object.assign({},{schema:E,table:S,commit_timestamp:T,eventType:D,new:{},old:{},errors:A}),this._getPayloadRecords(b))}N.callback(j,o)})}_isClosed(){return this.state===We.closed}_isJoined(){return this.state===We.joined}_isJoining(){return this.state===We.joining}_isLeaving(){return this.state===We.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,i,o){const c=n.toLocaleLowerCase(),u={type:c,filter:i,callback:o};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(n,i){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&uc.isEqual(c.filter,i))})),this}static isEqual(n,i){if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const o in n)if(n[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Mt.close,{},n)}_onError(n){this._on(Mt.error,{},i=>n(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=We.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const i={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(i.new=Ah(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(i.old=Ah(n.columns,n.old_record)),i}}const Sl=()=>{},sa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yg=[1e3,2e3,5e3,1e4],Xg=1e4,Zg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ex{constructor(n,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zl,this.transport=null,this.heartbeatIntervalMs=sa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sl,this.ref=0,this.reconnectTimer=null,this.logger=Sl,this.conn=null,this.sendBuffer=[],this.serializer=new Wg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...h)=>Vs(async()=>{const{default:m}=await Promise.resolve().then(()=>qn);return{default:m}},void 0).then(({default:m})=>m(...h)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((o=i?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${n}/${Fl.websocket}`,this.httpEndpoint=Sf(n),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$g.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const i=n.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fg}))}disconnect(n,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const i=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const n=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,i,o){this.logger(n,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return Qr.Connecting;case Ms.open:return Qr.Open;case Ms.closing:return Qr.Closing;default:return Qr.Closed}}isConnected(){return this.connectionState()===Qr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,i={config:{}}){const o=`realtime:${n}`,c=this.getChannels().find(u=>u.topic===o);if(c)return c;{const u=new uc(`realtime:${n}`,i,this);return this.channels.push(u),u}}push(n){const{topic:i,event:o,payload:c,ref:u}=n,h=()=>{this.encode(n,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${i} ${o} (${u})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Bg,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},sa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let i=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${n}"`),i.unsubscribe())}_remove(n){this.channels=this.channels.filter(i=>i.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:u,ref:h}=i,m=h?`(${h})`:"",p=u.status||"";this.log("receive",`${p} ${o} ${c} ${m}`.trim(),u),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(c,u,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(n){var i;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var i;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Mt.error))}_appendParams(n,i){if(Object.keys(i).length===0)return n;const o=n.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${n}${o}${c}`}_workerObjectUrl(n){let i;if(n)i=n;else{const o=new Blob([Zg],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(n,i=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(n=null){let i;n?i=n:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const c={access_token:i,version:zg};i&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(Mt.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${n}`,i)})}_triggerStateCallbacks(n,i){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(i)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new kf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var i,o,c,u,h,m,p,g,x;if(this.transport=(i=n?.transport)!==null&&i!==void 0?i:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:zl,this.heartbeatIntervalMs=(c=n?.heartbeatIntervalMs)!==null&&c!==void 0?c:sa.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:Sl,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(v=>Yg[v-1]||Xg),this.encode=(g=n?.encode)!==null&&g!==void 0?g:((v,j)=>j(JSON.stringify(v))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class dc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ve(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class tx extends dc{constructor(n,i,o){super(n),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hl extends dc{constructor(n,i){super(n),this.name="StorageUnknownError",this.originalError=i}}var rx=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};const Cf=a=>{let n;return a?n=a:typeof fetch>"u"?n=(...i)=>Vs(async()=>{const{default:o}=await Promise.resolve().then(()=>qn);return{default:o}},void 0).then(({default:o})=>o(...i)):n=fetch,(...i)=>n(...i)},nx=()=>rx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vs(()=>Promise.resolve().then(()=>qn),void 0)).Response:Response}),Wl=a=>{if(Array.isArray(a))return a.map(i=>Wl(i));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([i,o])=>{const c=i.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[c]=Wl(o)}),n},sx=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)};var tn=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};const Cl=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),ix=(a,n,i)=>tn(void 0,void 0,void 0,function*(){const o=yield nx();a instanceof o&&!i?.noResolveJson?a.json().then(c=>{const u=a.status||500,h=c?.statusCode||u+"";n(new tx(Cl(c),u,h))}).catch(c=>{n(new Hl(Cl(c),c))}):n(new Hl(Cl(a),a))}),ax=(a,n,i,o)=>{const c={method:a,headers:n?.headers||{}};return a==="GET"||!o?c:(sx(o)?(c.headers=Object.assign({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(o)):c.body=o,n?.duplex&&(c.duplex=n.duplex),Object.assign(Object.assign({},c),i))};function qs(a,n,i,o,c,u){return tn(this,void 0,void 0,function*(){return new Promise((h,m)=>{a(i,ax(n,o,c,u)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>ix(p,m,o))})})}function ma(a,n,i,o){return tn(this,void 0,void 0,function*(){return qs(a,"GET",n,i,o)})}function Kt(a,n,i,o,c){return tn(this,void 0,void 0,function*(){return qs(a,"POST",n,o,c,i)})}function Vl(a,n,i,o,c){return tn(this,void 0,void 0,function*(){return qs(a,"PUT",n,o,c,i)})}function ox(a,n,i,o){return tn(this,void 0,void 0,function*(){return qs(a,"HEAD",n,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function Ef(a,n,i,o,c){return tn(this,void 0,void 0,function*(){return qs(a,"DELETE",n,o,c,i)})}var lt=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};const lx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cx{constructor(n,i={},o,c){this.shouldThrowOnError=!1,this.url=n,this.headers=i,this.bucketId=o,this.fetch=Cf(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,i,o,c){return lt(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Mh),c);let m=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.append("cacheControl",h.cacheControl),p&&u.append("metadata",this.encodeMetadata(p))):(u=o,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),c?.headers&&(m=Object.assign(Object.assign({},m),c.headers));const g=this._removeEmptyFolders(i),x=this._getFinalPath(g),v=yield(n=="PUT"?Vl:Kt)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}upload(n,i,o){return lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,i,o)})}uploadToSignedUrl(n,i,o,c){return lt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${h}`);m.searchParams.set("token",i);try{let p;const g=Object.assign({upsert:Mh.upsert},c),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",g.cacheControl)):(p=o,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType);const v=yield Vl(this.fetch,m.toString(),p,{headers:x});return{data:{path:u,fullPath:v.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ve(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,i){return lt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const c=Object.assign({},this.headers);i?.upsert&&(c["x-upsert"]="true");const u=yield Kt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:c}),h=new URL(this.url+u.url),m=h.searchParams.get("token");if(!m)throw new dc("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:m},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}update(n,i,o){return lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,i,o)})}move(n,i,o){return lt(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}copy(n,i,o){return lt(this,void 0,void 0,function*(){try{return{data:{path:(yield Kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:i,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}createSignedUrl(n,i,o){return lt(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n),u=yield Kt(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:i},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}createSignedUrls(n,i,o){return lt(this,void 0,void 0,function*(){try{const c=yield Kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:n},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:c.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}download(n,i){return lt(this,void 0,void 0,function*(){const c=typeof i?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(i?.transform||{}),h=u?`?${u}`:"";try{const m=this._getFinalPath(n);return{data:yield(yield ma(this.fetch,`${this.url}/${c}/${m}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Ve(m))return{data:null,error:m};throw m}})}info(n){return lt(this,void 0,void 0,function*(){const i=this._getFinalPath(n);try{const o=yield ma(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:Wl(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}exists(n){return lt(this,void 0,void 0,function*(){const i=this._getFinalPath(n);try{return yield ox(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o)&&o instanceof Hl){const c=o.originalError;if([400,404].includes(c?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,i){const o=this._getFinalPath(n),c=[],u=i?.download?`download=${i.download===!0?"":i.download}`:"";u!==""&&c.push(u);const m=typeof i?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(i?.transform||{});p!==""&&c.push(p);let g=c.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${g}`)}}}remove(n){return lt(this,void 0,void 0,function*(){try{return{data:yield Ef(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}list(n,i,o){return lt(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},lx),i),{prefix:n||""});return{data:yield Kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ve(c))return{data:null,error:c};throw c}})}listV2(n,i){return lt(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield Kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const i=[];return n.width&&i.push(`width=${n.width}`),n.height&&i.push(`height=${n.height}`),n.resize&&i.push(`resize=${n.resize}`),n.format&&i.push(`format=${n.format}`),n.quality&&i.push(`quality=${n.quality}`),i.join("&")}}const ux="2.12.1",dx={"X-Client-Info":`storage-js/${ux}`};var On=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};class hx{constructor(n,i={},o,c){this.shouldThrowOnError=!1;const u=new URL(n);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},dx),i),this.fetch=Cf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return On(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}getBucket(n){return On(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createBucket(n,i={public:!1}){return On(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}updateBucket(n,i){return On(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}emptyBucket(n){return On(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}deleteBucket(n){return On(this,void 0,void 0,function*(){try{return{data:yield Ef(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}}class fx extends hx{constructor(n,i={},o,c){super(n,i,o,c)}from(n){return new cx(this.url,this.headers,n,this.fetch)}}const mx="2.57.4";let Ds="";typeof Deno<"u"?Ds="deno":typeof document<"u"?Ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ds="react-native":Ds="node";const px={"X-Client-Info":`supabase-js-${Ds}/${mx}`},gx={headers:px},xx={schema:"public"},yx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vx={};var wx=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};const bx=a=>{let n;return a?n=a:typeof fetch>"u"?n=yf:n=fetch,(...i)=>n(...i)},jx=()=>typeof Headers>"u"?vf:Headers,Nx=(a,n,i)=>{const o=bx(i),c=jx();return(u,h)=>wx(void 0,void 0,void 0,function*(){var m;const p=(m=yield n())!==null&&m!==void 0?m:a;let g=new c(h?.headers);return g.has("apikey")||g.set("apikey",a),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),o(u,Object.assign(Object.assign({},h),{headers:g}))})};var kx=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};function _x(a){return a.endsWith("/")?a:a+"/"}function Sx(a,n){var i,o;const{db:c,auth:u,realtime:h,global:m}=a,{db:p,auth:g,realtime:x,global:v}=n,j={db:Object.assign(Object.assign({},p),c),auth:Object.assign(Object.assign({},g),u),realtime:Object.assign(Object.assign({},x),h),storage:{},global:Object.assign(Object.assign(Object.assign({},v),m),{headers:Object.assign(Object.assign({},(i=v?.headers)!==null&&i!==void 0?i:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>kx(this,void 0,void 0,function*(){return""})};return a.accessToken?j.accessToken=a.accessToken:delete j.accessToken,j}function Cx(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_x(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Pf="2.71.1",Un=30*1e3,ql=3,El=ql*Un,Ex="http://localhost:9999",Px="supabase.auth.token",Tx={"X-Client-Info":`gotrue-js/${Pf}`},Kl="X-Supabase-Api-Version",Tf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ix=600*1e3;class hc extends Error{constructor(n,i,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function xe(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class Ax extends hc{constructor(n,i,o){super(n,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function Ox(a){return xe(a)&&a.name==="AuthApiError"}class Rf extends hc{constructor(n,i){super(n),this.name="AuthUnknownError",this.originalError=i}}class Ar extends hc{constructor(n,i,o,c){super(n,o,c),this.name=i,this.status=o}}class Rr extends Ar{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dx(a){return xe(a)&&a.name==="AuthSessionMissingError"}class ia extends Ar{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class aa extends Ar{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class oa extends Ar{constructor(n,i=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mx(a){return xe(a)&&a.name==="AuthImplicitGrantRedirectError"}class Lh extends Ar{constructor(n,i=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jl extends Ar{constructor(n,i){super(n,"AuthRetryableFetchError",i,void 0)}}function Pl(a){return xe(a)&&a.name==="AuthRetryableFetchError"}class $h extends Ar{constructor(n,i,o){super(n,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class Gl extends Ar{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Uh=` 	
\r=`.split(""),Lx=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<Uh.length;n+=1)a[Uh[n].charCodeAt(0)]=-2;for(let n=0;n<pa.length;n+=1)a[pa[n].charCodeAt(0)]=n;return a})();function zh(a,n,i){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;i(pa[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;i(pa[o]),n.queuedBits-=6}}function If(a,n,i){const o=Lx[a];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)i(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Fh(a){const n=[],i=h=>{n.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=h=>{zx(h,o,i)};for(let h=0;h<a.length;h+=1)If(a.charCodeAt(h),c,u);return n.join("")}function $x(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function Ux(a,n){for(let i=0;i<a.length;i+=1){let o=a.charCodeAt(i);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(a.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}$x(o,n)}}function zx(a,n,i){if(n.utf8seq===0){if(a<=127){i(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&i(n.codepoint)}}function Fx(a){const n=[],i={queue:0,queuedBits:0},o=c=>{n.push(c)};for(let c=0;c<a.length;c+=1)If(a.charCodeAt(c),i,o);return new Uint8Array(n)}function Bx(a){const n=[];return Ux(a,i=>n.push(i)),new Uint8Array(n)}function Hx(a){const n=[],i={queue:0,queuedBits:0},o=c=>{n.push(c)};return a.forEach(c=>zh(c,i,o)),zh(null,i,o),n.join("")}function Wx(a){return Math.round(Date.now()/1e3)+a}function Vx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const n=Math.random()*16|0;return(a=="x"?n:n&3|8).toString(16)})}const Dt=()=>typeof window<"u"&&typeof document<"u",Kr={tested:!1,writable:!1},Af=()=>{if(!Dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kr.tested)return Kr.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Kr.tested=!0,Kr.writable=!0}catch{Kr.tested=!0,Kr.writable=!1}return Kr.writable};function qx(a){const n={},i=new URL(a);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,u)=>{n[u]=c})}catch{}return i.searchParams.forEach((o,c)=>{n[c]=o}),n}const Of=a=>{let n;return a?n=a:typeof fetch>"u"?n=(...i)=>Vs(async()=>{const{default:o}=await Promise.resolve().then(()=>qn);return{default:o}},void 0).then(({default:o})=>o(...i)):n=fetch,(...i)=>n(...i)},Kx=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",zn=async(a,n,i)=>{await a.setItem(n,JSON.stringify(i))},Jr=async(a,n)=>{const i=await a.getItem(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Tr=async(a,n)=>{await a.removeItem(n)};class wa{constructor(){this.promise=new wa.promiseConstructor((n,i)=>{this.resolve=n,this.reject=i})}}wa.promiseConstructor=Promise;function Tl(a){const n=a.split(".");if(n.length!==3)throw new Gl("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!Rx.test(n[o]))throw new Gl("JWT not in base64url format");return{header:JSON.parse(Fh(n[0])),payload:JSON.parse(Fh(n[1])),signature:Fx(n[2]),raw:{header:n[0],payload:n[1]}}}async function Jx(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function Gx(a,n){return new Promise((o,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await a(u);if(!n(u,null,h)){o(h);return}}catch(h){if(!n(u,h)){c(h);return}}})()})}function Qx(a){return("0"+a.toString(16)).substr(-2)}function Yx(){const n=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let c="";for(let u=0;u<56;u++)c+=i.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(n),Array.from(n,Qx).join("")}async function Xx(a){const i=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(o);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function Zx(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const i=await Xx(a);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dn(a,n,i=!1){const o=Yx();let c=o;i&&(c+="/PASSWORD_RECOVERY"),await zn(a,`${n}-code-verifier`,c);const u=await Zx(o);return[u,o===u?"plain":"s256"]}const ey=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ty(a){const n=a.headers.get(Kl);if(!n||!n.match(ey))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function ry(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function ny(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mn(a){if(!sy.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rl(){const a={};return new Proxy(a,{get:(n,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bh(a){return JSON.parse(JSON.stringify(a))}var iy=function(a,n){var i={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&n.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(a);c<o.length;c++)n.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(a,o[c])&&(i[o[c]]=a[o[c]]);return i};const Gr=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),ay=[502,503,504];async function Hh(a){var n;if(!Kx(a))throw new Jl(Gr(a),0);if(ay.includes(a.status))throw new Jl(Gr(a),a.status);let i;try{i=await a.json()}catch(u){throw new Rf(Gr(u),u)}let o;const c=ty(a);if(c&&c.getTime()>=Tf["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new $h(Gr(i),a.status,((n=i.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new Rr}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new $h(Gr(i),a.status,i.weak_password.reasons);throw new Ax(Gr(i),a.status||500,o)}const oy=(a,n,i,o)=>{const c={method:a,headers:n?.headers||{}};return a==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),i))};async function ve(a,n,i,o){var c;const u=Object.assign({},o?.headers);u[Kl]||(u[Kl]=Tf["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const h=(c=o?.query)!==null&&c!==void 0?c:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await ly(a,n,i+m,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function ly(a,n,i,o,c,u){const h=oy(n,o,c,u);let m;try{m=await a(i,Object.assign({},h))}catch(p){throw console.error(p),new Jl(Gr(p),0)}if(m.ok||await Hh(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await Hh(p)}}function sr(a){var n;let i=null;hy(a)&&(i=Object.assign({},a),a.expires_at||(i.expires_at=Wx(a.expires_in)));const o=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:i,user:o},error:null}}function Wh(a){const n=sr(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(n.data.weak_password=a.weak_password),n}function Ir(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function cy(a){return{data:a,error:null}}function uy(a){const{action_link:n,email_otp:i,hashed_token:o,redirect_to:c,verification_type:u}=a,h=iy(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:i,hashed_token:o,redirect_to:c,verification_type:u},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function dy(a){return a}function hy(a){return a.access_token&&a.refresh_token&&a.expires_in}const Il=["global","local","others"];var fy=function(a,n){var i={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&n.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(a);c<o.length;c++)n.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(a,o[c])&&(i[o[c]]=a[o[c]]);return i};class my{constructor({url:n="",headers:i={},fetch:o}){this.url=n,this.headers=i,this.fetch=Of(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,i=Il[0]){if(Il.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Il.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(xe(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,i={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Ir})}catch(o){if(xe(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:i}=n,o=fy(n,["options"]),c=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(c.new_email=o?.newEmail,delete c.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:uy,redirectTo:i?.redirectTo})}catch(i){if(xe(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(n){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ir})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async listUsers(n){var i,o,c,u,h,m,p;try{const g={nextPage:null,lastPage:0,total:0},x=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:dy});if(x.error)throw x.error;const v=await x.json(),j=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,N=(p=(m=x.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return N.length>0&&(N.forEach(b=>{const E=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);g[`${S}Page`]=E}),g.total=parseInt(j)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(xe(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){Mn(n);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ir})}catch(i){if(xe(i))return{data:{user:null},error:i};throw i}}async updateUserById(n,i){Mn(n);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:i,headers:this.headers,xform:Ir})}catch(o){if(xe(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,i=!1){Mn(n);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:i},xform:Ir})}catch(o){if(xe(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){Mn(n.userId);try{const{data:i,error:o}=await ve(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:o}}catch(i){if(xe(i))return{data:null,error:i};throw i}}async _deleteFactor(n){Mn(n.userId),Mn(n.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}}function Vh(a={}){return{getItem:n=>a[n]||null,setItem:(n,i)=>{a[n]=i},removeItem:n=>{delete a[n]}}}function py(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ln={debug:!!(globalThis&&Af()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Df extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class gy extends Df{}async function xy(a,n,i){Ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),Ln.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){Ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,c.name);try{return await i()}finally{Ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,c.name)}}else{if(n===0)throw Ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new gy(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Ln.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}py();const yy={url:Ex,storageKey:Px,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qh(a,n,i){return await i()}const $n={};class zs{constructor(n){var i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zs.nextInstanceID,zs.nextInstanceID+=1,this.instanceID>0&&Dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},yy),n);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new my({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Of(c.fetch),this.lock=c.lock||qh,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Dt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=xy:this.lock=qh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Af()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vh(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Vh(this.memoryStorage)),Dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,i;return(i=(n=$n[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(n){$n[this.storageKey]=Object.assign(Object.assign({},$n[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,i;return(i=(n=$n[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){$n[this.storageKey]=Object.assign(Object.assign({},$n[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pf}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const i=qx(window.location.href);let o="none";if(this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce"),Dt()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:u}=await this._getSessionFromURL(i,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Mx(u)){const p=(n=u.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return xe(i)?{error:i}:{error:new Rf("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var i,o,c;try{const u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=n?.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=n?.options)===null||c===void 0?void 0:c.captchaToken}},xform:sr}),{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(xe(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var i,o,c;try{let u;if("email"in n){const{email:x,password:v,options:j}=n;let N=null,b=null;this.flowType==="pkce"&&([N,b]=await Dn(this.storage,this.storageKey)),u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:x,password:v,data:(i=j?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:N,code_challenge_method:b},xform:sr})}else if("phone"in n){const{phone:x,password:v,options:j}=n;u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(o=j?.data)!==null&&o!==void 0?o:{},channel:(c=j?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:sr})}else throw new aa("You must provide either an email or phone number and a password");const{data:h,error:m}=u;if(m||!h)return{data:{user:null,session:null},error:m};const p=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(u){if(xe(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let i;if("email"in n){const{email:u,password:h,options:m}=n;i=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Wh})}else if("phone"in n){const{phone:u,password:h,options:m}=n;i=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Wh})}else throw new aa("You must provide either an email or phone number and a password");const{data:o,error:c}=i;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ia}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(n){var i,o,c,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(i=n.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:i}=n;if(i==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(n){var i,o,c,u,h,m,p,g,x,v,j,N;let b,E;if("message"in n)b=n.message,E=n.signature;else{const{chain:S,wallet:T,statement:D,options:A}=n;let O;if(Dt())if(typeof T=="object")O=T;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))O=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=T}const q=new URL((i=A?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in O&&O.signIn){const Z=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),D?{statement:D}:null));let ee;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")ee=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)ee=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)b=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),E=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${q.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(c=(o=A?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=A?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((m=A?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((p=A?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((g=A?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((v=(x=A?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||v===void 0)&&v.length?["Resources",...A.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const Z=await O.signMessage(new TextEncoder().encode(b),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=Z}}try{const{data:S,error:T}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Hx(E)},!((j=n.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(N=n.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:sr});if(T)throw T;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new ia}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:T})}catch(S){if(xe(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(n){const i=await Jr(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(i??"").split("/");try{const{data:u,error:h}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:sr});if(await Tr(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ia}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:h})}catch(u){if(xe(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:i,provider:o,token:c,access_token:u,nonce:h}=n,m=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:sr}),{data:p,error:g}=m;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new ia}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(n){var i,o,c,u,h;try{if("email"in n){const{email:m,options:p}=n;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await Dn(this.storage,this.storageKey));const{error:v}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(i=p?.data)!==null&&i!==void 0?i:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:x},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in n){const{phone:m,options:p}=n,{data:g,error:x}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:x}}throw new aa("You must provide either an email or phone number.")}catch(m){if(xe(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(n){var i,o;try{let c,u;"options"in n&&(c=(i=n.options)===null||i===void 0?void 0:i.redirectTo,u=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:m}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:sr});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,g=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(c){if(xe(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(n){var i,o,c;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Dn(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(i=n.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=n?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:cy})}catch(u){if(xe(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)throw o;if(!i)throw new Rr;const{error:c}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:c}})}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const i=`${this.url}/resend`;if("email"in n){const{email:o,type:c,options:u}=n,{error:h}=await ve(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:o,type:c,options:u}=n,{data:h,error:m}=await ve(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:m}}throw new aa("You must provide either an email or phone number and a type")}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(n,i){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await n(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const i=await Jr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?n=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<El:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const h=await Jr(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Rl()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,g,x)=>(!h&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,x))})}return{data:{session:n},error:null}}const{session:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ir}):await this._useSession(async i=>{var o,c,u;const{data:h,error:m}=i;if(m)throw m;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rr}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Ir})})}catch(i){if(xe(i))return Dx(i)&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(n,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,i))}async _updateUser(n,i={}){try{return await this._useSession(async o=>{const{data:c,error:u}=o;if(u)throw u;if(!c.session)throw new Rr;const h=c.session;let m=null,p=null;this.flowType==="pkce"&&n.email!=null&&([m,p]=await Dn(this.storage,this.storageKey));const{data:g,error:x}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:Ir});if(x)throw x;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(xe(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Rr;const i=Date.now()/1e3;let o=i,c=!0,u=null;const{payload:h}=Tl(n.access_token);if(h.exp&&(o=h.exp,c=o<=i),c){const{session:m,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(n.access_token);if(p)throw p;u={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(i){if(xe(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async i=>{var o;if(!n){const{data:h,error:m}=i;if(m)throw m;n=(o=h.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new Rr;const{session:c,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(n,i){try{if(!Dt())throw new oa("No browser detected.");if(n.error||n.error_description||n.error_code)throw new oa(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Lh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oa("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Lh("No code detected.");const{data:D,error:A}=await this._exchangeCodeForSession(n.code);if(A)throw A;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:u,refresh_token:h,expires_in:m,expires_at:p,token_type:g}=n;if(!u||!m||!h||!g)throw new oa("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(m);let j=x+v;p&&(j=parseInt(p));const N=j-x;N*1e3<=Un&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${v}s`);const b=j-v;x-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,j,x):x-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,j,x);const{data:E,error:S}=await this._getUser(u);if(S)throw S;const T={provider_token:o,provider_refresh_token:c,access_token:u,expires_in:v,expires_at:j,refresh_token:h,token_type:g,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:n.type},error:null}}catch(o){if(xe(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const i=await Jr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&i)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return{error:u};const h=(o=c.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:m}=await this.admin.signOut(h,n);if(m&&!(Ox(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return n!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const i=Vx(),o={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async i=>{var o,c;try{const{data:{session:u},error:h}=i;if(h)throw h;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,i={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Dn(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(u){if(xe(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=i.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}async linkIdentity(n){var i;try{const{data:o,error:c}=await this._useSession(async u=>{var h,m,p,g,x;const{data:v,error:j}=u;if(j)throw j;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",N,{headers:this.headers,jwt:(x=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&x!==void 0?x:void 0})});if(c)throw c;return Dt()&&!(!((i=n.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(xe(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async i=>{var o,c;const{data:u,error:h}=i;if(h)throw h;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async _refreshAccessToken(n){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await Gx(async c=>(c>0&&await Jx(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:sr})),(c,u)=>{const h=200*Math.pow(2,c);return u&&Pl(u)&&Date.now()+h-o<Un})}catch(o){if(this._debug(i,"error",o),xe(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(i,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",i,"url",o),Dt()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Jr(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Jr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await zn(this.userStorage,this.storageKey+"-user",h)),c.user=(n=h?.user)!==null&&n!==void 0?n:Rl()}else if(c&&!c.user&&!c.user){const h=await Jr(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await Tr(this.storage,this.storageKey+"-user"),await zn(this.storage,this.storageKey,c)):c.user=Rl()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const u=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<El;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${El}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Pl(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var i,o;if(!n)throw new Rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new wa;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new Rr;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={session:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),xe(u)){const h={session:null,error:u};return Pl(u)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,i,o=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:i});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,i)}catch(p){u.push(p)}});if(await Promise.all(h),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const i=Object.assign({},n),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await zn(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const u=Bh(c);await zn(this.storage,this.storageKey,u)}else{const c=Bh(i);await zn(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Tr(this.storage,this.storageKey),await Tr(this.storage,this.storageKey+"-code-verifier"),await Tr(this.storage,this.storageKey+"-user"),this.userStorage&&await Tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Dt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Un);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-n)/Un);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Un}ms, refresh threshold is ${ql} ticks`),c<=ql&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Df)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const i=`#_onVisibilityChanged(${n})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,i,o){const c=[`provider=${encodeURIComponent(i)}`];if(o?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,h]=await Dn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);c.push(u.toString())}return o?.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;return u?{data:null,error:u}:await ve(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async _enroll(n){try{return await this._useSession(async i=>{var o,c;const{data:u,error:h}=i;if(h)return{data:null,error:h};const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:p,error:g}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;if(u)return{data:null,error:u};const{data:h,error:m}=await ve(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:m})})}catch(i){if(xe(i))return{data:null,error:i};throw i}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:c,error:u}=i;return u?{data:null,error:u}:await ve(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(xe(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(n){const{data:i,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:i.id,code:n.code})}async _listFactors(){const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o=n?.factors||[],c=o.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=o.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:o,totp:c,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var i,o;const{data:{session:c},error:u}=n;if(u)return{data:null,error:u};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Tl(c.access_token);let m=null;h.aal&&(m=h.aal);let p=m;((o=(i=c.user.factors)===null||i===void 0?void 0:i.filter(v=>v.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const x=h.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(n,i={keys:[]}){let o=i.keys.find(m=>m.kid===n);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(m=>m.kid===n),o&&this.jwks_cached_at+Ix>c)return o;const{data:u,error:h}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,o=u.keys.find(m=>m.kid===n),!o)?null:o}async getClaims(n,i={}){try{let o=n;if(!o){const{data:N,error:b}=await this.getSession();if(b||!N.session)return{data:null,error:b};o=N.session.access_token}const{header:c,payload:u,signature:h,raw:{header:m,payload:p}}=Tl(o);i?.allowExpired||ry(u.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!g){const{error:N}=await this.getUser(o);if(N)throw N;return{data:{claims:u,header:c,signature:h},error:null}}const x=ny(c.alg),v=await crypto.subtle.importKey("jwk",g,x,!0,["verify"]);if(!await crypto.subtle.verify(x,v,h,Bx(`${m}.${p}`)))throw new Gl("Invalid JWT signature");return{data:{claims:u,header:c,signature:h},error:null}}catch(o){if(xe(o))return{data:null,error:o};throw o}}}zs.nextInstanceID=0;const vy=zs;class wy extends vy{constructor(n){super(n)}}var by=function(a,n,i,o){function c(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function m(x){try{g(o.next(x))}catch(v){h(v)}}function p(x){try{g(o.throw(x))}catch(v){h(v)}}function g(x){x.done?u(x.value):c(x.value).then(m,p)}g((o=o.apply(a,n||[])).next())})};class jy{constructor(n,i,o){var c,u,h;this.supabaseUrl=n,this.supabaseKey=i;const m=Cx(n);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,g={db:xx,realtime:vx,auth:Object.assign(Object.assign({},yx),{storageKey:p}),global:gx},x=Sx(o??{},g);this.storageKey=(c=x.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=x.auth)!==null&&h!==void 0?h:{},this.headers,x.global.fetch),this.fetch=Nx(i,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new Lg(new URL("rest/v1",m).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new fx(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new Cg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,i={},o={}){return this.rest.rpc(n,i,o)}channel(n,i={config:{}}){return this.realtime.channel(n,i)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,i;return by(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:i,detectSessionInUrl:o,storage:c,userStorage:u,storageKey:h,flowType:m,lock:p,debug:g},x,v){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wy({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),x),storageKey:h,autoRefreshToken:n,persistSession:i,detectSessionInUrl:o,storage:c,userStorage:u,flowType:m,lock:p,debug:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new ex(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o?.access_token)})}_handleTokenChanged(n,i,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:n==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ny=(a,n,i)=>new jy(a,n,i);function ky(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const n=a.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}ky()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _y="https://czkwoxquixhoqntaoumn.supabase.co",Sy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6a3dveHF1aXhob3FudGFvdW1uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzNjQ5NzgsImV4cCI6MjA3ODk0MDk3OH0.AF3OKpl-KpVUsKvHXpgkQ-tY6ejzApmoHQ02peYMWxM",we=Ny(_y,Sy);function Kh(a){const n=a.user_metadata||{},i=n.role||"patient";return{id:a.id,name:n.name||a.email||"Guest",email:a.email||"",role:i,createdAt:a.created_at?new Date(a.created_at):new Date}}const Mf=w.createContext(void 0),Fe=()=>{const a=w.useContext(Mf);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},Cy=({children:a})=>{const[n,i]=w.useState(null),[o,c]=w.useState(!0),[u,h]=w.useState(null),m=async N=>{try{await Jh(N);const b=await la(N);console.log("[Auth] profile hydrated",b),b&&i(b)}catch(b){console.error("[Auth] hydrateUserFromSupabase error",b)}};w.useEffect(()=>{(async()=>{console.log("[Auth] init start");try{const{data:{session:E}}=await we.auth.getSession();console.log("[Auth] getSession result",E),E?.user?(i(S=>S??Kh(E.user)),h(E.access_token??null),m(E.user)):(console.log("[Auth] no active session on init"),i(null),h(null))}catch(E){console.error("[Auth] init error",E),i(null),h(null)}finally{console.log("[Auth] init finally, setting loading=false"),c(!1)}})();const{data:b}=we.auth.onAuthStateChange(async(E,S)=>{console.log("[Auth] onAuthStateChange",E,S);try{S?.user?(i(Kh(S.user)),h(S.access_token??null),m(S.user)):(console.log("[Auth] session cleared in onAuthStateChange"),i(null),h(null))}catch(T){console.error("[Auth] onAuthStateChange error",T),i(null),h(null)}finally{c(!1)}});return()=>{console.log("[Auth] cleanup authListener"),b.subscription.unsubscribe()}},[]);const j={user:n,token:u,loading:o,login:async(N,b)=>{try{const{data:E,error:S}=await we.auth.signInWithPassword({email:N,password:b});if(S||!E.session?.user)return!1;const T=await la(E.session.user);return T?(i(T),h(E.session.access_token??null),!0):!1}catch{return!1}},signup:async N=>{try{const{data:b,error:E}=await we.auth.signUp({email:N.email,password:N.password,options:{data:{name:N.name,role:N.role||"patient",age:N.age??null,sex:N.sex??null,category:N.category??null,bio:N.bio??null,experience:N.experience??null,location:N.location??null,contact_number:N.contactNumber??null,agent_experience:N.agentExperience??null,preferred_region:N.preferredRegion??null}}});if(E||!b.user)return!1;const S=b.user;if(b.session?.user){await Jh(S);const T=await la(S);if(!T)return!1;i(T),h(b.session.access_token??null)}return!0}catch{return!1}},logout:()=>{we.auth.signOut(),i(null),h(null)},updateUser:async N=>{if(!n)return;const b=n.role,E=b==="doctor"?"doctors":b==="patient"?"patients":b==="admin"?"admins":"agents",S={};Object.entries(N).forEach(([D,A])=>{if(D==="createdAt"||D==="role"||D==="id"||D==="email")return;const O=D.replace(/([A-Z])/g,"_$1").toLowerCase();S[O]=A}),Object.keys(S).length>0&&await we.from(E).update(S).eq("id",n.id);const T=await la({id:n.id});T&&i(T)}};return r.jsx(Mf.Provider,{value:j,children:a})};async function la(a){const n=a.id,i=a.email||null,o=async p=>{const{data:g}=await we.from(p).select("*").eq("id",n).limit(1);return g?.[0]||null},c=await o("doctors");if(c)return{id:n,name:c.name,email:c.email||i||"",role:"doctor",createdAt:new Date(c.created_at),category:c.category||"",bio:c.bio||"",experience:c.experience||"",isApproved:!!c.is_approved};const u=await o("patients");if(u)return{id:n,name:u.name,email:u.email||i||"",role:"patient",createdAt:new Date(u.created_at),age:u.age??void 0,sex:u.sex??void 0};const h=await o("admins");if(h)return{id:n,name:h.name,email:h.email||i||"",role:"admin",createdAt:new Date(h.created_at)};const m=await o("agents");if(m){const p={id:n,name:m.name,email:m.email||i||"",role:"admin",createdAt:new Date(m.created_at)};return p.role="agent",p}return null}async function Jh(a){const n=a.id,i=a.user_metadata||{},o=i.name||"",c=a.email||"",u=i.role||"patient",h={id:n,name:o,email:c,created_at:new Date().toISOString()};if(u==="doctor"){const{data:m}=await we.from("doctors").select("id").eq("id",n).limit(1);m?.[0]||await we.from("doctors").insert({...h,category:i.category||"",bio:i.bio||"",experience:i.experience||"",is_approved:!1})}else if(u==="patient"){const{data:m}=await we.from("patients").select("id").eq("id",n).limit(1);m?.[0]||await we.from("patients").insert({...h,age:i.age??null,sex:i.sex??null})}else if(u==="admin"){const{data:m}=await we.from("admins").select("id").eq("id",n).limit(1);m?.[0]||await we.from("admins").insert(h)}else if(u==="agent"){const{data:m}=await we.from("agents").select("id").eq("id",n).limit(1);m?.[0]||await we.from("agents").insert({...h,location:i.location||null,contact_number:i.contact_number||null,agent_experience:i.agent_experience??null,preferred_region:i.preferred_region||null})}}const Lf=w.createContext(void 0),$t=()=>{const a=w.useContext(Lf);if(!a)throw new Error("useData must be used within a DataProvider");return a},Ey=[{id:"1",name:"General Physician",slug:"general-physician",description:"General healthcare and primary care",image:"https://images.pexels.com/photos/5149754/pexels-photo-5149754.jpeg"},{id:"2",name:"Gynaecology and Sexology",slug:"gynaecology-sexology",description:"Women's health and reproductive care",image:"https://images.pexels.com/photos/5982467/pexels-photo-5982467.jpeg"},{id:"3",name:"Dermatology",slug:"dermatology",description:"Skin, hair, and nail conditions",image:"https://tse2.mm.bing.net/th/id/OIP.CiMV-pDItQHRWwTD-xoQWwHaEZ?w=555&h=330&rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"4",name:"Psychiatry and Psychology",slug:"psychiatry-psychology",description:"Mental health and behavioral disorders",image:"https://images.pexels.com/photos/19825313/pexels-photo-19825313.jpeg"},{id:"5",name:"Gastroenterology",slug:"gastroenterology",description:"Digestive system disorders",image:"https://aashrayahospitalgadag.whitecoats.com/wp-content/uploads/sites/66/2023/07/Colon-Surgery.jpg"},{id:"6",name:"Pediatrics",slug:"pediatrics",description:"Children's healthcare",image:"https://images.pexels.com/photos/8316306/pexels-photo-8316306.jpeg"},{id:"7",name:"ENT",slug:"ent",description:"Ear, nose, and throat conditions",image:"https://img.freepik.com/premium-vector/ent-doctor-logo-template-ear-nose-throat-doctor-clinic-mouth-health-otolaryngology-illustration_41737-1016.jpg?w=2000"},{id:"8",name:"Urology and Nephrology",slug:"urology-nephrology",description:"Urinary system and kidney care",image:"https://kidneyandurology.org/wp-content/uploads/2023/07/Preventive-Nephrology.png"},{id:"9",name:"Orthopedics",slug:"orthopedics",description:"Bone and joint disorders",image:"https://tse4.mm.bing.net/th/id/OIP.qG33yqxpX2N-pGiHXV6t7QHaE8?rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"10",name:"Neurology",slug:"neurology",description:"Brain and nervous system disorders",image:"https://tse4.mm.bing.net/th/id/OIP.JfzoenJyRtHss-jdRt5BnQHaDt?w=1920&h=960&rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"11",name:"Cardiology",slug:"cardiology",description:"Heart and cardiovascular conditions",image:"https://tse3.mm.bing.net/th/id/OIP.0T2w8g1U6JJ6jIVVMYkXvQHaD4?w=1200&h=630&rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"12",name:"Diabetology",slug:"nutrition-diabetology",description:"Nutrition counseling and diabetes care",image:"https://tse4.mm.bing.net/th/id/OIP.R4QikDolCpYpZpcOcn631QHaEK?rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"13",name:"Ophthalmology",slug:"ophthalmology",description:"Eye and vision care",image:"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJvYXV0aCI6eyJjbGllbnRfaWQiOiJmcm9udGlmeS1leHBsb3JlciJ9LCJwYXRoIjoiaWhoLWhlYWx0aGNhcmUtYmVyaGFkXC9hY2NvdW50c1wvYzNcLzQwMDA2MjRcL3Byb2plY3RzXC8yMDlcL2Fzc2V0c1wvMGNcLzMzNzg0XC8zOTQxMTExY2JmZTVkNTlkYmE5MGVkMWQ3NDk3ZGM2Zi0xNjQ2OTI0NzMxLmpwZyJ9:ihh-healthcare-berhad:O6LgxuC6K0djc4JcxeU5q-K8h_Xk2yWXVbxOxobSWOU"},{id:"14",name:"Dentistry",slug:"dentistry",description:"Oral and dental health",image:"https://rosedentalnashua.com/wp-content/uploads/2020/08/AdobeStock_197373009-scaled.jpeg"},{id:"15",name:"Pulmonology",slug:"pulmonology",description:"Lung and respiratory conditions",image:"https://floridalungdoctors.com/wp-content/uploads/2018/04/iStock-675674414-1024x683.jpg"},{id:"16",name:"Oncology",slug:"oncology",description:"Cancer diagnosis and treatment",image:"https://dcjournal.com/wp-content/uploads/2023/03/bigstock-Pulmonology-Medicine-Concept-460989283-e1679862023206.jpg"},{id:"17",name:"Physiotherapy",slug:"physiotherapy",description:"Physical therapy and rehabilitation",image:"https://www.sagarclinic.in/wp-content/uploads/2019/12/Physio-at-home-5-scaled.jpg"},{id:"18",name:"General Surgery",slug:"general-surgery",description:"Surgical procedures and interventions",image:"https://tse4.mm.bing.net/th/id/OIP.aLy1a9b2x7ursFkNCSIx2QHaHa?rs=1&pid=ImgDetMain&o=7&rm=3"},{id:"19",name:"Veterinary",slug:"veterinary",description:"Animal healthcare",image:"https://www.penangveterinarycentre.com/wp-content/uploads/2024/03/Career_desktop.jpg"}],Py=({children:a})=>{const{user:n}=Fe(),[i,o]=w.useState([]),[c,u]=w.useState([]),[h,m]=w.useState([]),[p,g]=w.useState([]),[x,v]=w.useState([]);w.useEffect(()=>{n&&j()},[n]);const j=async()=>{if(!n)return;const{data:F}=await we.from("appointments").select("*").order("datetime",{ascending:!0});F&&o(F.map(C=>({id:C.id,patientId:C.patient_id,doctorId:C.doctor_id,patientName:C.patient_name,doctorName:C.doctor_name,doctorCategory:C.doctor_category,datetime:new Date(C.datetime),status:C.status,notes:C.notes||void 0,recommendations:C.recommendations||void 0,prescription:C.prescription||void 0,doctorNotes:C.doctor_notes||void 0,patientReview:C.patient_review||void 0,patientRating:C.patient_rating||void 0,patientVitals:C.patient_vitals||void 0,createdAt:new Date(C.created_at),updatedAt:new Date(C.updated_at)})));const{data:B}=await we.from("messages").select("*").order("timestamp",{ascending:!0});B&&u(B.map(C=>({id:C.id,appointmentId:C.appointment_id,senderId:C.sender_id,senderRole:C.sender_role,content:C.content,timestamp:new Date(C.timestamp),read:!!C.read,attachment:C.attachment_meta?{fileName:C.attachment_meta.fileName,fileType:C.attachment_meta.fileType,fileSize:C.attachment_meta.fileSize,fileData:C.attachment_meta.fileData||""}:void 0})));const{data:J}=await we.from("activity_logs").select("*").order("timestamp",{ascending:!1});J&&m(J.map(C=>({id:C.id,userId:C.user_id,userRole:C.user_role,userName:C.user_name,action:C.action,details:C.details,timestamp:new Date(C.timestamp)})));const{data:ue}=await we.from("doctors").select("*");if(ue){const C=ue.map(H=>({id:H.id,name:H.name,email:H.email,role:"doctor",createdAt:new Date(H.created_at),category:H.category,bio:H.bio??"",experience:H.experience??"",degrees:H.degrees??void 0,isApproved:!!H.is_approved}));g(C)}const{data:ge,error:be}=await we.from("patients").select("*");if(console.log("Supabase patients:",ge,"Error:",be),ge){const C=ge.map(H=>({id:H.id,role:"patient",name:H.email,email:H.email,age:H.age,sex:H.sex,height:H.height,weight:H.weight,medications:H.medications||"",allergies:H.allergies||"",createdAt:new Date(H.created_at)}));console.log("Mapped patients:",C),v(C)}},$={categories:Ey,appointments:i,patients:x,createAppointment:async F=>{const B=crypto.randomUUID();await we.from("appointments").insert({id:B,patient_id:F.patientId,doctor_id:F.doctorId,patient_name:F.patientName,doctor_name:F.doctorName,doctor_category:F.doctorCategory,datetime:F.datetime.toISOString(),status:F.status,notes:F.notes||null,recommendations:F.recommendations||null,prescription:F.prescription||null,doctor_notes:F.doctorNotes||null,patient_review:F.patientReview||null,patient_rating:F.patientRating||null,patient_vitals:F.patientVitals||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),o([...i,{...F,id:B,createdAt:new Date,updatedAt:new Date}])},updateAppointment:async(F,B)=>{const J={updated_at:new Date().toISOString()};B.status&&(J.status=B.status),B.notes!==void 0&&(J.notes=B.notes),B.recommendations!==void 0&&(J.recommendations=B.recommendations),B.prescription!==void 0&&(J.prescription=B.prescription),B.doctorNotes!==void 0&&(J.doctor_notes=B.doctorNotes),B.patientReview!==void 0&&(J.patient_review=B.patientReview),B.patientRating!==void 0&&(J.patient_rating=B.patientRating),B.patientVitals!==void 0&&(J.patient_vitals=B.patientVitals),await we.from("appointments").update(J).eq("id",F),o(i.map(ue=>ue.id===F?{...ue,...B,updatedAt:new Date}:ue))},messages:c,sendMessage:async(F,B,J)=>{if(!n)return;let ue=null,ge;if(J){const C=`${F}/${crypto.randomUUID()}_${J.name}`,{error:H}=await we.storage.from("attachments").upload(C,J);if(!H){const{data:ae}=we.storage.from("attachments").getPublicUrl(C);ue=ae.publicUrl,ge={fileName:J.name,fileType:J.type,fileSize:J.size,fileData:""}}}const be=crypto.randomUUID();await we.from("messages").insert({id:be,appointment_id:F,sender_id:n.id,sender_role:n.role,content:B||(ge?` ${ge.fileName}`:""),timestamp:new Date().toISOString(),read:!1,attachment_url:ue,attachment_meta:ge||null}),u([...c,{id:be,appointmentId:F,senderId:n.id,senderRole:n.role,content:B||(ge?` ${ge.fileName}`:""),timestamp:new Date,read:!1,attachment:ge}])},markMessagesAsRead:async(F,B)=>{await we.from("messages").update({read:!0}).eq("appointment_id",F).neq("sender_id",B),u(c.map(J=>J.appointmentId===F&&J.senderId!==B?{...J,read:!0}:J))},activityLogs:h,addActivityLog:async F=>{const B=crypto.randomUUID(),J=new Date;await we.from("activity_logs").insert({id:B,user_id:F.userId,user_role:F.userRole,user_name:F.userName,action:F.action,details:F.details,timestamp:J.toISOString()}),m([{...F,id:B,timestamp:J},...h])},getDoctors:()=>p,approveDoctor:async F=>{try{console.log("Approving/Revoking doctor:",F);const{data:B,error:J}=await we.from("doctors").select("is_approved,name").eq("id",F).limit(1);if(J){console.error("Error fetching doctor status:",J);return}const ue=B?.[0];if(!ue){console.error("Doctor not found:",F);return}const ge=!ue.is_approved;console.log("Setting is_approved to:",ge);const{error:be}=await we.from("doctors").update({is_approved:ge}).eq("id",F);if(be){console.error("Error updating doctor status:",be);return}const{data:C,error:H}=await we.from("doctors").select("*");if(H){console.error("Error refreshing doctors list:",H);return}if(C){const ae=C.map(V=>({id:V.id,name:V.name,email:V.email,role:"doctor",createdAt:new Date(V.created_at),category:V.category,bio:V.bio??"",experience:V.experience??"",degrees:V.degrees??void 0,isApproved:!!V.is_approved}));g(ae),console.log("Doctors list refreshed. Total:",ae.length)}}catch(B){console.error("Unexpected error in approveDoctor:",B)}},getAppStats:()=>{const F=x.length,B=new Date,J=new Date(B.getTime()-10080*60*1e3),ue=i.filter(ae=>ae.datetime.toDateString()===B.toDateString()),ge=i.filter(ae=>ae.datetime>=J),be=c.filter(ae=>ae.timestamp.toDateString()===B.toDateString()),C=i.reduce((ae,V)=>(ae[V.status]=(ae[V.status]||0)+1,ae),{}),H={totalDoctors:p.length,approvedDoctors:p.filter(ae=>ae.isApproved).length,pendingDoctors:p.filter(ae=>!ae.isApproved).length,totalPatients:F,todayAppointments:ue.length,weekAppointments:ge.length,todayMessages:be.length,appointmentsByStatus:{pending:C.pending||0,accepted:C.accepted||0,completed:C.completed||0,cancelled:C.cancelled||0,no_show:C.no_show||0}};return console.log("App Stats:",H),H},getUnreadMessageCount:(F,B)=>c.filter(J=>J.appointmentId===F&&J.senderId!==B&&!J.read).length,getAppointmentMessages:F=>c.filter(B=>B.appointmentId===F).sort((B,J)=>B.timestamp.getTime()-J.timestamp.getTime()),getPatientHistory:F=>i.filter(B=>B.patientId===F).sort((B,J)=>J.datetime.getTime()-B.datetime.getTime()).map(B=>({date:B.datetime,summary:`${B.status} with Dr. ${B.doctorName} (${B.doctorCategory})`}))};return r.jsx(Lf.Provider,{value:$,children:a})},$f=w.createContext(void 0),ba=()=>{const a=w.useContext($f);if(a===void 0)throw new Error("useChat must be used within a ChatProvider");return a},Ty=({children:a})=>{const{user:n}=Fe(),[i,o]=w.useState([]),[c,u]=w.useState([]);w.useEffect(()=>{if(!n)return;(async()=>{const{data:N}=await we.from("chat_messages").select("*").order("timestamp",{ascending:!0});N&&o(N.map(b=>({id:b.id,sender_id:b.sender_id,receiver_id:b.receiver_id,message:b.message,timestamp:new Date(b.timestamp),senderName:b.sender_name||void 0,receiverName:b.receiver_name||void 0})))})();const j=we.channel("realtime:chat_messages").on("postgres_changes",{event:"*",schema:"public",table:"chat_messages"},N=>{console.log("Real-time event received:",N);const b=N.new||N.old;N.eventType==="INSERT"?(console.log("Processing INSERT event for message:",b),o(E=>E.some(T=>T.id===b.id)?(console.log("Message already exists, skipping:",b.id),E):(console.log("Adding new message to state:",b),[...E,{id:b.id,sender_id:b.sender_id,receiver_id:b.receiver_id,message:b.message,timestamp:new Date(b.timestamp),senderName:b.sender_name||void 0,receiverName:b.receiver_name||void 0}]))):N.eventType==="UPDATE"?o(E=>E.map(S=>S.id===b.id?{id:b.id,sender_id:b.sender_id,receiver_id:b.receiver_id,message:b.message,timestamp:new Date(b.timestamp),senderName:b.sender_name||void 0,receiverName:b.receiver_name||void 0}:S)):N.eventType==="DELETE"&&o(E=>E.filter(S=>S.id!==b.id))}).subscribe();return()=>{we.removeChannel(j)}},[n]),w.useCallback(()=>{},[]),w.useEffect(()=>{if(!n)return;const v=we.channel("presence:online_users",{config:{presence:{key:n.id}}});return v.on("presence",{event:"sync"},()=>{const j=v.presenceState(),N=Object.entries(j).flatMap(([b,E])=>E.map(S=>({userId:b,userName:S.userName,role:S.role,lastSeen:new Date(S.lastSeen),isOnline:!0})));u(N)}),v.subscribe(async j=>{j==="SUBSCRIBED"&&await v.track({userName:n.name,role:n.role,lastSeen:new Date().toISOString()})}),()=>{we.removeChannel(v)}},[n]),w.useEffect(()=>{},[n]),w.useEffect(()=>{},[]),w.useEffect(()=>{},[]);const h=w.useCallback(async(v,j)=>{if(!j.trim()||!n)return;console.log("Sending message from user:",n),console.log("To receiver:",v),console.log("Message content:",j);const N=crypto.randomUUID(),b={id:N,sender_id:n.id,receiver_id:v,message:j.trim(),timestamp:new Date().toISOString(),sender_name:n.name},E=c.find(T=>T.userId===v);E&&(b.receiver_name=E.userName),console.log("Payload to insert:",b);const S={id:N,sender_id:n.id,receiver_id:v,message:j.trim(),timestamp:new Date,senderName:n.name,receiverName:E?.userName};o(T=>T.some(A=>A.id===N)?T:[...T,S]);try{const{data:T,error:D}=await we.from("chat_messages").insert(b);if(D)throw console.error("Database insert error:",D),o(A=>A.filter(O=>O.id!==N)),D;console.log("Message successfully inserted to database:",T)}catch(T){console.error("Failed to send message:",T),o(D=>D.filter(A=>A.id!==N))}},[n,c]),m=w.useCallback(v=>{if(!n)return[];const j=n.id;return i.filter(N=>N.sender_id===j&&N.receiver_id===v||N.sender_id===v&&N.receiver_id===j).sort((N,b)=>N.timestamp.getTime()-b.timestamp.getTime())},[n,i]),p=w.useCallback(v=>{if(!n)return;const j=n.id,N=JSON.parse(localStorage.getItem("readMessages")||"{}");N[`${v}_${j}`]=new Date().toISOString(),localStorage.setItem("readMessages",JSON.stringify(N))},[n]),g=w.useCallback(v=>{if(!n)return 0;const j=n.id,b=JSON.parse(localStorage.getItem("readMessages")||"{}")[`${v}_${j}`];if(!b)return i.filter(S=>S.sender_id===v&&S.receiver_id===j).length;const E=new Date(b);return i.filter(S=>S.sender_id===v&&S.receiver_id===j&&S.timestamp>E).length},[n,i]),x={messages:i,onlineUsers:c,sendMessage:h,getChatMessages:m,markAsRead:p,getUnreadCount:g};return r.jsx($f.Provider,{value:x,children:a})};var Ry={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Iy=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(a,n)=>{const i=w.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:m="",children:p,...g},x)=>w.createElement("svg",{ref:x,...Ry,width:c,height:c,stroke:o,strokeWidth:h?Number(u)*24/Number(c):u,className:["lucide",`lucide-${Iy(a)}`,m].join(" "),...g},[...n.map(([v,j])=>w.createElement(v,j)),...Array.isArray(p)?p:[p]]));return i.displayName=`${a}`,i};const Yr=ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const fc=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const rn=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const ja=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Al=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Ay=ce("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);const Gh=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Oy=ce("Bone",[["path",{d:"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z",key:"w610uw"}]]);const Dy=ce("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Qh=ce("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const My=ce("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const ct=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Bn=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ol=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Dl=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Uf=ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Ze=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Ly=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const ca=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const $y=ce("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const Fs=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const or=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Uy=ce("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const zy=ce("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const Fy=ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Xr=ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const By=ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Hy=ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);const Ml=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Ql=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const zf=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Ff=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Wy=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Hn=ce("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const Yl=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const ga=ce("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const Vy=ce("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);const Bf=ce("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const qy=ce("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);const Xl=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Yh=ce("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Ky=ce("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);const Jy=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Zr=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Gy=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Qy=ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const mc=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const Bs=ce("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);const Yy=ce("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const Xh=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Hf=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Gt=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Jt=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Xy=ce("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const pc=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Ut=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Zy=ce("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ev={},Zh=ev?.VITE_API_URL||"http://127.0.0.1:8000",tv=({isCentered:a=!1})=>{const{user:n,token:i}=Fe(),[o,c]=w.useState(!1),[u,h]=w.useState(!1),[m,p]=w.useState([]),[g,x]=w.useState(""),[v,j]=w.useState(!1),[N,b]=w.useState([]),[E,S]=w.useState(null),[T,D]=w.useState(null),[A,O]=w.useState(!1),[q,Z]=w.useState(""),[ee,$]=w.useState(!1),[F,B]=w.useState(!1),[J,ue]=w.useState(!1),ge=w.useRef(null),be=w.useRef(null);w.useEffect(()=>{localStorage.getItem("openChatDockAfterLogin")==="1"?setTimeout(()=>{c(!0),localStorage.removeItem("openChatDockAfterLogin"),h(!0)},400):h(!0)},[]);const C=w.useMemo(()=>v?"Thinking...":J?"Appointment Confirmed":"AI Health Assistant",[v,J]),H=(I,Y)=>{p(re=>[...re,{id:crypto.randomUUID(),role:I,content:Y}]),setTimeout(()=>ge.current?.scrollIntoView({behavior:"smooth"}),50)};w.useEffect(()=>{o&&m.length===0&&n&&H("assistant",`Hi ${n.name.split(" ")[0]}! I'm your health assistant. How can I help you today?`)},[o,m.length,n]);const ae=async()=>{const I=g.trim();if(!(!I||v)){x(""),H("user",I),j(!0);try{const Y=m.map(pe=>({role:pe.role,content:pe.content}));Y.push({role:"user",content:I});const re=await fetch(`${Zh}/api/assistant/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({messages:Y.filter(pe=>pe.role!=="system"),patient_context:n?{name:n.name,age:n.age}:void 0})});if(!re.ok)throw new Error("Failed to get response");const fe=await re.json();H("assistant",fe.message),fe.action==="recommend_doctor"&&(b(fe.data.doctors),D(fe.data.intake_summary))}catch(Y){console.error(Y),H("assistant","I encountered an error. Please try again.")}finally{j(!1),setTimeout(()=>be.current?.focus(),100)}}},V=I=>{S(I),H("assistant",`You selected Dr. ${I.name}. Please choose a date and time for your appointment.`),O(!0),b([])},W=I=>{if(I.preventDefault(),!q)return;O(!1);const Y=`
 **Appointment Summary**

**Patient:** ${n?.name}
**Doctor:** Dr. ${E?.name} (${E?.category})
**Date & Time:** ${new Date(q).toLocaleString()}

**Your Symptoms:**
 Issue: ${T?.issue||"Not specified"}
 Symptoms: ${T?.symptoms||"Not specified"}
 Duration: ${T?.duration||"Not specified"}
 Severity: ${T?.severity||"Not rated"}/10
 Medications: ${T?.medications||"None"}
 Allergies: ${T?.allergies||"None"}

Please review and proceed to payment.`;H("assistant",Y),$(!0)},z=async()=>{B(!0),await new Promise(I=>setTimeout(I,1500)),B(!1),$(!1),await _()},_=async()=>{if(!(!E||!q||!T||!n||!i)){j(!0);try{const I={patient_id:n.id,doctor_id:E.id,patient_name:n.name,doctor_name:E.name,doctor_category:E.category,datetime:new Date(q).toISOString(),symptoms:`${T.issue}; ${T.symptoms}`};if(!(await fetch(`${Zh}/api/assistant/appointments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(I)})).ok)throw new Error("Booking failed");ue(!0),H("assistant","Payment successful! Your appointment has been confirmed. You can view it in your dashboard."),H("assistant","A chat channel with the doctor has been opened in the Messages section.")}catch(I){console.error(I),H("assistant","Payment succeeded but booking failed. Please contact support.")}finally{j(!1)}}};return u?r.jsxs("div",{children:[r.jsx("div",{className:`chatbot-container ${o?"open":""} ${a?"chatbot-centered":""}`,"aria-hidden":!o,children:r.jsxs("div",{className:"pointer-events-auto flex-1 min-h-0 bg-white shadow-2xl border border-neutral-200 rounded-2xl overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-100 bg-white text-neutral-800",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-blue-50 rounded-full p-2",children:r.jsx(Dy,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-neutral-900",children:"AI Assistant"}),r.jsxs("p",{className:"text-xs font-medium text-blue-600 flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1.5 animate-pulse"}),C]})]})]}),r.jsx("button",{className:"p-2 rounded-full hover:bg-neutral-100 text-neutral-400 hover:text-neutral-600 transition-colors",onClick:()=>c(!1),"aria-label":"Minimize chat",children:r.jsx(Ut,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"chatbot-messages flex-1 overflow-y-auto px-4 py-4 space-y-4 bg-slate-50",children:[m.map(I=>r.jsx("div",{className:`flex ${I.role==="user"?"justify-end":"justify-start"} animate-fade-in`,children:r.jsx("div",{className:`max-w-[85%] px-4 py-3 rounded-2xl shadow-sm whitespace-pre-wrap break-words text-sm leading-relaxed ${I.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white text-slate-800 border border-slate-200 rounded-bl-none"}`,children:I.content})},I.id)),N.length>0&&!E&&r.jsxs("div",{className:"space-y-3 mt-4 animate-slide-up",children:[r.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider ml-1",children:"Recommended Doctors"}),N.map(I=>r.jsxs("div",{className:"doctor-suggestion-card bg-white p-4 rounded-xl border border-blue-100 shadow-sm hover:shadow-md transition-all cursor-pointer group",onClick:()=>V(I),children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-900 group-hover:text-blue-600 transition-colors",children:I.name}),r.jsx("p",{className:"text-sm text-blue-500 font-medium",children:I.category}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:I.experience||"5+ years experience"})]}),r.jsx("div",{className:"bg-blue-50 p-2 rounded-lg group-hover:bg-blue-100 transition-colors",children:r.jsx(Bs,{className:"h-5 w-5 text-blue-600"})})]}),r.jsx("button",{className:"w-full mt-3 py-2 bg-slate-100 text-slate-700 text-xs font-bold rounded-lg group-hover:bg-blue-600 group-hover:text-white transition-all",children:"Select Doctor"})]},I.id))]}),A&&r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm animate-slide-up",children:[r.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center",children:[r.jsx(ct,{className:"h-4 w-4 mr-2 text-blue-600"}),"Select Appointment Time"]}),r.jsxs("form",{onSubmit:W,className:"space-y-3",children:[r.jsx("input",{type:"datetime-local",min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",onChange:I=>Z(I.target.value),required:!0}),r.jsx("button",{type:"submit",className:"w-full py-2 bg-blue-600 text-white text-sm font-bold rounded-lg hover:bg-blue-700 transition-colors",children:"Confirm Time"})]})]}),ee&&r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm animate-slide-up",children:[r.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center",children:[r.jsx(Ly,{className:"h-4 w-4 mr-2 text-green-600"}),"Complete Payment"]}),r.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg mb-3",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[r.jsx("span",{className:"text-slate-600",children:"Consultation Fee"}),r.jsx("span",{className:"font-semibold",children:"$50.00"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Service Fee"}),r.jsx("span",{className:"font-semibold",children:"$2.00"})]}),r.jsx("div",{className:"border-t border-slate-200 my-2"}),r.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-900",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:"$52.00"})]})]}),r.jsx("button",{onClick:z,disabled:F,className:"w-full py-2.5 bg-green-600 text-white text-sm font-bold rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:F?r.jsxs(r.Fragment,{children:[r.jsx(Ml,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):"Pay & Book Appointment"})]}),r.jsx("div",{ref:ge})]}),r.jsxs("footer",{className:"px-4 py-3 border-t border-neutral-200 bg-white",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex-1 relative pointer-events-auto",children:[r.jsx("input",{type:"text",value:g,disabled:v||A||ee||J,onChange:I=>x(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),ae())},ref:be,placeholder:J?"Appointment booked!":"Type your reply...",className:"flex-1 form-input rounded-2xl border-2 border-slate-200 focus:border-blue-500 focus:ring-blue-500 pr-10","aria-label":"Chat input"}),v&&r.jsx(Ml,{className:"h-4 w-4 text-slate-400 animate-spin absolute right-3 top-1/2 -translate-y-1/2"})]}),r.jsxs("button",{onClick:()=>void ae(),disabled:!g.trim()||v||A||ee||J,className:"inline-flex items-center px-4 py-2 rounded-2xl bg-blue-600 text-white font-semibold shadow-sm hover:bg-blue-700 disabled:opacity-50","aria-label":"Send message",children:[v?r.jsx(Ml,{className:"h-4 w-4 animate-spin"}):r.jsx(Zr,{className:"h-4 w-4"}),"Send"]})]}),J&&r.jsxs("p",{className:"text-xs text-emerald-600 mt-2 flex items-center space-x-1",children:[r.jsx(Bn,{className:"h-4 w-4"}),r.jsx("span",{children:"Appointment confirmed! Check your dashboard and Messages section."})]})]})]})}),r.jsx("button",{onClick:()=>c(I=>!I),className:`chatbot-toggle pointer-events-auto ${a?"chatbot-toggle-centered":""} ${o?"open":""}`,"aria-label":o?"Minimize chat":"Open chat",children:o?r.jsx(Ut,{className:"h-6 w-6"}):r.jsx(Hn,{className:"h-6 w-6"})})]}):null},rv="http://127.0.0.1:8000";class nv{baseUrl;timeout;constructor(n=rv,i=1e4){this.baseUrl=n,this.timeout=i}async detectPII(n){try{const i=new AbortController,o=setTimeout(()=>i.abort(),this.timeout),c=await fetch(`${this.baseUrl}/api/pii/detect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:i.signal});if(clearTimeout(o),!c.ok){const u=await c.json().catch(()=>({}));throw new Error(u.message||`HTTP ${c.status}: ${c.statusText}`)}return await c.json()}catch(i){throw i instanceof Error?i.name==="AbortError"?new Error("PII detection request timed out"):new Error(`PII detection failed: ${i.message}`):new Error("PII detection failed: Unknown error")}}async shouldBlockMessage(n,i,o="high"){try{const c=await this.detectPII({text:n,user_id:i,sensitivity:o});return{shouldBlock:c.is_blocked||c.detection_threshold_met,reason:c.violation_type||"PII detected",maskedText:c.masked_text,confidence:c.confidence,violations:c.all_violations}}catch(c){return console.error("Error checking message blocking:",c),{shouldBlock:!1,reason:"Error during PII detection",maskedText:n,confidence:"low",violations:[]}}}async maskPII(n,i,o="high"){try{const c=await this.detectPII({text:n,user_id:i,sensitivity:o});return{maskedText:c.masked_text,hasPII:c.all_violations.length>0,violations:c.all_violations}}catch(c){return console.error("Error masking PII:",c),{maskedText:n,hasPII:!1,violations:[]}}}async getStats(){try{const n=new AbortController,i=setTimeout(()=>n.abort(),this.timeout),o=await fetch(`${this.baseUrl}/api/pii/stats`,{method:"GET",headers:{"Content-Type":"application/json"},signal:n.signal});if(clearTimeout(i),!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return await o.json()}catch(n){throw n instanceof Error?new Error(`Failed to get PII stats: ${n.message}`):new Error("Failed to get PII stats: Unknown error")}}async getUserViolations(n){try{const i=new AbortController,o=setTimeout(()=>i.abort(),this.timeout),c=await fetch(`${this.baseUrl}/api/pii/user-violations/${encodeURIComponent(n)}`,{method:"GET",headers:{"Content-Type":"application/json"},signal:i.signal});if(clearTimeout(o),!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);return await c.json()}catch(i){throw i instanceof Error?new Error(`Failed to get user violations: ${i.message}`):new Error("Failed to get user violations: Unknown error")}}async healthCheck(){try{const n=new AbortController,i=setTimeout(()=>n.abort(),5e3),o=await fetch(`${this.baseUrl}/health`,{method:"GET",signal:n.signal});return clearTimeout(i),o.ok}catch(n){return console.warn("PII detection service health check failed:",n),!1}}setBaseUrl(n){this.baseUrl=n}setTimeout(n){this.timeout=n}}const Os=new nv,Na=(a,n="high")=>{const[i,o]=w.useState({isLoading:!1,isServiceHealthy:!1,lastError:null});w.useEffect(()=>{const g=async()=>{try{const v=await Os.healthCheck();o(j=>({...j,isServiceHealthy:v}))}catch{o(j=>({...j,isServiceHealthy:!1,lastError:"Failed to connect to PII detection service"}))}};g();const x=setInterval(g,3e4);return()=>clearInterval(x)},[]);const c=w.useCallback(async g=>{if(!g.trim())return{shouldBlock:!1,reason:"Empty message",maskedText:g,confidence:"low",violations:[]};o(x=>({...x,isLoading:!0,lastError:null}));try{const x=Date.now(),v=await Os.shouldBlockMessage(g,a,n),j=Date.now()-x;return o(N=>({...N,isLoading:!1})),{...v,processingTime:j}}catch(x){const v=x instanceof Error?x.message:"Unknown error occurred";return o(j=>({...j,isLoading:!1,lastError:v,isServiceHealthy:!1})),{shouldBlock:!1,reason:"Error during PII detection",maskedText:g,confidence:"low",violations:[]}}},[a,n]),u=w.useCallback(async g=>{if(!g.trim())return{maskedText:g,hasPII:!1,violations:[]};o(x=>({...x,isLoading:!0,lastError:null}));try{const x=await Os.maskPII(g,a,n);return o(v=>({...v,isLoading:!1})),x}catch(x){const v=x instanceof Error?x.message:"Unknown error occurred";return o(j=>({...j,isLoading:!1,lastError:v,isServiceHealthy:!1})),{maskedText:g,hasPII:!1,violations:[]}}},[a,n]),h=w.useCallback(async g=>{if(!g.trim())return null;o(x=>({...x,isLoading:!0,lastError:null}));try{const x=await Os.detectPII({text:g,user_id:a,sensitivity:n});return o(v=>({...v,isLoading:!1})),x}catch(x){const v=x instanceof Error?x.message:"Unknown error occurred";return o(j=>({...j,isLoading:!1,lastError:v,isServiceHealthy:!1})),null}},[a,n]),m=w.useCallback(()=>{o(g=>({...g,lastError:null}))},[]),p=w.useCallback(async()=>{o(g=>({...g,isLoading:!0,lastError:null}));try{const g=await Os.healthCheck();return o(x=>({...x,isLoading:!1,isServiceHealthy:g,lastError:g?null:"Service is not responding"})),g}catch(g){const x=g instanceof Error?g.message:"Connection failed";return o(v=>({...v,isLoading:!1,isServiceHealthy:!1,lastError:x})),!1}},[]);return{...i,checkMessage:c,maskPII:u,detectPII:h,clearError:m,retryConnection:p,isReady:i.isServiceHealthy&&!i.isLoading}},sv=()=>{const{user:a}=Fe(),{getChatMessages:n,sendMessage:i,markAsRead:o,onlineUsers:c,messages:u}=ba(),[h,m]=w.useState(""),p=w.useRef(null),g=w.useRef(null),x=w.useRef(null),{checkMessage:v,isServiceHealthy:j}=Na(a?.id,"high"),[N,b]=w.useState(null),[E,S]=w.useState(!1);w.useEffect(()=>{},[a,c.length]);const T=c.find($=>$.role==="agent")||null,D=T?.userId||null,[,A]=w.useState(0);w.useEffect(()=>{},[]);const O=w.useMemo(()=>D?n(D):[],[D,n,u.length,u]);w.useEffect(()=>{A($=>$+1)},[u.length,D,O.length]),w.useEffect(()=>{O.length>0&&A($=>$+1)},[O.map($=>$.id).join(",")]),w.useEffect(()=>{D&&o(D)},[D,o]);const q=w.useCallback(()=>{requestAnimationFrame(()=>{p.current&&p.current.scrollIntoView({behavior:"smooth",block:"nearest"}),g.current&&(g.current.scrollTop=g.current.scrollHeight)})},[]);w.useEffect(()=>{if(O.length>0){const $=setTimeout(()=>{q()},100);return()=>clearTimeout($)}},[O.length,q]),w.useEffect(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=`${Math.min(x.current.scrollHeight,80)}px`)},[h]),w.useEffect(()=>{const F=setTimeout(async()=>{if(!h.trim()||!j){b(null),S(!1);return}try{const B=await v(h);b(B),S(B.shouldBlock)}catch(B){console.error("PII check failed:",B),b(null),S(!1)}},500);return()=>clearTimeout(F)},[h,v,j]);const Z=w.useCallback(async()=>{if(!D||!h.trim())return;const $=h.trim();let F=$,B=!0;if(j)try{const J=await v($);if(J.shouldBlock){alert(`Message blocked: ${J.reason}

Detected violations: ${J.violations.map(ue=>ue.type).join(", ")}

Please remove personal information before sending.`);return}J.violations.length>0&&J.maskedText!==$&&(confirm(`Personal information detected in your message.

Would you like to send the masked version instead?

Original: "${$}"
Masked: "${J.maskedText}"`)?F=J.maskedText:B=!1)}catch(J){console.error("PII check failed during send:",J),confirm("PII detection service is unavailable. Send message anyway?")||(B=!1)}B&&(i(D,F),m(""),b(null),S(!1),x.current&&(x.current.style.height="36px"))},[D,h,i,v,j]),ee=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Z())};return w.useEffect(()=>{if(D&&x.current){const $=setTimeout(()=>{x.current?.focus()},100);return()=>clearTimeout($)}},[D]),r.jsxs("div",{className:"flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 h-[400px] min-h-[400px] max-h-[500px] w-full",children:[r.jsx("div",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-3 sm:px-4 py-2 rounded-t-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold mr-2 sm:mr-3",children:T?T.userName.charAt(0).toUpperCase():"A"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:T?T.userName:"Agent"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:T?.isOnline?"Online":"Offline"})]})]})}),r.jsxs("div",{ref:g,className:"flex-1 overflow-y-auto px-3 sm:px-4 py-2 sm:py-3 bg-gray-50 min-h-0 overscroll-contain",children:[O.length===0?r.jsx("div",{className:"flex items-center justify-center h-full min-h-[80px]",children:r.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:"No messages yet. Start the conversation!"})}):r.jsx("div",{className:"space-y-2",children:O.map($=>{const F=$.sender_id===a?.id;return r.jsx("div",{className:`flex ${F?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"max-w-xs lg:max-w-md px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg bg-blue-600 text-white",children:[r.jsx("p",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words text-white",children:$.message}),r.jsx("p",{className:"text-[10px] sm:text-xs mt-0.5 text-blue-100",children:new Date($.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$.id)})}),r.jsx("div",{ref:p})]}),r.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 bg-white rounded-b-lg shadow-[0_-2px_8px_rgba(0,0,0,0.05)] px-3 sm:px-4 py-2",children:[E&&N&&N.violations.length>0&&r.jsx("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(rn,{className:"h-3 w-3 text-red-500 mt-0.5 flex-shrink-0"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-xs font-medium text-red-800",children:"PII detected, this message is not allowed"})})]})}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx("textarea",{ref:x,value:h,onChange:$=>m($.target.value),onKeyDown:ee,placeholder:"Type a message...",rows:1,className:`flex-1 resize-none border rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:border-transparent overflow-y-auto transition-colors ${E?"border-red-300 focus:ring-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500"}`,style:{minHeight:"36px",maxHeight:"80px"}}),r.jsx("button",{onClick:Z,disabled:!h.trim()||!D||E&&N?.shouldBlock,className:`flex-shrink-0 p-1.5 sm:p-2 rounded-lg transition-colors ${E&&N?.shouldBlock?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":"Send message",title:E&&N?.shouldBlock?"Message contains PII and will be blocked":"Send message",children:r.jsx(Zr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})]})},iv=()=>{const{user:a,logout:n}=Fe(),i=ur(),[o,c]=w.useState(!1);if(!a)return null;const u=()=>{switch(a.role){case"patient":return[{path:"/patient/appointments",label:"My Appointments",icon:ct},{path:"/patient/profile",label:"My Profile",icon:Gt}];case"doctor":return[{path:"/doctor/dashboard",label:"Dashboard",icon:Gh},{path:"/doctor/profile",label:"My Profile",icon:Gt}];case"admin":return[{path:"/admin/dashboard",label:"Dashboard",icon:Gh}];default:return[]}},h=g=>i.pathname.startsWith(g),m=(g,x="")=>r.jsxs("button",{type:"button",onClick:()=>c(!0),className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:-translate-y-0.5 ${o?"text-primary-600 bg-primary-50 shadow-sm":"text-neutral-700 hover:text-primary-600 hover:bg-neutral-100"} ${x}`.trim(),children:[r.jsx(Hn,{className:"h-4 w-4"}),r.jsx("span",{children:"Chat with Agent"})]},g),p=(g=!1)=>{const x=[],v=u();return a.role==="patient"&&x.push(m(g?"chat-button-mobile":"chat-button-desktop")),v.forEach((j,N)=>{const b=j.icon;x.push(r.jsxs(et,{to:j.path,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium ${g?"whitespace-nowrap":""} transition-all duration-200 hover:-translate-y-0.5 ${h(j.path)?"text-primary-600 bg-primary-50 shadow-sm":"text-neutral-700 hover:text-primary-600 hover:bg-neutral-100"}`,children:[r.jsx(b,{className:"h-4 w-4"}),r.jsx("span",{children:j.label})]},j.path)),a.role==="doctor"&&N===0&&x.push(m(g?"chat-button-mobile-doctor":"chat-button-desktop-doctor",g?"whitespace-nowrap":""))}),x};return r.jsxs("div",{className:"min-h-screen bg-neutral-50 animate-fade-in",children:[r.jsx("header",{className:"bg-white shadow-soft border-b border-neutral-200 sticky top-0 z-40 backdrop-blur-sm",children:r.jsx("div",{className:"container-width section-padding",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs(et,{to:a.role==="patient"?"/patient/browse":a.role==="doctor"?"/doctor/dashboard":a.role==="admin"?"/admin/dashboard":a.role==="agent"?"/agent/dashboard":"/",className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"h-8 w-8 text-primary-600 transition-transform duration-200 hover:scale-110"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-success-500 rounded-full animate-pulse-soft"})]}),r.jsx("span",{className:"text-[26px] font-bold text-neutral-900 tracking-tight",children:"MediTour"})]})}),r.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:p()}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 animate-slide-up",children:[r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{className:"text-sm font-medium text-neutral-900",children:a.name}),r.jsx("span",{className:"text-xs text-neutral-500 capitalize",children:a.role})]}),r.jsx(et,{to:`/${a.role}/profile`,className:"h-10 w-10 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center shadow-medium transition-transform duration-200 hover:scale-105",children:r.jsx("span",{className:"text-sm font-semibold text-white",children:a.name.charAt(0).toUpperCase()})})]}),r.jsx("button",{onClick:n,className:"p-2 text-neutral-400 hover:text-error-600 transition-all duration-200 rounded-lg hover:bg-error-50",title:"Logout",children:r.jsx(zf,{className:"h-5 w-5"})})]})]})})}),r.jsx("div",{className:"md:hidden bg-white border-b border-neutral-200 shadow-sm",children:r.jsx("nav",{className:"flex overflow-x-auto py-2 px-4 space-x-4",children:p(!0)})}),r.jsx("main",{className:"container-width py-8 animate-slide-up",children:r.jsx(ic,{})}),a.role!=="doctor"&&!i.pathname.startsWith("/doctor")&&r.jsx(tv,{isCentered:i.pathname==="/patient/profile"}),o&&r.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-label":"Chat with agent",onClick:()=>c(!1),children:r.jsxs("div",{className:"modal-content max-w-3xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden",onClick:g=>g.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-neutral-200",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"p-2 rounded-full bg-primary-100 text-primary-600",children:r.jsx(Hn,{className:"h-5 w-5"})}),r.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Chat with Agent"})]}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"p-2 rounded-lg text-neutral-500 hover:text-neutral-800 hover:bg-neutral-100 transition-colors","aria-label":"Close chat",children:r.jsx(Ut,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-4 sm:p-6 bg-neutral-50 max-h-[80vh] overflow-y-auto",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-soft border border-neutral-200 p-4",children:r.jsx(sv,{})})})]})})]})},av=()=>{const[a,n]=w.useState(!1),i=[{name:"General Physician",icon:Bs,description:"Primary healthcare and general medical consultations",image:"https://images.pexels.com/photos/5149754/pexels-photo-5149754.jpeg",color:"from-blue-500 to-blue-600"},{name:"Gynaecology and Sexology",icon:Xr,description:"Women's health and reproductive care",image:"https://images.pexels.com/photos/5982467/pexels-photo-5982467.jpeg",color:"from-pink-500 to-rose-600"},{name:"Dermatology",icon:Yr,description:"Skin, hair, and nail conditions",image:"https://tse2.mm.bing.net/th/id/OIP.CiMV-pDItQHRWwTD-xoQWwHaEZ?w=555&h=330&rs=1&pid=ImgDetMain&o=7&rm=3",color:"from-orange-500 to-amber-600"},{name:"Psychiatry and Psychology",icon:Qh,description:"Mental health and behavioral disorders",image:"https://images.pexels.com/photos/19825313/pexels-photo-19825313.jpeg",color:"from-purple-500 to-indigo-600"},{name:"Gastroenterology",icon:Yr,description:"Digestive system disorders",image:"https://aashrayahospitalgadag.whitecoats.com/wp-content/uploads/sites/66/2023/07/Colon-Surgery.jpg",color:"from-green-500 to-emerald-600"},{name:"Pediatrics",icon:Ay,description:"Children's healthcare",image:"https://images.pexels.com/photos/8316306/pexels-photo-8316306.jpeg",color:"from-yellow-500 to-orange-600"},{name:"ENT",icon:Yr,description:"Ear, nose, and throat conditions",image:"https://img.freepik.com/premium-vector/ent-doctor-logo-template-ear-nose-throat-doctor-clinic-mouth-health-otolaryngology-illustration_41737-1016.jpg?w=2000",color:"from-teal-500 to-cyan-600"},{name:"Urology and Nephrology",icon:Yr,description:"Urinary system and kidney care",image:"https://kidneyandurology.org/wp-content/uploads/2023/07/Preventive-Nephrology.png",color:"from-blue-600 to-indigo-700"},{name:"Orthopedics",icon:Oy,description:"Bone and joint disorders",image:"https://tse4.mm.bing.net/th/id/OIP.qG33yqxpX2N-pGiHXV6t7QHaE8?rs=1&pid=ImgDetMain&o=7&rm=3",color:"from-gray-600 to-slate-700"},{name:"Neurology",icon:Qh,description:"Brain and nervous system disorders",image:"https://tse4.mm.bing.net/th/id/OIP.JfzoenJyRtHss-jdRt5BnQHaDt?w=1920&h=960&rs=1&pid=ImgDetMain&o=7&rm=3",color:"from-violet-500 to-purple-600"},{name:"Cardiology",icon:Xr,description:"Heart and cardiovascular conditions",image:"https://tse3.mm.bing.net/th/id/OIP.0T2w8g1U6JJ6jIVVMYkXvQHaD4?w=1200&h=630&rs=1&pid=ImgDetMain&o=7&rm=3",color:"from-red-500 to-rose-600"},{name:"Diabetology",icon:Xy,description:"Nutrition counseling and diabetes care",image:"https://tse4.mm.bing.net/th/id/OIP.R4QikDolCpYpZpcOcn631QHaEK?rs=1&pid=ImgDetMain&o=7&rm=3",color:"from-lime-500 to-green-600"},{name:"Ophthalmology",icon:Fs,description:"Eye and vision care",image:"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJvYXV0aCI6eyJjbGllbnRfaWQiOiJmcm9udGlmeS1leHBsb3JlciJ9LCJwYXRoIjoiaWhoLWhlYWx0aGNhcmUtYmVyaGFkXC9hY2NvdW50c1wvYzNcLzQwMDA2MjRcL3Byb2plY3RzXC8yMDlcL2Fzc2V0c1wvMGNcLzMzNzg0XC8zOTQxMTExY2JmZTVkNTlkYmE5MGVkMWQ3NDk3ZGM2Zi0xNjQ2OTI0NzMxLmpwZyJ9:ihh-healthcare-berhad:O6LgxuC6K0djc4JcxeU5q-K8h_Xk2yWXVbxOxobSWOU",color:"from-sky-500 to-blue-600"},{name:"Dentistry",icon:Hf,description:"Oral and dental health",image:"https://rosedentalnashua.com/wp-content/uploads/2020/08/AdobeStock_197373009-scaled.jpeg",color:"from-cyan-500 to-teal-600"},{name:"Pulmonology",icon:Gy,description:"Lung and respiratory conditions",image:"https://floridalungdoctors.com/wp-content/uploads/2018/04/iStock-675674414-1024x683.jpg",color:"from-emerald-500 to-green-600"},{name:"Oncology",icon:Zy,description:"Cancer diagnosis and treatment",image:"https://dcjournal.com/wp-content/uploads/2023/03/bigstock-Pulmonology-Medicine-Concept-460989283-e1679862023206.jpg",color:"from-indigo-600 to-purple-700"},{name:"Physiotherapy",icon:$y,description:"Physical therapy and rehabilitation",image:"https://www.sagarclinic.in/wp-content/uploads/2019/12/Physio-at-home-5-scaled.jpg",color:"from-orange-600 to-red-600"},{name:"General Surgery",icon:Ky,description:"Surgical procedures and interventions",image:"https://tse4.mm.bing.net/th/id/OIP.aLy1a9b2x7ursFkNCSIx2QHaHa?rs=1&pid=ImgDetMain&o=7&rm=3s",color:"from-slate-600 to-gray-700"},{name:"Veterinary",icon:Vy,description:"Animal healthcare",image:"https://www.penangveterinarycentre.com/wp-content/uploads/2024/03/Career_desktop.jpg",color:"from-amber-500 to-yellow-600"}],o=()=>r.jsx("div",{className:"modal-backdrop",onClick:()=>n(!1),children:r.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 p-8 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-black mb-2",children:"Medical Specialties"}),r.jsx("p",{className:"text-primary-100 text-lg font-medium",children:"Comprehensive healthcare services across all medical disciplines"})]}),r.jsx("button",{onClick:()=>n(!1),className:"text-white/80 hover:text-white p-3 rounded-full hover:bg-white/10 transition-all duration-200",children:r.jsx(Ut,{className:"h-8 w-8"})})]})}),r.jsxs("div",{className:"p-8 overflow-y-auto max-h-[70vh]",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((c,u)=>{const h=c.icon;return r.jsxs("div",{className:"category-card group animate-slide-up",style:{animationDelay:`${u*.05}s`},children:[r.jsxs("div",{className:"relative mb-4 overflow-hidden rounded-xl",children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${c.color} opacity-80`}),r.jsx("div",{className:"absolute top-3 right-3 bg-white/90 backdrop-blur-sm rounded-full p-2",children:r.jsx(h,{className:"h-5 w-5 text-gray-700"})})]}),r.jsx("div",{children:r.jsx("img",{src:c.image,alt:c.name,className:"w-full h-32 object-cover transition-transform duration-300 group-hover:scale-110"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors duration-200",children:c.name}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:c.description})]})]},c.name)})}),r.jsxs("div",{className:"mt-12 text-center bg-gradient-to-r from-primary-50 to-secondary-50 rounded-3xl p-8 border border-primary-200",children:[r.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Connect with Healthcare Experts?"}),r.jsx("p",{className:"text-lg text-gray-600 mb-6 max-w-2xl mx-auto",children:"Our platform connects you with qualified medical professionals across all specialties. Get the care you deserve, when you need it."}),r.jsxs(et,{to:"/login",onClick:()=>n(!1),className:"btn-primary text-lg px-8 py-4",children:[r.jsx("span",{children:"Start Your Healthcare Journey"}),r.jsx(Al,{className:"w-6 h-6 ml-2"})]})]})]})]})});return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50",children:[r.jsxs("div",{className:"container-width section-padding py-20",children:[r.jsxs("div",{className:"text-center mb-20",children:[r.jsxs("div",{className:"inline-flex items-center space-x-3 mb-8 animate-slide-up",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"h-16 w-16 text-primary-600"}),r.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-success-500 rounded-full animate-pulse-soft flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),r.jsx("span",{className:"text-5xl font-black text-gray-900 tracking-tight",children:"MediTour"})]}),r.jsxs("h1",{className:"text-6xl lg:text-7xl font-black text-gray-900 mb-8 animate-slide-up leading-tight",style:{animationDelay:"0.1s"},children:["Your Health,",r.jsx("br",{}),r.jsx("span",{className:"text-gradient",children:"Our Priority"})]}),r.jsx("p",{className:"text-xl lg:text-2xl text-gray-600 mb-12 max-w-4xl mx-auto leading-relaxed animate-slide-up font-medium",style:{animationDelay:"0.2s"},children:"Connect with qualified healthcare professionals from the comfort of your home. Book appointments, get consultations, and manage your health journey seamlessly."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center animate-slide-up",style:{animationDelay:"0.3s"},children:[r.jsxs(et,{to:"/login",className:"btn-primary text-lg px-10 py-5 hover:text-white",children:["Get Started Today",r.jsx(Al,{className:"w-6 h-6 ml-2"})]}),r.jsx("button",{onClick:()=>n(!0),className:"btn-secondary text-lg px-10 py-5",children:"Explore Specialties"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-20",children:[r.jsxs("div",{className:"professional-card text-center animate-slide-up",style:{animationDelay:"0.4s"},children:[r.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:r.jsx(Qy,{className:"w-10 h-10 text-white"})}),r.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Secure & Private"}),r.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Your health data is protected with enterprise-grade security and privacy measures that exceed industry standards."})]}),r.jsxs("div",{className:"professional-card text-center animate-slide-up",style:{animationDelay:"0.5s"},children:[r.jsx("div",{className:"bg-gradient-to-br from-success-500 to-success-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:r.jsx(Jt,{className:"w-10 h-10 text-white"})}),r.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Expert Doctors"}),r.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Access to a network of qualified and experienced healthcare professionals across 19+ medical specialties."})]}),r.jsxs("div",{className:"professional-card text-center animate-slide-up",style:{animationDelay:"0.6s"},children:[r.jsx("div",{className:"bg-gradient-to-br from-secondary-500 to-secondary-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:r.jsx(Ze,{className:"w-10 h-10 text-white"})}),r.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900",children:"24/7 Available"}),r.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Get medical consultations and support whenever you need it, with flexible scheduling that fits your lifestyle."})]})]}),r.jsxs("div",{className:"professional-card text-center animate-slide-up bg-gradient-to-r from-primary-600 to-secondary-600 text-white border-0",style:{animationDelay:"0.7s"},children:[r.jsx("h2",{className:"text-4xl lg:text-5xl font-black text-white mb-6",children:"Ready to Take Control of Your Health?"}),r.jsx("p",{className:"text-xl text-primary-100 mb-10 max-w-3xl mx-auto leading-relaxed",children:"Join thousands of patients who trust us with their healthcare needs. Experience the future of healthcare today."}),r.jsxs(et,{to:"/login",className:"inline-flex items-center space-x-3 bg-white text-primary-600 px-12 py-5 rounded-2xl font-bold text-xl transition-all duration-300 hover:bg-primary-50 hover:scale-105 shadow-lg hover:shadow-xl",children:[r.jsx("span",{children:"Start Your Journey"}),r.jsx(Al,{className:"w-6 h-6"})]})]})]}),a&&r.jsx(o,{})]})},ov=()=>{const[a,n]=w.useState(""),[i,o]=w.useState(""),[c,u]=w.useState(""),[h,m]=w.useState(!1),[p,g]=w.useState(!1),[x,v]=w.useState(!1),[j,N]=w.useState(null),{login:b}=Fe(),E=async T=>{T.preventDefault(),u(""),m(!0);try{await b(a,i)?(localStorage.setItem("openChatDockAfterLogin","1"),v(!0),setTimeout(()=>g(!0),300)):u("Invalid email or password")}catch{u("An error occurred during login")}finally{m(!1)}},S=async T=>{N(T),u(""),m(!0);const D={patient:{email:"patient@demo.com",password:"demo123"},doctor:{email:"doctor@demo.com",password:"demo123"},admin:{email:"admin@meditour.com",password:"admin123"}};let A=null;if(T==="agent"){const q=JSON.parse(localStorage.getItem("users")||"[]").find(Z=>Z.role==="agent");if(!q){u("No agent account found. Please create an agent account first."),m(!1);return}A={email:q.email,password:"demo123"}}else A=D[T];if(!A){u("Demo credentials are unavailable. Please try again later."),m(!1);return}n(A.email),o(A.password);try{await b(A.email,A.password)?(localStorage.setItem("openChatDockAfterLogin","1"),v(!0),setTimeout(()=>g(!0),300)):u(`Demo ${T} account not found. Please create an account first.`)}catch{u("An error occurred during demo login")}finally{m(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-neutral-50 to-secondary-50 flex items-center justify-center py-12 section-padding animate-fade-in",children:[!p&&r.jsxs("div",{id:"auth-section",className:`max-w-md w-full space-y-8 transition-opacity duration-300 ${x?"opacity-0 pointer-events-none":"opacity-100"}`,...x?{"aria-hidden":!0}:{},children:[r.jsxs("div",{className:"text-center",children:[r.jsxs(et,{to:"/",className:"flex items-center justify-center space-x-2 mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xr,{className:"h-10 w-10 text-primary-600 transition-transform duration-200 hover:scale-110"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-success-500 rounded-full animate-pulse-soft"})]}),r.jsx("span",{className:"text-[36px] font-bold text-neutral-900 tracking-tight",children:"MediTour"})]}),r.jsx("h2",{className:"text-3xl font-bold text-neutral-900 mb-2 animate-slide-up",children:j==="agent"?"Agent Login":j?`${j.charAt(0).toUpperCase()+j.slice(1)} Login`:"Welcome back"}),r.jsx("p",{className:"text-neutral-600 animate-slide-up",style:{animationDelay:"0.1s"},children:"Sign in to your account to continue"})]}),r.jsxs("div",{className:"card p-8 animate-slide-up",style:{animationDelay:"0.2s"},children:[c&&r.jsxs("div",{className:"mb-4 bg-error-50 border border-error-200 text-error-600 px-4 py-3 rounded-lg flex items-center animate-scale-in",children:[r.jsx(fc,{className:"h-5 w-5 mr-2 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:c})]}),r.jsxs("form",{onSubmit:E,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ff,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{id:"email",type:"email",value:a,onChange:T=>n(T.target.value),required:!0,className:"form-input pl-10",tabIndex:x?-1:0,placeholder:"Enter your email"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ql,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:T=>o(T.target.value),required:!0,className:"form-input pl-10",tabIndex:x?-1:0,placeholder:"Enter your password"})]})]}),r.jsx("button",{type:"submit",disabled:h,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",tabIndex:x?-1:0,children:h?"Signing in...":"Sign In"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-neutral-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-neutral-500",children:"Or try demo accounts"})})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-2",children:[r.jsx("button",{onClick:()=>S("patient"),disabled:h,className:"btn-secondary text-xs py-2 disabled:opacity-50",children:"Patient Demo"}),r.jsx("button",{onClick:()=>S("doctor"),disabled:h,className:"btn-secondary text-xs py-2 disabled:opacity-50",children:"Doctor Demo"}),r.jsx("button",{onClick:()=>S("agent"),disabled:h,className:"btn-secondary text-xs py-2 disabled:opacity-50",children:"Agent Demo"}),r.jsx("button",{onClick:()=>S("admin"),disabled:h,className:"btn-secondary text-xs py-2 disabled:opacity-50",children:"Admin Demo"})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-neutral-600",children:["Don't have an account?"," ",r.jsx(et,{to:"/signup",className:"text-primary-600 hover:text-primary-700 font-medium transition-colors duration-200",children:"Sign up here"})]})})]})]}),p&&r.jsx("div",{className:"text-neutral-600 text-sm opacity-70",children:"Loading your workspace..."})]})},lv=()=>{const[a,n]=w.useState("patient"),[i,o]=w.useState({name:"",email:"",password:"",confirmPassword:"",age:"",sex:"",category:"",bio:"",experience:"",location:"",contactNumber:"",agentExperience:"",preferredRegion:""}),[c,u]=w.useState(""),[h,m]=w.useState(!1),[p,g]=w.useState(!1),[x,v]=w.useState(!1),{signup:j}=Fe(),{categories:N}=$t(),b=S=>{o(T=>({...T,[S.target.name]:S.target.value}))},E=async S=>{if(S.preventDefault(),u(""),i.password!==i.confirmPassword){u("Passwords do not match");return}if(i.password.length<6){u("Password must be at least 6 characters long");return}if(a==="doctor"&&!i.category){u("Please select a medical specialty");return}m(!0);try{const T={name:i.name,email:i.email,password:i.password,role:a};a==="patient"?(i.age&&(T.age=parseInt(i.age)),i.sex&&(T.sex=i.sex)):a==="doctor"?(T.category=i.category,T.bio=i.bio,T.experience=i.experience,T.isApproved=!1):a==="agent"&&(T.location=i.location,T.contactNumber=i.contactNumber,T.agentExperience=i.agentExperience,T.preferredRegion=i.preferredRegion),await j(T)?(localStorage.setItem("openChatDockAfterLogin","1"),v(!0),setTimeout(()=>g(!0),300)):u("An account with this email already exists")}catch{u("An error occurred during signup")}finally{m(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[!p&&r.jsxs("div",{id:"auth-section",className:`max-w-md w-full space-y-8 transition-opacity duration-300 ${x?"opacity-0 pointer-events-none":"opacity-100"}`,...x?{"aria-hidden":!0}:{},children:[r.jsxs("div",{className:"text-center",children:[r.jsxs(et,{to:"/",className:"flex items-center justify-center space-x-2 mb-6",children:[r.jsx(Xr,{className:"h-10 w-10 text-blue-600"}),r.jsx("span",{className:"text-[36px] font-bold text-gray-900",children:"MediTour"})]}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create your account"}),r.jsx("p",{className:"text-gray-600",children:"Join our healthcare community today"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>n("patient"),className:`flex items-center justify-center px-4 py-3 rounded-md font-medium text-sm transition-colors duration-200 ${a==="patient"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Patient"]}),r.jsxs("button",{type:"button",onClick:()=>n("doctor"),className:`flex items-center justify-center px-4 py-3 rounded-md font-medium text-sm transition-colors duration-200 ${a==="doctor"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Doctor"]}),r.jsxs("button",{type:"button",onClick:()=>n("agent"),className:`flex items-center justify-center px-4 py-3 rounded-md font-medium text-sm transition-colors duration-200 ${a==="agent"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(My,{className:"h-4 w-4 mr-2"}),"Agent"]})]})}),c&&r.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md flex items-center",children:[r.jsx(fc,{className:"h-5 w-5 mr-2"}),r.jsx("span",{className:"text-sm",children:c})]}),r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(Gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"name",name:"name",type:"text",value:i.name,onChange:b,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Enter your full name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ff,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"email",name:"email",type:"email",value:i.email,onChange:b,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Enter your email"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ql,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"password",name:"password",type:"password",value:i.password,onChange:b,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Create a password"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ql,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:i.confirmPassword,onChange:b,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Confirm your password"})]})]}),a==="patient"&&r.jsx(r.Fragment,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 mb-2",children:"Age (Optional)"}),r.jsx("input",{id:"age",name:"age",type:"number",value:i.age,onChange:b,min:"1",max:"120",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Age"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"sex",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sex (Optional)"}),r.jsxs("select",{id:"sex",name:"sex",value:i.sex,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]})}),a==="doctor"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:["Medical Specialty ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"category",name:"category",value:i.category,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,children:[r.jsx("option",{value:"",children:"Select your specialty"}),N.map(S=>r.jsx("option",{value:S.slug,children:S.name},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"experience",className:"block text-sm font-medium text-gray-700 mb-2",children:"Years of Experience"}),r.jsx("input",{id:"experience",name:"experience",type:"text",value:i.experience,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"e.g., 5 years"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Brief Bio"}),r.jsx("textarea",{id:"bio",name:"bio",value:i.bio,onChange:b,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Tell patients about your background and expertise..."})]}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Note:"})," Doctor accounts require admin approval before you can accept appointments. You'll be notified once your account is approved."]})})]}),a==="agent"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),r.jsx("input",{id:"location",name:"location",type:"text",value:i.location,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Enter your location"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),r.jsx("input",{id:"contactNumber",name:"contactNumber",type:"tel",value:i.contactNumber,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Enter your contact number"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"agentExperience",className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience (in years)"}),r.jsx("input",{id:"agentExperience",name:"agentExperience",type:"number",value:i.agentExperience,onChange:b,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Enter years of experience"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"preferredRegion",className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Region / Area"}),r.jsx("input",{id:"preferredRegion",name:"preferredRegion",type:"text",value:i.preferredRegion,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",tabIndex:x?-1:0,placeholder:"Enter your preferred region or area"})]})]}),r.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",tabIndex:x?-1:0,children:h?"Creating Account...":"Create Account"})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",r.jsx(et,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in here"})]})})]})]}),p&&r.jsx("div",{className:"text-neutral-600 text-sm opacity-70",children:"Setting up your workspace..."})]})},cv=()=>{const{categories:a}=$t();console.log(a);const[n,i]=w.useState("grid");return r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Medical Specialties"}),r.jsx("p",{className:"text-gray-600",children:"Find and book appointments with verified doctors across various specialties"})]}),r.jsx("div",{className:"mb-8 flex justify-end",children:r.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-lg shadow-sm p-2",children:[r.jsx("button",{onClick:()=>i("grid"),className:`p-2 rounded-md transition-colors duration-200 ${n==="grid"?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:r.jsx(Fy,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>i("list"),className:`p-2 rounded-md transition-colors duration-200 ${n==="list"?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:r.jsx(Hy,{className:"h-5 w-5"})})]})}),a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Jy,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No specialties available"}),r.jsx("p",{className:"text-gray-500",children:"Please check back later"})]}):r.jsx("div",{className:n==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:a.map(o=>r.jsx("div",{className:`relative bg-white h-96 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-blue-400 group overflow-hidden cursor-pointer ${n==="list"?"flex items-center p-6":"p-6"}`,children:r.jsxs("div",{className:n==="list"?"flex-1":"",children:[o.image&&r.jsx("img",{src:o.image,alt:o.name,className:"w-full h-48 object-cover rounded-lg mb-4 group-hover:scale-105 transition-transform duration-500"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors duration-300",children:o.name}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-6 line-clamp-2",children:o.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-blue-600 group-hover:text-blue-700 transition-colors duration-200",children:"Browse Doctors"}),r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-600 transition-all duration-300",children:r.jsx("div",{className:"w-2.5 h-2.5 bg-blue-600 group-hover:bg-white rounded-full transform group-hover:scale-125 transition-transform duration-300"})})]})]})},o.id))}),a.length>0&&r.jsx("div",{className:"mt-12 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to Get Started?"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:["Choose from ",a.length," medical specialties and book appointments with verified doctors"]}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-gray-600",children:"Verified Doctors"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-gray-600",children:"Secure Messaging"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),r.jsx("span",{className:"text-gray-600",children:"Easy Booking"})]})]})]})})]})},uv=({doctor:a,onClose:n,onConfirm:i})=>{const[o,c]=w.useState(""),[u,h]=w.useState(""),[m,p]=w.useState(""),[g,x]=w.useState(""),[v,j]=w.useState(!0),[N,b]=w.useState(!0),E=[];for(let q=0;q<=13;q++){const Z=new Date;Z.setDate(Z.getDate()+q),E.push(Z)}const S=["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],D=(()=>{if(!o)return S;const q=new Date(o),Z=new Date;if(q.toDateString()===Z.toDateString()){const ee=Z.getHours(),$=Z.getMinutes();return S.filter(F=>{const[B,J]=F.split(":").map(Number),ue=B*60+J,ge=ee*60+$;return ue>ge+30})}return S})(),A=()=>{if(!o||!u)return;const[q,Z]=u.split(":").map(Number),ee=new Date(o);ee.setHours(q,Z,0,0),i(ee,{bloodPressure:v&&m||void 0,temperature:N&&g||void 0})},O=q=>q.toISOString().split("T")[0];return r.jsx("div",{className:"modal-overlay flex items-center justify-center p-4",children:r.jsxs("div",{className:"modal-content bg-white rounded-2xl shadow-strong max-w-md w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-neutral-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Book Appointment"}),r.jsx("button",{onClick:n,className:"text-neutral-400 hover:text-neutral-600 p-1 rounded-lg hover:bg-neutral-100 transition-all duration-200",children:r.jsx(Ut,{className:"h-5 w-5"})})]}),r.jsxs("p",{className:"text-sm text-neutral-600 mt-1",children:["Dr. ",a.name]})]}),r.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"form-label",children:[r.jsx(ct,{className:"h-4 w-4 inline mr-1"}),"Select Date"]}),r.jsx("input",{type:"date",value:o,onChange:q=>{c(q.target.value),h("")},min:O(new Date),max:O(E[E.length-1]),className:"form-input"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Ze,{className:"h-4 w-4 inline mr-1"}),"Select Time"]}),o?D.length===0?r.jsx("p",{className:"text-sm text-error-600 py-4",children:"No available time slots for today. Please select a future date."}):r.jsx("div",{className:"grid grid-cols-3 gap-2",children:D.map(q=>r.jsx("button",{onClick:()=>h(q),className:`px-3 py-2 text-sm border rounded-lg transition-all duration-200 hover:-translate-y-0.5 ${u===q?"bg-primary-600 text-white border-primary-600 shadow-medium":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-50 hover:border-primary-300"}`,children:q},q))}):r.jsx("p",{className:"text-sm text-neutral-500 py-4",children:"Please select a date first"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Yr,{className:"h-4 w-4 inline mr-1"}),"Current BP"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"bp-option",checked:v,onChange:()=>j(!0),className:"mr-2 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"I know my BP"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"bp-option",checked:!v,onChange:()=>j(!1),className:"mr-2 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"Don't know"})]})]}),r.jsx("input",{type:"text",value:m,onChange:q=>p(q.target.value),disabled:!v,placeholder:"e.g., 120/80",className:"form-input disabled:bg-neutral-100 disabled:text-neutral-500"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Yy,{className:"h-4 w-4 inline mr-1"}),"Current Temperature"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"temp-option",checked:N,onChange:()=>b(!0),className:"mr-2 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"I know my temperature"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"temp-option",checked:!N,onChange:()=>b(!1),className:"mr-2 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"Don't know"})]})]}),r.jsx("input",{type:"text",value:g,onChange:q=>x(q.target.value),disabled:!N,placeholder:"e.g., 98.6F",className:"form-input disabled:bg-neutral-100 disabled:text-neutral-500"})]})]})]})}),r.jsx("div",{className:"p-6 border-t border-neutral-200",children:r.jsx("button",{onClick:A,disabled:!o||!u||D.length===0,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:"Book Appointment"})})]})})},dv=({doctorName:a,onClose:n})=>(Lt.useEffect(()=>{const i=setTimeout(()=>{n()},5e3);return()=>clearTimeout(i)},[n]),r.jsx("div",{className:"fixed top-4 right-4 bg-green-50 border border-green-200 rounded-md p-4 shadow-lg z-50 max-w-sm",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Bn,{className:"h-5 w-5 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-green-800",children:"Appointment Sent!"}),r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Appointment sent to Dr. ",a,". You will be notified once it's accepted."]})]}),r.jsx("button",{onClick:n,className:"text-green-400 hover:text-green-600",children:r.jsx(Ut,{className:"h-4 w-4"})})]})})),hv=()=>{const{slug:a}=uf(),{categories:n,createAppointment:i,getDoctors:o,appointments:c,updateAppointment:u}=$t(),{user:h}=Fe(),[m,p]=w.useState(null),[g,x]=w.useState(!1),[v,j]=w.useState(!1),[N,b]=w.useState(""),[E,S]=w.useState(!1),[T,D]=w.useState(null),[A,O]=w.useState(""),[q,Z]=w.useState(5),[ee,$]=w.useState(null);w.useEffect(()=>{try{const H=localStorage.getItem("doctorAvailabilityTiming");if(H){const ae=JSON.parse(H);$(ae)}}catch(H){console.error("Error loading doctor availability:",H)}},[]);const F=n.find(H=>H.slug===a),J=o().filter(H=>H.category===a&&H.isApproved).map(H=>({...H,rating:4.5+Math.random()*.5,totalReviews:Math.floor(Math.random()*200)+50,nextAvailableSlot:new Date(Date.now()+(Math.floor(Math.random()*7)+1)*24*60*60*1e3),location:"Medical Center"})),ue=H=>{if(p(H),h){const ae=c?.find(V=>V.patientId===h.id&&V.status==="completed"&&!V.patientReview&&!V.patientRating);if(ae){D(ae.id),S(!0);return}}x(!0)},ge=(H,ae)=>{!m||!h||(i({patientId:h.id,doctorId:m.id,patientName:h.name,doctorName:m.name,doctorCategory:F?.name||"",datetime:H,status:"pending",patientVitals:ae}),b(m.name),x(!1),p(null),j(!0))},be=()=>{!T||!h||(u(T,{patientReview:A.trim(),patientRating:q}),S(!1),D(null),O(""),Z(5),x(!0))},C=H=>{const ae=new Date,V=Math.ceil((H.getTime()-ae.getTime())/(1e3*60*60*24));return V===1?"Tomorrow":V===2?"In 2 days":V<=7?`In ${V} days`:H.toLocaleDateString()};return F?r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs(et,{to:"/patient/browse",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4 transition-colors duration-200",children:[r.jsx(ja,{className:"h-4 w-4 mr-2"}),"Back to Browse"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:F.name}),r.jsx("p",{className:"text-gray-600",children:F.description})]}),r.jsx("div",{className:"mb-8 bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{children:"Sort by"}),r.jsx("option",{children:"Next Available"}),r.jsx("option",{children:"Rating"}),r.jsx("option",{children:"Experience"})]}),r.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{children:"All Locations"}),r.jsx("option",{children:"Downtown Medical Center"}),r.jsx("option",{children:"City Health Clinic"}),r.jsx("option",{children:"Riverside Medical Group"})]})]})}),r.jsx("div",{className:"space-y-6",children:J.map(H=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Gt,{className:"h-8 w-8 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:H.name}),ee&&(ee.morning||ee.evening)&&r.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Available: "}),ee.morning&&r.jsx("span",{children:ee.morning}),ee.morning&&ee.evening&&r.jsx("span",{children:", "}),ee.evening&&r.jsx("span",{children:ee.evening})]}),r.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(mc,{className:"h-4 w-4 text-yellow-500 fill-current"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:H.rating}),r.jsxs("span",{className:"text-sm text-gray-500",children:["(",H.totalReviews," reviews)"]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[H.experience," experience"]})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:H.bio}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Wy,{className:"h-4 w-4"}),r.jsx("span",{children:H.location})]}),H.degrees&&r.jsx("div",{className:"flex items-center space-x-1",children:r.jsx("span",{children:H.degrees})}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsxs("span",{children:["Next available: ",C(H.nextAvailableSlot)]})]})]})]})]})}),r.jsx("div",{className:"mt-4 lg:mt-0 lg:ml-6",children:r.jsx("button",{onClick:()=>ue(H),className:"w-full lg:w-auto bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 transition-colors duration-200",children:"Book Appointment"})})]})},H.id))}),J.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Gt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No doctors available"}),r.jsx("p",{className:"text-gray-500",children:"There are currently no approved doctors in this specialty."})]}),g&&m&&r.jsx(uv,{doctor:m,onClose:()=>x(!1),onConfirm:ge}),E&&r.jsx("div",{className:"modal-overlay flex items-center justify-center p-4",children:r.jsxs("div",{className:"modal-content bg-white rounded-2xl shadow-strong max-w-md w-full overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-neutral-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Review your last appointment"}),r.jsx("button",{onClick:()=>S(!1),className:"text-neutral-400 hover:text-neutral-600",children:r.jsx(Ut,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Rating"}),r.jsx("select",{value:q,onChange:H=>Z(Number(H.target.value)),className:"form-input",children:[5,4,3,2,1].map(H=>r.jsxs("option",{value:H,children:[H," Star",H>1?"s":""]},H))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Write a short review"}),r.jsx("textarea",{value:A,onChange:H=>O(H.target.value),rows:4,placeholder:"How was your experience?",className:"form-input"})]})]}),r.jsxs("div",{className:"p-6 border-t border-neutral-200 flex items-center justify-end space-x-3",children:[r.jsx("button",{onClick:()=>S(!1),className:"btn-ghost px-4 py-2",children:"Not now"}),r.jsx("button",{onClick:be,disabled:!A.trim(),className:"btn-primary px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit & Continue Booking"})]})]})}),v&&r.jsx(dv,{doctorName:N,onClose:()=>j(!1)})]}):r.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category not found"}),r.jsx(et,{to:"/patient/browse",className:"text-blue-600 hover:text-blue-700",children:" Back to Browse"})]})})},Wf=({attachment:a,isOwnMessage:n=!1})=>{const[i,o]=w.useState(!1),[c,u]=w.useState(!1),h=()=>a.fileType.startsWith("image/")?r.jsx(By,{className:"h-5 w-5"}):a.fileType==="application/pdf"?r.jsx(or,{className:"h-5 w-5"}):r.jsx(Uy,{className:"h-5 w-5"}),m=N=>N<1024?N+" B":N<1024*1024?(N/1024).toFixed(1)+" KB":(N/(1024*1024)).toFixed(1)+" MB",p=()=>`data:${a.fileType};base64,${a.fileData}`,g=()=>{const N=p(),b=document.createElement("a");b.href=N,b.download=a.fileName,document.body.appendChild(b),b.click(),document.body.removeChild(b)},x=()=>{o(!0),u(!1)},v=a.fileType.startsWith("image/"),j=a.fileType==="application/pdf";return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mt-2 p-3 rounded-lg border ${n?"bg-white/20 border-white/30 backdrop-blur-sm":"bg-white border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`flex-shrink-0 ${n?"text-white":"text-gray-600"}`,children:h()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium truncate ${n?"text-white":"text-gray-900"}`,children:a.fileName}),r.jsx("p",{className:`text-xs ${n?"text-white/80":"text-gray-500"}`,children:m(a.fileSize)})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[(v||j)&&r.jsx("button",{onClick:x,className:`p-1.5 rounded transition-colors ${n?"text-white hover:bg-white/20":"text-gray-700 hover:bg-gray-100"}`,"aria-label":"View file",title:"View file",children:r.jsx(Fs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:g,className:`p-1.5 rounded transition-colors ${n?"text-white hover:bg-white/20":"text-gray-700 hover:bg-gray-100"}`,"aria-label":"Download file",title:"Download file",children:r.jsx(ca,{className:"h-4 w-4"})})]})]})}),i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>o(!1),children:r.jsxs("div",{className:"bg-white rounded-lg max-w-4xl max-h-[90vh] w-full flex flex-col",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate flex-1",children:a.fileName}),r.jsx("button",{onClick:()=>o(!1),className:"ml-4 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close preview",children:r.jsx(Ut,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center",children:[v&&!c?r.jsx("img",{src:p(),alt:a.fileName,className:"max-w-full max-h-[70vh] object-contain",onError:()=>u(!0)}):j?r.jsx("iframe",{src:p(),className:"w-full h-[70vh] border-0",title:a.fileName,onError:()=>u(!0)}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500",children:"Preview not available for this file type."}),r.jsxs("button",{onClick:g,className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(ca,{className:"h-4 w-4 mr-2"}),"Download File"]})]}),c&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"Failed to load preview."}),r.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(ca,{className:"h-4 w-4 mr-2"}),"Download File"]})]})]}),r.jsx("div",{className:"p-4 border-t flex justify-end",children:r.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(ca,{className:"h-4 w-4 mr-2"}),"Download"]})})]})})]})},Vf=({appointmentId:a,onClose:n})=>{const{user:i}=Fe(),o=i?.id??null,{appointments:c,getAppointmentMessages:u,sendMessage:h,markMessagesAsRead:m}=$t(),[p,g]=w.useState(""),[x,v]=w.useState([]),[j,N]=w.useState("doctor"),[b,E]=w.useState([]),[S,T]=w.useState(null),D=w.useRef(null),A=w.useRef(null),O=c.find(_=>_.id===a),[q,Z]=w.useState(()=>{try{return localStorage.getItem("doctorAvailability")==="online"}catch{return!1}});w.useEffect(()=>{const _=()=>{try{Z(localStorage.getItem("doctorAvailability")==="online")}catch{}},I=setInterval(_,3e3),Y=re=>{re.key==="doctorAvailability"&&_()};return window.addEventListener("storage",Y),()=>{clearInterval(I),window.removeEventListener("storage",Y)}},[]);const{checkMessage:ee,isServiceHealthy:$}=Na(o,"high"),[F,B]=w.useState(null),[J,ue]=w.useState(!1),ge=w.useRef(0),be=_=>{const I=/\b\d{10}\b/,Y=/[\w.-]+@[\w.-]+\.[A-Za-z]{2,}/,re=/(road|street|st\.?|colony|sector|city|avenue|ave\.?|block|lane)/i;return I.test(_)||Y.test(_)||re.test(_)?" [Hidden for privacy]":_},C=["Thanks for sharing. Ill review your report and get back shortly.","Please take this medication twice daily.","Upload your latest blood test report if available.","Please monitor your temperature and stay hydrated."],H=()=>{if(!O)return;const _=C[Math.floor(Math.random()*C.length)],I={id:crypto.randomUUID(),appointmentId:O.id,senderId:O.doctorId,senderRole:"doctor",content:_,timestamp:new Date,read:!1};v(Y=>[...Y,I])};w.useEffect(()=>{if(a&&i){const _=u(a);v(_),m(a,i.id)}},[a,i,u,m]),w.useEffect(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[x,b,j,J]),w.useEffect(()=>{if(j==="agent"&&b.length===0&&O){const _=[{id:crypto.randomUUID(),sender:"agent",content:" Hello! Im your local support agent. I can help you find nearby hospitals, clinics, or travel options.",timestamp:new Date}],I=[O.patientName||"Patient","Your city",O.doctorCategory||"General","3000 Budget"];_.push({id:crypto.randomUUID(),sender:"agent",content:`Patient Details: ${I.join(" | ")}`,timestamp:new Date}),E(_)}},[j,b.length,O]),w.useEffect(()=>{if(!p.trim()||!$){B(null),ue(!1);return}const _=++ge.current,I=setTimeout(async()=>{try{const Y=await ee(p);if(_!==ge.current)return;B(Y),ue(!!(Y&&(Y.shouldBlock||Y.violations&&Y.violations.length>0)))}catch(Y){console.error("PII check error:",Y),B(null),ue(!1)}},500);return()=>{clearTimeout(I)}},[p,ee,$]);const ae=async _=>{if(_.preventDefault(),!p.trim()&&!S||!a||!o)return;const I=p.trim();if($)try{const Y=await ee(I||(S?` ${S.name}`:""));if(Y.shouldBlock){alert(`Message blocked: ${Y.reason}

Detected: ${Y.violations.map(re=>re.type).join(", ")}`);return}if(Y.violations.length>0&&Y.maskedText&&Y.maskedText!==(I||""))if(window.confirm(`Personal information detected in your message.

Send masked version instead?

Original: "${I}"
Masked: "${Y.maskedText}"`)){const fe=Y.maskedText||(S?` ${S.name} uploaded successfully.`:be(I));await h(a,fe,S||void 0),g(""),T(null),A.current&&(A.current.value="");const pe=u(a);v(pe),B(null),ue(!1),setTimeout(H,1500);return}else return}catch(Y){if(console.error("PII check failed during send:",Y),!window.confirm("PII detection service is unavailable. Send message anyway?"))return}if(j==="doctor"){const Y=S&&!I?` ${S.name} uploaded successfully.`:be(I);await h(a,Y,S||void 0),g(""),T(null),A.current&&(A.current.value="");const re=u(a);v(re),B(null),ue(!1),setTimeout(H,1500)}else{const Y=new Date,re={id:crypto.randomUUID(),sender:"patient",content:I,timestamp:Y};E(fe=>[...fe,re]),g(""),T(null),A.current&&(A.current.value=""),setTimeout(()=>{const fe=["Theres a nearby hospital 2 km away  would you like directions?","Ive found a clinic within your budget.","I can help arrange transport if needed."],pe=fe[Math.floor(Math.random()*fe.length)];E(_e=>[..._e,{id:crypto.randomUUID(),sender:"agent",content:pe,timestamp:new Date}])},1500)}};if(!O||!i)return null;const V=O.status==="accepted",W=i.role==="doctor",z=W?O.patientName:O.doctorName;return r.jsx("div",{className:"modal-backdrop",onClick:n,children:r.jsxs("div",{className:"modal-content max-w-2xl w-full h-[80vh] flex flex-col",onClick:_=>_.stopPropagation(),children:[r.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-primary-600 to-secondary-600 p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:r.jsx(Gt,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-3",children:[r.jsx("span",{children:z}),r.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold ${q?"bg-white/20 text-white":"bg-white/10 text-white/80"}`,children:[r.jsx("span",{className:"mr-1",children:q?"":""}),q?"Online":"Offline"]})]}),r.jsx("p",{className:"text-primary-100",children:O.doctorCategory}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-primary-100 mt-1",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ct,{className:"h-4 w-4"}),r.jsx("span",{children:O.datetime.toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsx("span",{children:O.datetime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${O.status==="accepted"?"bg-success-500/20 text-success-100 border border-success-400/30":O.status==="pending"?"bg-warning-500/20 text-warning-100 border border-warning-400/30":"bg-white/20 text-white border border-white/30"}`,children:O.status==="accepted"?"Confirmed":O.status==="pending"?W?"Awaiting Your Approval":"Awaiting Confirmation":O.status}),r.jsx("button",{onClick:n,"aria-label":"Close modal",className:"text-white/80 hover:text-white p-2 rounded-full hover:bg-white/10 transition-all duration-200",children:r.jsx(Ut,{className:"h-6 w-6"})})]})]})}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-white",children:[r.jsx("div",{className:"border-b border-neutral-200 px-6 pt-4",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{type:"button",onClick:()=>N("doctor"),className:`text-sm font-semibold px-3 py-2 rounded-t-md ${j==="doctor"?"text-primary-700 border-b-2 border-primary-600":"text-neutral-500 hover:text-neutral-700"}`,children:"Chat with Doctor"}),r.jsx("button",{type:"button",onClick:()=>N("agent"),className:`text-sm font-semibold px-3 py-2 rounded-t-md ${j==="agent"?"text-primary-700 border-b-2 border-primary-600":"text-neutral-500 hover:text-neutral-700"}`,children:"Chat with Agent"})]})}),r.jsxs("div",{className:"flex-1 p-6 overflow-y-auto scrollbar-thin",children:[j==="agent"&&r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800 border border-primary-200",children:"Agent Support"})}),!V&&r.jsx("div",{className:"text-center py-8",children:r.jsxs("div",{className:"bg-warning-50 border border-warning-200 rounded-xl p-6 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-warning-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Ze,{className:"h-6 w-6 text-warning-600"})}),r.jsx("p",{className:"text-sm text-warning-800 font-medium",children:O.status==="pending"?W?"Accept the appointment first to enable messaging.":"Messaging will be available once the doctor confirms your appointment.":"Messaging is not available for this appointment."})]})}),x.length===0&&V&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Zr,{className:"h-8 w-8 text-primary-600"})}),r.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"Start the conversation"}),r.jsxs("p",{className:"text-neutral-500",children:["Send your first message to begin chatting with ",z,"."]})]}),r.jsxs("div",{className:"space-y-4",children:[(j==="doctor"?x:b).map(_=>r.jsx("div",{className:`flex ${(j==="doctor"?_.senderId===i.id:_.sender==="patient")?"justify-end":"justify-start"} animate-slide-up`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-2xl shadow-soft ${(j==="doctor"?_.senderId===i.id:_.sender==="patient")?"bg-green-100 text-green-900 border border-green-200":"bg-blue-50 text-blue-900 border border-blue-200"}`,children:[_.content&&r.jsx("p",{className:"text-sm leading-relaxed font-medium",children:_.content}),_.attachment&&r.jsx("div",{className:"mt-2",children:r.jsx(Wf,{attachment:_.attachment,isOwnMessage:j==="doctor"?_.senderId===i.id:_.sender==="patient"})}),r.jsx("p",{className:`text-xs mt-2 ${(j==="doctor"?_.senderId===i.id:_.sender==="patient")?"text-green-700/70":"text-blue-700/70"}`,children:new Date(_.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},_.id)),r.jsx("div",{ref:D})]})]}),V&&r.jsxs("div",{className:"flex-shrink-0 border-t border-neutral-200 p-6 bg-neutral-50",children:[J&&F&&F.violations.length>0&&r.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(rn,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Potential personal data detected"}),r.jsx("p",{className:"mt-1 text-xs text-red-700/90",children:F.shouldBlock?"This message contains disallowed personal information and cannot be sent.":`Detected: ${F.violations.map(_=>_.type).join(", ")}. You may send a masked version.`})]})]})}),S&&r.jsxs("div",{className:"mb-4 p-3 bg-primary-50 border border-primary-200 rounded-xl flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[r.jsx(ga,{className:"h-4 w-4 text-primary-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-semibold text-primary-900 truncate",children:S.name}),r.jsxs("span",{className:"text-xs text-primary-600",children:["(",(S.size/1024).toFixed(1)," KB)"]})]}),r.jsx("button",{type:"button",onClick:()=>{T(null),A.current&&(A.current.value="")},className:"ml-2 p-1 text-primary-600 hover:text-primary-800 hover:bg-primary-100 rounded transition-colors","aria-label":"Remove file",children:r.jsx(Ut,{className:"h-4 w-4"})})]}),r.jsxs("form",{onSubmit:ae,className:"flex space-x-4",children:[r.jsx("input",{type:"text",value:p,onChange:_=>g(_.target.value),placeholder:j==="doctor"?`Message ${z}...`:"Message Agent Support...",className:"flex-1 form-input bg-white shadow-sm","aria-label":"Type a message"}),r.jsx("button",{type:"submit",disabled:!p.trim()&&!S||(F?.shouldBlock??!1),"aria-label":"Send message",className:"btn-primary px-6 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r.jsx(Zr,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("input",{ref:A,type:"file",accept:".jpg,.jpeg,.png,.pdf,.zip","aria-label":"Attach file",className:"hidden",onChange:_=>{const I=_.target.files?.[0];if(I){const Y=[".jpg",".jpeg",".png",".pdf",".zip"],re="."+I.name.split(".").pop()?.toLowerCase();Y.includes(re)?T(I):(alert("Please select a valid file type (.jpg, .png, .pdf, .zip)"),A.current&&(A.current.value=""))}}}),r.jsxs("button",{type:"button",onClick:()=>A.current?.click(),className:"inline-flex items-center px-5 py-2.5 text-sm font-semibold text-neutral-700 bg-white border-2 border-neutral-300 rounded-xl hover:bg-neutral-50 hover:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-all duration-300 shadow-sm hover:shadow-md hover:-translate-y-0.5",children:[r.jsx(ga,{className:"h-4 w-4 mr-2"}),"Attach File"]})]})]})]})]})})},fv=()=>{const{user:a}=Fe(),{appointments:n,getUnreadMessageCount:i}=$t(),[o,c]=w.useState("upcoming"),[u,h]=w.useState(null);if(!a)return null;const m=n.filter(b=>b.patientId===a.id),p=m.filter(b=>b.status==="pending"||b.status==="accepted"&&b.datetime>new Date),g=m.filter(b=>b.status==="completed"||b.status==="cancelled"||b.status==="no_show"||b.status==="accepted"&&b.datetime<=new Date),x=b=>{switch(b){case"pending":return r.jsx(Ze,{className:"h-4 w-4 text-yellow-500"});case"accepted":return r.jsx(Bn,{className:"h-4 w-4 text-green-500"});case"completed":return r.jsx(Bn,{className:"h-4 w-4 text-blue-500"});case"cancelled":return r.jsx(pc,{className:"h-4 w-4 text-red-500"});case"no_show":return r.jsx(fc,{className:"h-4 w-4 text-orange-500"});default:return r.jsx(Ze,{className:"h-4 w-4 text-gray-500"})}},v=b=>{switch(b){case"pending":return"Awaiting Confirmation";case"accepted":return"Confirmed";case"completed":return"Completed";case"cancelled":return"Cancelled";case"no_show":return"No Show";default:return b}},j=b=>{switch(b){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},N=({appointment:b,isPast:E})=>{const[S,T]=Lt.useState(()=>{try{return localStorage.getItem("doctorAvailability")==="online"}catch{return!1}});Lt.useEffect(()=>{const q=()=>{try{T(localStorage.getItem("doctorAvailability")==="online")}catch{}},Z=setInterval(q,3e3),ee=$=>{$.key==="doctorAvailability"&&q()};return window.addEventListener("storage",ee),()=>{clearInterval(Z),window.removeEventListener("storage",ee)}},[]);const D=i(b.id,a.id),A=b.patientRating,O=b.patientReview;return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Gt,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[r.jsx("span",{children:b.doctorName}),r.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold ${S?"bg-green-50 text-green-700 border border-green-200":"bg-gray-50 text-gray-600 border border-gray-200"}`,children:[r.jsx("span",{className:"mr-1",children:S?"":""}),S?"Online":"Offline"]})]}),r.jsx("p",{className:"text-sm text-gray-600",children:b.doctorCategory})]})]}),r.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${j(b.status)}`,children:[x(b.status),r.jsx("span",{children:v(b.status)})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ct,{className:"h-4 w-4"}),r.jsx("span",{children:b.datetime.toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsx("span",{children:b.datetime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),b.notes&&r.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-md",children:r.jsx("p",{className:"text-sm text-gray-700",children:b.notes})}),E&&b.recommendations&&r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Doctor's Recommendations:"}),r.jsx("p",{className:"text-sm text-blue-800",children:b.recommendations})]}),b.prescription&&r.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-green-900 mb-1",children:"Prescription:"}),r.jsx("p",{className:"text-sm text-green-800",children:b.prescription})]}),E&&A&&r.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-900 mb-2",children:"Your Review:"}),r.jsxs("div",{className:"flex items-center mb-1",children:[[1,2,3,4,5].map(q=>r.jsx(mc,{className:`h-4 w-4 mr-1 ${q<=A?"text-yellow-500 fill-current":"text-gray-300"}`},q)),r.jsxs("span",{className:"ml-2 text-sm text-yellow-800",children:[A,"/5"]})]}),O&&r.jsx("p",{className:"text-sm text-yellow-800",children:O})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-xs text-gray-500",children:["Booked on ",b.createdAt.toLocaleDateString()]}),b.status==="accepted"&&!E&&r.jsxs("button",{onClick:()=>h(b.id),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 hover:text-white transition-colors duration-200",children:[r.jsx(Hn,{className:"h-4 w-4"}),r.jsx("span",{children:"Message"}),D>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:D})]})]})]})};return r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Appointments"}),r.jsx("p",{className:"text-gray-600",children:"Manage your upcoming and past appointments"})]}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsxs("button",{onClick:()=>c("upcoming"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="upcoming"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Upcoming (",p.length,")"]}),r.jsxs("button",{onClick:()=>c("past"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="past"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Past (",g.length,")"]})]})})}),r.jsxs("div",{className:"space-y-4",children:[o==="upcoming"&&r.jsx(r.Fragment,{children:p.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[r.jsx(ct,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No upcoming appointments"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Book your first appointment to get started"}),r.jsx(et,{to:"/patient/browse",className:"bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 hover:text-white transition-colors duration-200",children:"Browse Doctors"})]}):p.sort((b,E)=>b.datetime.getTime()-E.datetime.getTime()).map(b=>r.jsx(N,{appointment:b,isPast:!1},b.id))}),o==="past"&&r.jsx(r.Fragment,{children:g.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[r.jsx(Ze,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No past appointments"}),r.jsx("p",{className:"text-gray-500",children:"Your completed appointments will appear here"})]}):g.sort((b,E)=>E.datetime.getTime()-b.datetime.getTime()).map(b=>r.jsx(N,{appointment:b,isPast:!0},b.id))})]}),u&&r.jsx(Vf,{appointmentId:u,onClose:()=>h(null)})]})},mv=()=>{const{user:a,updateUser:n}=Fe(),{categories:i}=$t(),[o,c]=w.useState(!1),[u,h]=w.useState({name:a?.name||"",email:a?.email||"",age:a?.age?.toString()||"",sex:a?.sex||"",height:a?.height||"",weight:a?.weight||"",medications:a?.medications||"",allergies:a?.allergies||""});if(!a||a.role!=="patient")return null;const m=x=>{h(v=>({...v,[x.target.name]:x.target.value}))},p=()=>{const x={name:u.name,email:u.email,height:u.height,weight:u.weight,medications:u.medications,allergies:u.allergies};u.age&&(x.age=parseInt(u.age)),u.sex&&(x.sex=u.sex),n(x),c(!1)},g=()=>{h({name:a?.name||"",email:a?.email||"",age:a?.age?.toString()||"",sex:a?.sex||"",height:a?.height||"",weight:a?.weight||"",medications:a?.medications||"",allergies:a?.allergies||""}),c(!1)};return r.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),r.jsx("p",{className:"text-gray-600",children:"Manage your personal information and medical details"})]}),r.jsx("div",{className:"mb-6 max-w-xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Gt,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a.name}),r.jsx("p",{className:"text-sm text-gray-500 capitalize",children:a.role})]})]}),r.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200",children:[r.jsx(Bf,{className:"h-4 w-4"}),r.jsx("span",{children:o?"Cancel":"Edit Profile"})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o?r.jsx("input",{type:"text",name:"name",value:u.name,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o?r.jsx("input",{type:"email",name:"email",value:u.email,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.email})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age"}),o?r.jsx("input",{type:"number",name:"age",value:u.age,onChange:m,min:"1",max:"120",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.age||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sex"}),o?r.jsxs("select",{name:"sex",value:u.sex,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]}):r.jsx("p",{className:"text-gray-900 capitalize",children:a.sex||"Not specified"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Xr,{className:"h-5 w-5 mr-2 text-red-500"}),"Physical Information"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Yh,{className:"h-4 w-4 inline mr-1"}),"Height"]}),o?r.jsx("input",{type:"text",name:"height",value:u.height,onChange:m,placeholder:`5'8" or 173cm`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.height||"Not specified"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(Yh,{className:"h-4 w-4 inline mr-1"}),"Weight"]}),o?r.jsx("input",{type:"text",name:"weight",value:u.weight,onChange:m,placeholder:"150 lbs or 68 kg",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.weight||"Not specified"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(qy,{className:"h-4 w-4 inline mr-1"}),"Current Medications"]}),o?r.jsx("textarea",{name:"medications",value:u.medications,onChange:m,rows:3,placeholder:"List any medications you're currently taking...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.medications||"None specified"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(rn,{className:"h-4 w-4 inline mr-1"}),"Allergies"]}),o?r.jsx("textarea",{name:"allergies",value:u.allergies,onChange:m,rows:3,placeholder:"List any known allergies...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):r.jsx("p",{className:"text-gray-900",children:a.allergies||"None specified"})]})]})]}),o&&r.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[r.jsx("button",{onClick:g,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),r.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200",children:[r.jsx(Xl,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]})]})]})}),r.jsx("div",{className:"max-w-xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Medical Specialities"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Explore the medical specialties available in our platform"})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map(x=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 flex flex-col items-center justify-center text-center transition-all duration-200 hover:scale-[1.02] hover:shadow-[0_2px_6px_rgba(0,0,0,0.1)]",style:{minHeight:"140px",cursor:"default"},onMouseDown:v=>v.preventDefault(),onClick:v=>v.preventDefault(),children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:r.jsx(Bs,{className:"h-6 w-6 text-blue-600"})}),r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:x.name})]},x.id))})})]})})]})})},pv=()=>{const{appointmentId:a}=uf(),n=ya(),{user:i}=Fe(),{appointments:o,getAppointmentMessages:c,sendMessage:u,markMessagesAsRead:h}=$t(),[m,p]=w.useState(""),[g,x]=w.useState([]),[v,j]=w.useState(null),N=w.useRef(null),b=w.useRef(null),[E,S]=w.useState(null),T=o.find(O=>O.id===a);w.useEffect(()=>{try{const O=localStorage.getItem("doctorAvailabilityTiming");if(O){const q=JSON.parse(O);S(q)}}catch(O){console.error("Error loading doctor availability:",O)}},[]),w.useEffect(()=>{if(a&&i){const O=c(a);x(O),h(a,i.id)}},[a,i,c,h]),w.useEffect(()=>{N.current?.scrollIntoView({behavior:"smooth"})},[g]);const D=async O=>{if(O.preventDefault(),!m.trim()&&!v||!a)return;await u(a,m,v||void 0),p(""),j(null),b.current&&(b.current.value="");const q=c(a);x(q),n("/patient/appointments",{replace:!0}),setTimeout(()=>{window.location.hash.includes("#/patient/appointments")||(window.location.hash="#/patient/appointments")},0)};if(!T||!i)return r.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Appointment not found"}),r.jsx(et,{to:"/patient/appointments",className:"text-blue-600 hover:text-blue-700",children:" Back to Appointments"})]})});const A=T.status==="accepted";return r.jsx("div",{className:"px-4 sm:px-6 lg:px-8 h-[calc(100vh-120px)]",children:r.jsxs("div",{className:"max-w-4xl mx-auto h-full flex flex-col",children:[r.jsxs("div",{className:"flex-shrink-0 mb-6",children:[r.jsxs(et,{to:"/patient/appointments",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4 transition-colors duration-200",children:[r.jsx(ja,{className:"h-4 w-4 mr-2"}),"Back to Appointments"]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Gt,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:T.doctorName}),r.jsx("p",{className:"text-gray-600",children:T.doctorCategory}),E&&(E.morning||E.evening)&&r.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Available: "}),E.morning&&r.jsx("span",{children:E.morning}),E.morning&&E.evening&&r.jsx("span",{children:", "}),E.evening&&r.jsx("span",{children:E.evening})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ct,{className:"h-4 w-4"}),r.jsx("span",{children:T.datetime.toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsx("span",{children:T.datetime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]})]}),r.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${T.status==="accepted"?"bg-green-100 text-green-800":T.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:T.status==="accepted"?"Confirmed":T.status==="pending"?"Awaiting Confirmation":T.status})]})})]}),r.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col min-h-0",children:[r.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[!A&&r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4",children:r.jsx("p",{className:"text-sm text-yellow-800",children:T.status==="pending"?"Messaging will be available once the doctor confirms your appointment.":"Messaging is not available for this appointment."})})}),g.length===0&&A&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500",children:"No messages yet. Start the conversation!"})}),r.jsxs("div",{className:"space-y-4",children:[g.map(O=>r.jsx("div",{className:`flex ${O.senderId===i.id?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${O.senderId===i.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[O.content&&r.jsx("p",{className:`text-sm ${O.senderId===i.id?"text-white":"text-gray-900"}`,children:O.content}),O.attachment&&r.jsx("div",{className:"mt-2",children:r.jsx(Wf,{attachment:O.attachment,isOwnMessage:O.senderId===i.id})}),r.jsx("p",{className:`text-xs mt-1 ${O.senderId===i.id?"text-blue-200":"text-gray-500"}`,children:O.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},O.id)),r.jsx("div",{ref:N})]})]}),A&&r.jsxs("div",{className:"border-t border-gray-200 p-4",children:[v&&r.jsxs("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[r.jsx(ga,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium text-blue-900 truncate",children:v.name}),r.jsxs("span",{className:"text-xs text-blue-600",children:["(",(v.size/1024).toFixed(1)," KB)"]})]}),r.jsx("button",{type:"button",onClick:()=>{j(null),b.current&&(b.current.value="")},className:"ml-2 p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded transition-colors","aria-label":"Remove file",children:r.jsx(Ut,{className:"h-4 w-4"})})]}),r.jsxs("form",{onSubmit:D,className:"flex space-x-4",children:[r.jsx("input",{type:"text",value:m,onChange:O=>p(O.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("button",{type:"submit",disabled:!m.trim()&&!v,"aria-label":"Send message",className:"bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:r.jsx(Zr,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("input",{ref:b,type:"file",accept:".jpg,.jpeg,.png,.pdf,.zip","aria-label":"Attach file",className:"hidden",onChange:O=>{const q=O.target.files?.[0];if(q){const Z=[".jpg",".jpeg",".png",".pdf",".zip"],ee="."+q.name.split(".").pop()?.toLowerCase();Z.includes(ee)?j(q):(alert("Please select a valid file type (.jpg, .png, .pdf, .zip)"),b.current&&(b.current.value=""))}}}),r.jsxs("button",{type:"button",onClick:()=>b.current?.click(),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 shadow-sm hover:shadow-md",children:[r.jsx(ga,{className:"h-4 w-4 mr-2"}),"Attach File"]})]})]})]})]})})},ef=({appointment:a,showActions:n,unreadCount:i,isPastDue:o,onShowPatientHistory:c,initialRecommendations:u,onSaveRecommendations:h,initialPrescription:m,onSavePrescription:p,initialDoctorNotes:g,onSaveDoctorNotes:x,onMarkCompleted:v,onMarkNoShow:j,onMessageClick:N})=>{const[b,E]=Lt.useState(u||""),[S,T]=Lt.useState(m||""),[D,A]=Lt.useState(g||"");return Lt.useEffect(()=>{E(u||"")},[u,a.id]),Lt.useEffect(()=>{T(m||"")},[m,a.id]),Lt.useEffect(()=>{A(g||"")},[g,a.id]),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a.patientName}),r.jsx("p",{className:"text-sm text-gray-600",children:a.doctorCategory}),a.patientVitals&&r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Vitals: "}),a.patientVitals.bloodPressure&&r.jsxs("span",{children:["BP: ",a.patientVitals.bloodPressure," "]}),a.patientVitals.temperature&&r.jsxs("span",{children:["Temp: ",a.patientVitals.temperature,"F"]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ct,{className:"h-4 w-4"}),r.jsx("span",{children:a.datetime.toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsx("span",{children:a.datetime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),r.jsxs("button",{onClick:()=>c(a.patientId),className:"flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-700",children:[r.jsx(Fs,{className:"h-4 w-4"}),r.jsx("span",{children:"History"})]})]}),a.recommendations&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(or,{className:"h-4 w-4 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Recommendations:"}),r.jsx("p",{className:"text-sm text-blue-800",children:a.recommendations})]})]})}),a.prescription&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(or,{className:"h-4 w-4 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Prescription:"}),r.jsx("p",{className:"text-sm text-green-800",children:a.prescription})]})]})}),a.doctorNotes&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(or,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Doctor's Private Notes:"}),r.jsx("p",{className:"text-sm text-yellow-800",children:a.doctorNotes})]})]})}),a.status==="completed"&&!a.recommendations&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Recommendations:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:b,onChange:O=>E(O.target.value),placeholder:"Treatment notes, medications, follow-up...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{onClick:()=>h(b),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors duration-200",children:"Save"})]})]}),(a.status==="accepted"||a.status==="completed")&&r.jsxs("div",{className:"mb-4 space-y-4",children:[!a.prescription&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prescribe Medicine:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:S,onChange:O=>T(O.target.value),placeholder:"Medicine name, dosage, instructions...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{onClick:()=>p(S),className:"bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 transition-colors duration-200",children:"Prescribe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Private Doctor Notes:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:D,onChange:O=>A(O.target.value),placeholder:"Private notes (not visible to patient)...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{onClick:()=>x(D),className:"bg-yellow-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-700 transition-colors duration-200",children:"Save Note"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${a.status==="completed"?"bg-blue-100 text-blue-800":a.status==="accepted"?"bg-green-100 text-green-800":a.status==="cancelled"?"bg-red-100 text-red-800":a.status==="no_show"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:a.status==="completed"?"Completed":a.status==="accepted"?"Confirmed":a.status==="cancelled"?"Cancelled":a.status==="no_show"?"No Show":a.status}),r.jsxs("div",{className:"flex items-center space-x-2",children:[o&&n&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:v,className:"bg-blue-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-blue-700 transition-colors duration-200",children:"Mark Completed"}),r.jsx("button",{onClick:j,className:"bg-orange-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-orange-700 transition-colors duration-200",children:"No Show"})]}),a.status==="accepted"&&r.jsxs("button",{onClick:()=>N(a.id),className:"flex items-center space-x-1 bg-blue-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-blue-700 hover:text-white transition-colors duration-200",children:[r.jsx(Hn,{className:"h-3 w-3"}),r.jsx("span",{children:"Message"}),i>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center ml-1",children:i})]})]})]})]})},gv=()=>{const{user:a}=Fe(),{appointments:n,updateAppointment:i,getUnreadMessageCount:o}=$t(),[c,u]=w.useState("next"),[h,m]=w.useState(null),[p,g]=w.useState({}),[x,v]=w.useState(null),[j,N]=w.useState({}),[b,E]=w.useState({}),[S,T]=w.useState(()=>{try{return localStorage.getItem("doctorAvailability")==="online"}catch{return!0}});if(w.useEffect(()=>{try{localStorage.setItem("doctorAvailability",S?"online":"offline")}catch{}},[S]),!a||a.role!=="doctor")return null;const D=n.filter(C=>C.doctorId===a.id),A=D.filter(C=>C.status==="pending").sort((C,H)=>C.datetime.getTime()-H.datetime.getTime())[0],O=D.filter(C=>C.status==="accepted"&&C.datetime>new Date).sort((C,H)=>C.datetime.getTime()-H.datetime.getTime()),q=D.filter(C=>C.status==="completed"||C.status==="cancelled"||C.status==="no_show"||C.status==="accepted"&&C.datetime<=new Date).sort((C,H)=>H.datetime.getTime()-C.datetime.getTime()),Z=C=>{i(C,{status:"accepted"})},ee=C=>{i(C,{status:"cancelled"})},$=C=>{const H=p[C]||"";i(C,{status:"completed",recommendations:H})},F=C=>{i(C,{status:"no_show"})},B=(C,H)=>{i(C,{recommendations:H})},J=(C,H)=>{i(C,{prescription:H})},ue=(C,H)=>{i(C,{doctorNotes:H})},ge=({patientId:C,onClose:H})=>{const{getPatientHistory:ae}=$t(),V=ae(C);return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-96 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Patient History"}),r.jsx("button",{onClick:H,className:"text-gray-400 hover:text-gray-600","aria-label":"Close modal",children:r.jsx(pc,{className:"h-5 w-5"})})]})}),r.jsx("div",{className:"p-6 overflow-y-auto",children:V.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No previous visits"}):r.jsx("div",{className:"space-y-4",children:V.map((W,z)=>r.jsxs("div",{className:"border-l-2 border-blue-200 pl-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.date.toLocaleDateString()}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:W.summary})]},z))})})]})})},be=Lt.memo(({appointment:C})=>(o(C.id,a.id),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.patientName}),r.jsx("p",{className:"text-sm text-gray-600",children:C.doctorCategory}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"3 past visits - Last: Annual checkup (Jan 2024)"}),C.patientVitals&&r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Current Vitals: "}),C.patientVitals.bloodPressure&&r.jsxs("span",{children:["BP: ",C.patientVitals.bloodPressure," "]}),!C.patientVitals.bloodPressure&&r.jsx("span",{children:"BP: Not Provided "}),C.patientVitals.temperature&&r.jsxs("span",{children:["Temp: ",C.patientVitals.temperature,"F"]}),!C.patientVitals.temperature&&r.jsx("span",{children:"Temp: Not Provided"})]}),!C.patientVitals&&r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Current Vitals: "}),r.jsx("span",{children:"BP: Not Provided, Temp: Not Provided"})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("button",{onClick:()=>m(C.patientId),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors duration-200",title:"View patient history",children:r.jsx(Fs,{className:"h-4 w-4"})})})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ct,{className:"h-4 w-4"}),r.jsx("span",{children:C.datetime.toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsx("span",{children:C.datetime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>Z(C.id),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md font-medium hover:bg-green-700 transition-colors duration-200",children:"Accept"}),r.jsx("button",{onClick:()=>ee(C.id),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md font-medium hover:bg-red-700 transition-colors duration-200",children:"Decline"})]})]})));return Lt.memo(({appointment:C,showActions:H=!1,onMessageClick:ae})=>{const V=o(C.id,a.id),W=C.datetime<=new Date&&C.status==="accepted";return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.patientName}),r.jsx("p",{className:"text-sm text-gray-600",children:C.doctorCategory}),C.patientVitals&&r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Vitals: "}),C.patientVitals.bloodPressure&&r.jsxs("span",{children:["BP: ",C.patientVitals.bloodPressure," "]}),C.patientVitals.temperature&&r.jsxs("span",{children:["Temp: ",C.patientVitals.temperature,"F"]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ct,{className:"h-4 w-4"}),r.jsx("span",{children:C.datetime.toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ze,{className:"h-4 w-4"}),r.jsx("span",{children:C.datetime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),r.jsxs("button",{onClick:()=>m(C.patientId),className:"flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-700",children:[r.jsx(Fs,{className:"h-4 w-4"}),r.jsx("span",{children:"History"})]})]}),C.recommendations&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(or,{className:"h-4 w-4 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Recommendations:"}),r.jsx("p",{className:"text-sm text-blue-800",children:C.recommendations})]})]})}),C.prescription&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(or,{className:"h-4 w-4 text-green-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Prescription:"}),r.jsx("p",{className:"text-sm text-green-800",children:C.prescription})]})]})}),C.doctorNotes&&r.jsx("div",{className:"mb-4 p-3 bg-yellow-50 rounded-md",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(or,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Doctor's Private Notes:"}),r.jsx("p",{className:"text-sm text-yellow-800",children:C.doctorNotes})]})]})}),C.status==="completed"&&!C.recommendations&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Recommendations:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:p[C.id]||"",onChange:z=>g(_=>({..._,[C.id]:z.target.value})),placeholder:"Treatment notes, medications, follow-up...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{onClick:()=>{B(C.id,p[C.id]||""),g({...p,[C.id]:""})},className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors duration-200",children:"Save"})]})]}),(C.status==="accepted"||C.status==="completed")&&r.jsxs("div",{className:"mb-4 space-y-4",children:[!C.prescription&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prescribe Medicine:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:j[C.id]||"",onChange:z=>N(_=>({..._,[C.id]:z.target.value})),placeholder:"Medicine name, dosage, instructions...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{onClick:()=>{J(C.id,j[C.id]||""),N({...j,[C.id]:""})},className:"bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 transition-colors duration-200",children:"Prescribe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Private Doctor Notes:"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:b[C.id]||C.doctorNotes||"",onChange:z=>E(_=>({..._,[C.id]:z.target.value})),placeholder:"Private notes (not visible to patient)...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),r.jsx("button",{onClick:()=>{ue(C.id,b[C.id]||""),E({...b,[C.id]:""})},className:"bg-yellow-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-700 transition-colors duration-200",children:"Save Note"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${C.status==="completed"?"bg-blue-100 text-blue-800":C.status==="accepted"?"bg-green-100 text-green-800":C.status==="cancelled"?"bg-red-100 text-red-800":C.status==="no_show"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:C.status==="completed"?"Completed":C.status==="accepted"?"Confirmed":C.status==="cancelled"?"Cancelled":C.status==="no_show"?"No Show":C.status}),r.jsxs("div",{className:"flex items-center space-x-2",children:[W&&H&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>$(C.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-blue-700 transition-colors duration-200",children:"Mark Completed"}),r.jsx("button",{onClick:()=>F(C.id),className:"bg-orange-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-orange-700 transition-colors duration-200",children:"Patient Absent"})]}),C.status==="accepted"&&ae&&r.jsxs("button",{onClick:()=>ae(C.id),className:"flex items-center space-x-1 bg-blue-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-blue-700 hover:text-white transition-colors duration-200",children:[r.jsx(Hn,{className:"h-3 w-3"}),r.jsx("span",{children:"Message"}),V>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center ml-1",children:V})]})]})]})]})}),r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Doctor Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Manage your appointments and patient care"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Availability:"}),r.jsxs("button",{type:"button",onClick:()=>T(C=>!C),className:`inline-flex items-center px-3 py-1.5 rounded-full border transition-all duration-300 ${S?"bg-green-50 border-green-300":"bg-gray-50 border-gray-300"}`,"aria-pressed":S,"aria-label":"Toggle availability",children:[r.jsx("span",{className:"mr-2 text-lg transition-all duration-300",children:S?"":""}),r.jsx("span",{className:`text-sm font-semibold transition-colors duration-300 ${S?"text-green-700":"text-gray-600"}`,children:S?"Online":"Offline"})]})]})]}),!a.isApproved&&r.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(rn,{className:"h-5 w-5 text-yellow-600 mr-3"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Account Pending Approval"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Your doctor account is pending admin approval. You won't be able to accept appointments until approved."})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsxs("button",{onClick:()=>u("next"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="next"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Next Booking ",A?"(1)":"(0)"]}),r.jsxs("button",{onClick:()=>u("upcoming"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="upcoming"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Upcoming (",O.length,")"]}),r.jsxs("button",{onClick:()=>u("past"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${c==="past"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Past (",q.length,")"]})]})})}),r.jsxs("div",{className:"space-y-6",children:[c==="next"&&r.jsx("div",{children:A?r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Next Booking to Review"}),r.jsx(be,{appointment:A,unreadCount:o(A.id,a.id),onShowPatientHistory:C=>m(C)})]}):r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[r.jsx(Ze,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No pending appointments"}),r.jsx("p",{className:"text-gray-500",children:"New appointment requests will appear here"})]})}),c==="upcoming"&&r.jsx("div",{children:O.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[r.jsx(ct,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No upcoming appointments"}),r.jsx("p",{className:"text-gray-500",children:"Accepted appointments will appear here"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upcoming Appointments"}),O.map(C=>r.jsx(ef,{appointment:C,showActions:!0,unreadCount:o(C.id,a.id),isPastDue:C.datetime<=new Date&&C.status==="accepted",onShowPatientHistory:H=>m(H),initialRecommendations:p[C.id]||"",onSaveRecommendations:H=>{B(C.id,H),g({...p,[C.id]:""})},initialPrescription:j[C.id]||"",onSavePrescription:H=>{J(C.id,H),N({...j,[C.id]:""})},initialDoctorNotes:b[C.id]||C.doctorNotes||"",onSaveDoctorNotes:H=>{ue(C.id,H),E({...b,[C.id]:""})},onMarkCompleted:()=>$(C.id),onMarkNoShow:()=>F(C.id),onMessageClick:v},C.id))]})}),c==="past"&&r.jsx("div",{children:q.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[r.jsx(or,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No past appointments"}),r.jsx("p",{className:"text-gray-500",children:"Completed appointments will appear here"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Past Appointments"}),q.map(C=>r.jsx(ef,{appointment:C,showActions:C.status==="accepted",unreadCount:o(C.id,a.id),isPastDue:C.datetime<=new Date&&C.status==="accepted",onShowPatientHistory:H=>m(H),initialRecommendations:p[C.id]||"",onSaveRecommendations:H=>{B(C.id,H),g({...p,[C.id]:""})},initialPrescription:j[C.id]||"",onSavePrescription:H=>{J(C.id,H),N({...j,[C.id]:""})},initialDoctorNotes:b[C.id]||C.doctorNotes||"",onSaveDoctorNotes:H=>{ue(C.id,H),E({...b,[C.id]:""})},onMarkCompleted:()=>$(C.id),onMarkNoShow:()=>F(C.id),onMessageClick:v},C.id))]})})]}),h&&r.jsx(ge,{patientId:h,onClose:()=>m(null)}),x&&r.jsx(Vf,{appointmentId:x,onClose:()=>v(null)})]})},xv=()=>{const{user:a,updateUser:n}=Fe(),{categories:i,appointments:o}=$t(),[c,u]=w.useState(!1),[h,m]=w.useState({name:a?.name||"",email:a?.email||"",category:a?.category||"",bio:a?.bio||"",experience:a?.experience||"",degrees:a?.degrees||""}),[p,g]=w.useState({morning:"9:00 AM",evening:"6:00 PM"}),x={morning:"4:00 PM",evening:"9:00 PM"},[v,j]=w.useState(null),N=w.useRef(null),b=w.useRef(null),E=w.useRef(null),S=w.useRef(null),T=w.useRef({morning:{hour:!1,minute:!1},evening:{hour:!1,minute:!1}}),D=W=>{if(!W)return{hour:9,minute:0,period:"AM"};const z=W.trim().split(" "),_=z[1]||"AM",I=z[0]||"9:00",[Y,re]=I.split(":"),fe=parseInt(Y||"9",10),pe=parseInt(re||"0",10);return{hour:Math.max(1,Math.min(12,fe)),minute:Math.max(0,Math.min(59,pe)),period:_}},A=(W,z,_)=>`${W}:${z.toString().padStart(2,"0")} ${_}`,O=()=>{const z=D(p.morning);if(N.current){const I=z.hour-1;N.current.scrollTop=I*50,setTimeout(()=>{N.current&&(N.current.scrollTop=I*50)},50)}b.current&&(b.current.scrollTop=z.minute*50,setTimeout(()=>{b.current&&(b.current.scrollTop=z.minute*50)},50));const _=D(p.evening);if(E.current){const I=_.hour-1;E.current.scrollTop=I*50,setTimeout(()=>{E.current&&(E.current.scrollTop=I*50)},50)}S.current&&(S.current.scrollTop=_.minute*50,setTimeout(()=>{S.current&&(S.current.scrollTop=_.minute*50)},50))};if(w.useEffect(()=>{try{const W=localStorage.getItem("doctorAvailabilityTiming");if(W){const z=JSON.parse(W),_=re=>re?re.includes("")||re.includes("-")?re.split(/[-]/)[0].trim():re:"",I=_(z.morning)||"9:00 AM",Y=_(z.evening)||"6:00 PM";j(z),g({morning:I,evening:Y})}else g({morning:"9:00 AM",evening:"6:00 PM"})}catch(W){console.error("Error loading availability timing:",W),g({morning:"9:00 AM",evening:"6:00 PM"})}},[]),w.useEffect(()=>{const W=setTimeout(()=>{O()},100);return()=>clearTimeout(W)},[p.morning,p.evening]),!a||a.role!=="doctor")return null;const q=o.filter(W=>W.doctorId===a.id),Z=q.filter(W=>W.status==="completed"),ee=new Set(q.map(W=>W.patientId)).size,$=q.filter(W=>{const z=new Date(W.datetime),_=new Date;return z.getMonth()===_.getMonth()&&z.getFullYear()===_.getFullYear()}).length,F=4.7+Math.random()*.3,B=Math.floor(Math.random()*30)+15,J=a.experience?parseInt(a.experience.match(/\d+/)?.[0]||"0"):0,ue=W=>{m(z=>({...z,[W.target.name]:W.target.value}))},ge=()=>{n({name:h.name,email:h.email,category:h.category,bio:h.bio,experience:h.experience,degrees:h.degrees}),u(!1)},be=()=>{m({name:a?.name||"",email:a?.email||"",category:a?.category||"",bio:a?.bio||"",experience:a?.experience||"",degrees:a?.degrees||""}),u(!1)},C=(W,z)=>{g(_=>({..._,[W]:z}))},H=()=>{try{const W={morning:`${p.morning}  ${x.morning}`,evening:`${p.evening}  ${x.evening}`};localStorage.setItem("doctorAvailabilityTiming",JSON.stringify(W)),j(W),alert("Availability timing saved successfully!")}catch(W){console.error("Error saving availability timing:",W),alert("Failed to save availability timing. Please try again.")}},ae=W=>i.find(_=>_.slug===W)?.name||W,V=({icon:W,title:z,value:_,subtitle:I,color:Y="blue"})=>{const re={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200",indigo:"bg-indigo-50 text-indigo-600 border-indigo-200"};return r.jsxs("div",{className:"bg-white rounded-xl shadow-soft border border-neutral-200 p-6 hover:shadow-medium transition-all duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center border ${re[Y]}`,children:r.jsx(W,{className:"h-6 w-6"})}),r.jsx(Xh,{className:"h-4 w-4 text-success-500"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-1",children:_}),r.jsx("p",{className:"text-sm font-medium text-neutral-600 mb-1",children:z}),I&&r.jsx("p",{className:"text-xs text-neutral-500",children:I})]})]})};return r.jsx("div",{className:"section-padding",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:"My Profile"}),r.jsx("p",{className:"text-neutral-600",children:"Manage your professional information and credentials"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-6",children:"Performance Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(V,{icon:Jt,title:"Total Patients",value:ee,subtitle:"Unique patients served",color:"blue"}),r.jsx(V,{icon:ct,title:"Completed Sessions",value:Z.length,subtitle:"All-time appointments",color:"green"}),r.jsx(V,{icon:mc,title:"Patient Rating",value:F.toFixed(1),subtitle:"Based on patient feedback",color:"orange"}),r.jsx(V,{icon:Ze,title:"Avg Response Time",value:`${B}m`,subtitle:"Message response time",color:"purple"})]})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"card p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-4 flex items-center",children:[r.jsx(Xh,{className:"h-5 w-5 mr-2 text-primary-600"}),"This Month's Activity"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center p-4 bg-primary-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-primary-900 mb-1",children:$}),r.jsx("div",{className:"text-sm text-primary-700",children:"Appointments"})]}),r.jsxs("div",{className:"text-center p-4 bg-success-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-success-900 mb-1",children:Math.floor($*.85)}),r.jsx("div",{className:"text-sm text-success-700",children:"Completed"})]}),r.jsxs("div",{className:"text-center p-4 bg-secondary-50 rounded-lg",children:[r.jsxs("div",{className:"text-2xl font-bold text-secondary-900 mb-1",children:[J,"+"]}),r.jsx("div",{className:"text-sm text-secondary-700",children:"Years Experience"})]})]})]})}),r.jsxs("div",{className:"card overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-neutral-200 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx(Bs,{className:"h-6 w-6 text-primary-600"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold text-neutral-900",children:["Dr. ",a.name]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("p",{className:"text-sm text-neutral-500 capitalize",children:a.role}),!a.isApproved&&r.jsx("span",{className:"status-pending",children:"Pending Approval"}),a.isApproved&&r.jsx("span",{className:"status-success",children:"Approved"})]})]})]}),r.jsxs("button",{onClick:()=>u(!c),className:"btn-primary",children:[r.jsx(Bf,{className:"h-4 w-4"}),r.jsx("span",{children:c?"Cancel":"Edit Profile"})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-4",children:"Basic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Full Name"}),c?r.jsx("input",{type:"text",name:"name",value:h.name,onChange:ue,className:"form-input"}):r.jsxs("p",{className:"text-neutral-900",children:["Dr. ",a.name]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Email"}),c?r.jsx("input",{type:"email",name:"email",value:h.email,onChange:ue,className:"form-input"}):r.jsx("p",{className:"text-neutral-900",children:a.email})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-4 flex items-center",children:[r.jsx(Bs,{className:"h-5 w-5 mr-2 text-primary-500"}),"Professional Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Medical Specialty"}),c?r.jsxs("select",{name:"category",value:h.category,onChange:ue,className:"form-input",children:[r.jsx("option",{value:"",children:"Select your specialty"}),i.map(W=>r.jsx("option",{value:W.slug,children:W.name},W.id))]}):r.jsx("p",{className:"text-neutral-900",children:ae(a.category||"")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"form-label",children:[r.jsx(zy,{className:"h-4 w-4 inline mr-1"}),"Degrees & Certifications"]}),c?r.jsx("input",{type:"text",name:"degrees",value:h.degrees,onChange:ue,placeholder:"e.g., MD, MBBS, MS, Fellowship in Cardiology",className:"form-input"}):r.jsx("p",{className:"text-neutral-900",children:a.degrees||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Years of Experience"}),c?r.jsx("input",{type:"text",name:"experience",value:h.experience,onChange:ue,placeholder:"e.g., 10 years",className:"form-input"}):r.jsx("p",{className:"text-neutral-900",children:a.experience||"Not specified"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"form-label",children:[r.jsx(or,{className:"h-4 w-4 inline mr-1"}),"Professional Bio"]}),c?r.jsx("textarea",{name:"bio",value:h.bio,onChange:ue,rows:4,placeholder:"Tell patients about your background, expertise, and approach to healthcare...",className:"form-input"}):r.jsx("p",{className:"text-neutral-900",children:a.bio||"No bio provided"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-soft border border-primary-200",children:[r.jsxs("h3",{className:"text-xl font-semibold text-neutral-900 mb-6 flex items-center",children:[r.jsx(Ze,{className:"h-5 w-5 mr-2 text-primary-600"}),"Set Your Availability"]}),r.jsxs("div",{className:"space-y-6",children:[["morning","evening"].map(W=>{const z=D(p[W]),_=W==="morning"?N:E,I=W==="morning"?b:S,Y=50,re=()=>{if(_.current&&z.hour>1){const se=z.hour-1,qe=(se-1)*Y;T.current[W].hour=!0,_.current.scrollTo({top:qe,behavior:"smooth"});const tt=A(se,z.minute,z.period);C(W,tt),setTimeout(()=>{T.current[W].hour=!1},400)}},fe=()=>{if(_.current&&z.hour<12){const se=z.hour+1,qe=(se-1)*Y;T.current[W].hour=!0,_.current.scrollTo({top:qe,behavior:"smooth"});const tt=A(se,z.minute,z.period);C(W,tt),setTimeout(()=>{T.current[W].hour=!1},400)}},pe=()=>{if(I.current&&z.minute>0){const se=z.minute-1,qe=se*Y;T.current[W].minute=!0,I.current.scrollTo({top:qe,behavior:"smooth"});const tt=A(z.hour,se,z.period);C(W,tt),setTimeout(()=>{T.current[W].minute=!1},400)}},_e=()=>{if(I.current&&z.minute<59){const se=z.minute+1,qe=se*Y;T.current[W].minute=!0,I.current.scrollTo({top:qe,behavior:"smooth"});const tt=A(z.hour,se,z.period);C(W,tt),setTimeout(()=>{T.current[W].minute=!1},400)}},ke=()=>{if(z.period!=="AM"){const se=A(z.hour,z.minute,"AM");C(W,se)}},Ce=()=>{if(z.period!=="PM"){const se=A(z.hour,z.minute,"PM");C(W,se)}};return r.jsxs("div",{children:[r.jsxs("label",{className:"form-label block mb-3 text-primary-700 font-medium capitalize",children:[W," Shift"]}),r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("button",{type:"button",onClick:re,onMouseDown:se=>se.preventDefault(),disabled:z.hour===1,className:`absolute top-0 left-1/2 transform -translate-x-1/2 z-20 w-full h-8 rounded-t-xl flex items-start justify-center pt-1 transition-all duration-200 shadow-sm ${z.hour===1?"bg-white border border-primary-200 cursor-not-allowed opacity-50":"bg-white border border-primary-200 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md active:bg-primary-100"}`,children:r.jsx(Dl,{className:"h-4 w-4 text-primary-600"})}),r.jsxs("div",{ref:_,onWheel:se=>{se.preventDefault(),se.stopPropagation()},onTouchMove:se=>{se.preventDefault(),se.stopPropagation()},onTouchStart:se=>{se.preventDefault()},onTouchEnd:se=>{se.preventDefault()},className:"hour-selector-scroll relative bg-white rounded-xl shadow-lg border-2 border-primary-200 text-center select-none",style:{height:"120px",scrollSnapType:"y mandatory",scrollbarWidth:"none",msOverflowStyle:"none",touchAction:"none",overflowY:"scroll"},children:[r.jsx("div",{style:{height:"35px"}}),[...Array(12)].map((se,qe)=>{const tt=qe+1,Ft=tt===z.hour;return r.jsx("div",{className:`transition-all duration-300 ${Ft?"font-bold text-3xl text-primary-700":"font-medium text-lg text-gray-400"}`,style:{height:"50px",lineHeight:"50px",scrollSnapAlign:"center",...Ft&&{textShadow:"0 0 15px rgba(37, 99, 235, 0.4), 0 0 8px rgba(37, 99, 235, 0.3)",backgroundColor:"rgba(239, 246, 255, 0.8)",transform:"scale(1.15)",borderLeft:"3px solid rgba(37, 99, 235, 0.6)",borderRight:"3px solid rgba(37, 99, 235, 0.6)"}},children:tt},qe)}),r.jsx("div",{style:{height:"35px"}})]}),r.jsx("button",{type:"button",onClick:fe,onMouseDown:se=>se.preventDefault(),disabled:z.hour===12,className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 z-20 w-full h-8 rounded-b-xl flex items-end justify-center pb-1 transition-all duration-200 shadow-sm ${z.hour===12?"bg-white border border-primary-200 cursor-not-allowed opacity-50":"bg-white border border-primary-200 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md active:bg-primary-100"}`,children:r.jsx(Ol,{className:"h-4 w-4 text-primary-600"})})]}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("button",{type:"button",onClick:pe,onMouseDown:se=>se.preventDefault(),disabled:z.minute===0,className:`absolute top-0 left-1/2 transform -translate-x-1/2 z-20 w-full h-8 rounded-t-xl flex items-start justify-center pt-1 transition-all duration-200 shadow-sm ${z.minute===0?"bg-white border border-primary-200 cursor-not-allowed opacity-50":"bg-white border border-primary-200 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md active:bg-primary-100"}`,children:r.jsx(Dl,{className:"h-4 w-4 text-primary-600"})}),r.jsxs("div",{ref:I,onWheel:se=>{se.preventDefault(),se.stopPropagation()},onTouchMove:se=>{se.preventDefault(),se.stopPropagation()},onTouchStart:se=>{se.preventDefault()},onTouchEnd:se=>{se.preventDefault()},className:"minute-selector-scroll relative bg-white rounded-xl shadow-lg border-2 border-primary-200 text-center select-none",style:{height:"120px",scrollSnapType:"y mandatory",scrollbarWidth:"none",msOverflowStyle:"none",touchAction:"none",overflowY:"scroll"},children:[r.jsx("div",{style:{height:"35px"}}),[...Array(60)].map((se,qe)=>{const tt=qe,Ft=tt===z.minute;return r.jsx("div",{className:`transition-all duration-300 ${Ft?"font-bold text-3xl text-primary-700":"font-medium text-lg text-gray-400"}`,style:{height:"50px",lineHeight:"50px",scrollSnapAlign:"center",...Ft&&{textShadow:"0 0 15px rgba(37, 99, 235, 0.4), 0 0 8px rgba(37, 99, 235, 0.3)",backgroundColor:"rgba(239, 246, 255, 0.8)",transform:"scale(1.15)",borderLeft:"3px solid rgba(37, 99, 235, 0.6)",borderRight:"3px solid rgba(37, 99, 235, 0.6)"}},children:tt.toString().padStart(2,"0")},qe)}),r.jsx("div",{style:{height:"35px"}})]}),r.jsx("button",{type:"button",onClick:_e,onMouseDown:se=>se.preventDefault(),disabled:z.minute===59,className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 z-20 w-full h-8 rounded-b-xl flex items-end justify-center pb-1 transition-all duration-200 shadow-sm ${z.minute===59?"bg-white border border-primary-200 cursor-not-allowed opacity-50":"bg-white border border-primary-200 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md active:bg-primary-100"}`,children:r.jsx(Ol,{className:"h-4 w-4 text-primary-600"})})]}),r.jsxs("div",{className:"w-24 sm:w-20 relative",children:[r.jsx("button",{type:"button",onClick:ke,disabled:z.period==="AM",className:`absolute top-0 left-1/2 transform -translate-x-1/2 z-20 w-full h-8 rounded-t-xl flex items-start justify-center pt-1 transition-all duration-200 shadow-sm ${z.period==="AM"?"bg-white border border-primary-300 cursor-default":"bg-white border border-primary-200 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md active:bg-primary-100"}`,children:r.jsx(Dl,{className:`h-4 w-4 ${z.period==="AM"?"text-primary-800":"text-primary-600"}`})}),r.jsx("div",{className:"relative bg-white rounded-xl shadow-lg border-2 border-primary-200 flex items-center justify-center overflow-hidden",style:{height:"120px"},onWheel:se=>{se.preventDefault(),se.stopPropagation()},onTouchMove:se=>{se.preventDefault(),se.stopPropagation()},children:r.jsx("div",{className:`font-bold text-2xl sm:text-3xl transition-all duration-300 ${z.period==="AM","text-primary-700"}`,style:{textShadow:"0 0 20px rgba(37, 99, 235, 0.4), 0 0 10px rgba(37, 99, 235, 0.3)",backgroundColor:"rgba(239, 246, 255, 0.8)",padding:"14px 20px",borderRadius:"12px",border:"2px solid rgba(37, 99, 235, 0.5)",transform:"scale(1.1)"},children:z.period})}),r.jsx("button",{type:"button",onClick:Ce,disabled:z.period==="PM",className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 z-20 w-full h-8 rounded-b-xl flex items-end justify-center pb-1 transition-all duration-200 shadow-sm ${z.period==="PM"?"bg-white border border-primary-300 cursor-default":"bg-white border border-primary-200 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md active:bg-primary-100"}`,children:r.jsx(Ol,{className:`h-4 w-4 ${z.period==="PM"?"text-primary-800":"text-primary-600"}`})})]})]})]},W)}),r.jsx("div",{children:r.jsxs("button",{onClick:H,className:"btn-primary w-full sm:w-auto mt-2 bg-white border-2 border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[r.jsx(Xl,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Availability"})]})})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-primary-200",children:[r.jsx("h4",{className:"text-sm font-semibold text-primary-700 mb-3",children:v?"Your Saved Availability":"Current Selection"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-primary-600 bg-white border border-primary-200 rounded-lg p-2",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("span",{className:"text-sm",children:[r.jsx("strong",{children:"Morning:"})," ",v?v.morning:`${p.morning}  ${x.morning}`]})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-primary-600 bg-white border border-primary-200 rounded-lg p-2",children:[r.jsx("span",{className:"text-lg",children:""}),r.jsxs("span",{className:"text-sm",children:[r.jsx("strong",{children:"Evening:"})," ",v?v.evening:`${p.evening}  ${x.evening}`]})]})]})]})]}),r.jsxs("div",{className:"bg-neutral-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-2",children:"Account Status"}),a.isApproved?r.jsxs("div",{className:"flex items-center space-x-2 text-success-700",children:[r.jsx("div",{className:"w-2 h-2 bg-success-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Your account is approved and visible to patients"})]}):r.jsxs("div",{className:"flex items-center space-x-2 text-warning-700",children:[r.jsx("div",{className:"w-2 h-2 bg-warning-500 rounded-full"}),r.jsx("span",{className:"text-sm",children:"Your account is pending admin approval"})]})]})]}),c&&r.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[r.jsx("button",{onClick:be,className:"btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:ge,className:"btn-primary",children:[r.jsx(Xl,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]})]})]})]})})},yv=()=>{const{getAppStats:a,approveDoctor:n,activityLogs:i,getDoctors:o}=$t(),[c,u]=w.useState("overview"),h=a(),m=o(),p=({icon:v,title:j,value:N,subtitle:b,color:E="blue"})=>{const S={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600",purple:"bg-purple-100 text-purple-600"};return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${S[E]}`,children:r.jsx(v,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:j}),r.jsx("p",{className:"text-2xl text-gray-900",children:N}),b&&r.jsx("p",{className:"text-sm text-gray-500",children:b})]})]})})},g=v=>v.replace(/_/g," ").toLowerCase().replace(/^./,j=>j.toUpperCase()),x=v=>v.includes("APPOINTMENT")?ct:v.includes("DOCTOR")?Jt:v.includes("MESSAGE")?Yl:Yr;return r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>u("overview"),className:`py-2 px-1 border-b-2 text-sm ${c==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),r.jsxs("button",{onClick:()=>u("doctors"),className:`py-2 px-1 border-b-2 text-sm ${c==="doctors"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Doctor Management (",h.pendingDoctors," pending)"]}),r.jsx("button",{onClick:()=>u("activity"),className:`py-2 px-1 border-b-2 text-sm ${c==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Activity Feed"})]})})}),c==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(p,{icon:Jt,title:"Total Doctors",value:h.totalDoctors,subtitle:`${h.approvedDoctors} approved`,color:"blue"}),r.jsx(p,{icon:Hf,title:"Total Patients",value:h.totalPatients,color:"green"}),r.jsx(p,{icon:ct,title:"Appointments Today",value:h.todayAppointments,subtitle:`${h.weekAppointments} this week`,color:"purple"}),r.jsx(p,{icon:Yl,title:"Messages Today",value:h.todayMessages,color:"yellow"})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Appointments by Status"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx(Ze,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl text-yellow-900",children:h.appointmentsByStatus.pending}),r.jsx("div",{className:"text-sm text-yellow-700",children:"Pending"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx(Bn,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl text-green-900",children:h.appointmentsByStatus.accepted}),r.jsx("div",{className:"text-sm text-green-700",children:"Accepted"})]}),r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx(Bn,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl text-blue-900",children:h.appointmentsByStatus.completed}),r.jsx("div",{className:"text-sm text-blue-700",children:"Completed"})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[r.jsx(pc,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl text-red-900",children:h.appointmentsByStatus.cancelled}),r.jsx("div",{className:"text-sm text-red-700",children:"Cancelled"})]}),r.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[r.jsx(rn,{className:"h-8 w-8 text-orange-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl text-orange-900",children:h.appointmentsByStatus.no_show}),r.jsx("div",{className:"text-sm text-orange-700",children:"No Show"})]})]})]})]}),c==="doctors"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg text-gray-900",children:"Doctor Approvals"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and approve doctor registrations"})]}),m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Jt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No doctors registered"}),r.jsx("p",{className:"text-gray-500",children:"Doctor registrations will appear here for approval"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Doctor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Specialty"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Experience"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(v=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-900",children:v.name}),r.jsx("div",{className:"text-sm text-gray-500",children:v.email})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:v.category})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:v.experience||"Not specified"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs rounded-full ${v.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:v.isApproved?"Approved":"Pending"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("button",{onClick:()=>n(v.id),className:`${v.isApproved?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:v.isApproved?"Revoke":"Approve"})})]},v.id))})]})})]})}),c==="activity"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg text-gray-900",children:"Recent Activity"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Platform activity and user actions"})]}),i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Yr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No activity yet"}),r.jsx("p",{className:"text-gray-500",children:"Platform activity will appear here"})]}):r.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:i.slice(0,50).map(v=>{const j=x(v.action);return r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(j,{className:"h-4 w-4 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:[r.jsx("span",{children:v.userName}),r.jsxs("span",{className:"text-gray-600",children:[" - ",g(v.action)]})]}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:v.details}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:v.timestamp.toLocaleString()})]}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v.userRole==="admin"?"bg-purple-100 text-purple-800":v.userRole==="doctor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:v.userRole})]})},v.id)})})]})})]})},vv=({patients:a,selectedPatientId:n,onSelectPatient:i,getUnreadCount:o})=>a.length===0?r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-500",children:"No patients online"})})}):r.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Patient Chats"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[a.length," patient(s)"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:a.map(c=>{const u=o(c.userId),h=n===c.userId;return r.jsx("button",{onClick:()=>i(c.userId,c.userName),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 ${h?"bg-blue-50 border-l-4 border-l-blue-600":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:c.userName.charAt(0).toUpperCase()}),c.isOnline&&r.jsx("div",{className:"absolute bottom-0 right-0",children:r.jsx(Uf,{className:"h-3 w-3 text-green-500 fill-green-500"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("p",{className:`font-medium truncate ${h?"text-blue-900":"text-gray-900"}`,children:c.userName})}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:c.isOnline?"Online":"Offline"})]})]}),u>0&&r.jsx("div",{className:"ml-2 bg-blue-600 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center",children:u>9?"9+":u})]})},c.userId)})})]}),wv=({doctors:a,selectedDoctorId:n,onSelectDoctor:i,getUnreadCount:o})=>a.length===0?r.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-500",children:"No doctors online"})})}):r.jsxs("div",{className:"flex flex-col h-full bg-white border-r border-gray-200",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Doctor Chats"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[a.length," doctor(s)"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:a.map(c=>{const u=o(c.userId),h=n===c.userId;return r.jsx("button",{onClick:()=>i(c.userId,c.userName),className:`w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 ${h?"bg-blue-50 border-l-4 border-l-blue-600":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:c.userName.charAt(0).toUpperCase()}),c.isOnline&&r.jsx("div",{className:"absolute bottom-0 right-0",children:r.jsx(Uf,{className:"h-3 w-3 text-green-500 fill-green-500"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("p",{className:`font-medium truncate ${h?"text-blue-900":"text-gray-900"}`,children:c.userName})}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:c.isOnline?"Online":"Offline"})]})]}),u>0&&r.jsx("div",{className:"ml-2 bg-blue-600 text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center",children:u>9?"9+":u})]})},c.userId)})})]}),bv=({selectedPatientId:a,selectedPatientName:n,onBack:i})=>{const{user:o}=Fe(),{getChatMessages:c,sendMessage:u,markAsRead:h,messages:m}=ba(),[p,g]=w.useState(""),x=w.useRef(null),v=w.useRef(null),j=o?.id,{checkMessage:N,isServiceHealthy:b}=Na(j,"high"),[E,S]=w.useState(null),[T,D]=w.useState(!1),[,A]=w.useState(0);w.useEffect(()=>{const $=()=>{A(J=>J+1)},F=J=>{J.key==="chatMessages"&&$()};window.addEventListener("storage",F),window.addEventListener("chatMessageSent",$);const B=setInterval(()=>{A(J=>J+1)},500);return()=>{window.removeEventListener("storage",F),window.removeEventListener("chatMessageSent",$),clearInterval(B)}},[]);const O=w.useMemo(()=>a?c(a):[],[a,c,m.length,m]);w.useEffect(()=>{A($=>$+1)},[O.length,m.length]),w.useEffect(()=>{O.length>0&&A($=>$+1)},[O.map($=>$.id).join(",")]),w.useEffect(()=>{a&&h(a)},[a,h]),w.useEffect(()=>{q()},[O]),w.useEffect(()=>{const F=setTimeout(async()=>{if(!p.trim()||!b){S(null),D(!1);return}try{const B=await N(p);S(B),D(B.shouldBlock)}catch(B){console.error("PII check failed:",B),S(null),D(!1)}},500);return()=>clearTimeout(F)},[p,N,b]);const q=()=>{x.current?.scrollIntoView({behavior:"smooth"})},Z=async()=>{if(!a||!p.trim()||!j)return;let $=p,F=!0;if(b)try{const B=await N(p);if(B.shouldBlock){alert(`Message blocked: ${B.reason}

Detected violations: ${B.violations.map(J=>J.type).join(", ")}

Please remove personal information before sending.`);return}B.violations.length>0&&B.maskedText!==p&&(confirm(`Personal information detected in your message.

Would you like to send the masked version instead?

Original: "${p}"
Masked: "${B.maskedText}"`)?$=B.maskedText:F=!1)}catch(B){console.error("PII check failed during send:",B),confirm("PII detection service is unavailable. Send message anyway?")||(F=!1)}F&&(u(a,$),g(""),S(null),D(!1))},ee=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Z())};return a?r.jsxs("div",{className:"patient-chat-container flex flex-col h-full bg-white",style:{position:"relative",width:"100%",display:"block",overflow:"visible"},children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center",children:[r.jsx("button",{onClick:i,className:"mr-3 p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(ja,{className:"h-5 w-5 text-gray-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n}),r.jsx("p",{className:"text-sm text-gray-500",children:"Patient"})]})]}),r.jsxs("div",{ref:v,className:"flex-1 overflow-y-auto px-4 py-4 bg-gray-50",style:{maxHeight:"calc(100vh - 200px)"},children:[O.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-gray-400",children:"No messages yet. Start the conversation!"})}):r.jsx("div",{className:"space-y-3",children:O.map($=>{const F=$.sender_id===j;return r.jsx("div",{className:`flex ${F?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${F?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:[r.jsx("p",{className:`text-sm whitespace-pre-wrap break-words ${F?"text-white":""}`,children:$.message}),r.jsx("p",{className:`text-xs mt-1 ${F?"text-blue-100":"text-gray-500"}`,children:new Date($.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$.id)})}),r.jsx("div",{ref:x})]}),r.jsxs("div",{className:"border-t border-gray-200 px-4 py-3 bg-white",children:[T&&E&&E.violations.length>0&&r.jsx("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(rn,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-red-800",children:"PII detected, this message is not allowed"})})]})}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx("textarea",{value:p,onChange:$=>g($.target.value),onKeyPress:ee,placeholder:"Type a message...",rows:1,className:`flex-1 resize-none border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:border-transparent transition-colors ${T?"border-red-300 focus:ring-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500"}`,style:{minHeight:"44px",maxHeight:"120px"}}),r.jsx("button",{onClick:Z,disabled:!p.trim()||T&&E?.shouldBlock,className:`p-2 rounded-lg transition-colors ${T&&E?.shouldBlock?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,title:T&&E?.shouldBlock?"Message contains PII and will be blocked":"Send message",children:r.jsx(Zr,{className:"h-5 w-5"})})]})]})]}):r.jsx("div",{className:"patient-chat-container flex items-center justify-center h-full bg-gray-50",style:{position:"relative",width:"100%",display:"block",overflow:"visible"},children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-500 text-lg",children:"Select a patient to start chatting"})})})},jv=({selectedDoctorId:a,selectedDoctorName:n,onBack:i})=>{const{user:o}=Fe(),{getChatMessages:c,sendMessage:u,markAsRead:h,messages:m}=ba(),[p,g]=w.useState(""),x=w.useRef(null),v=w.useRef(null),j=o?.id,{checkMessage:N,isServiceHealthy:b}=Na(j,"high"),[E,S]=w.useState(null),[T,D]=w.useState(!1),[,A]=w.useState(0);w.useEffect(()=>{const $=()=>{A(J=>J+1)},F=J=>{J.key==="chatMessages"&&$()};window.addEventListener("storage",F),window.addEventListener("chatMessageSent",$);const B=setInterval(()=>{A(J=>J+1)},500);return()=>{window.removeEventListener("storage",F),window.removeEventListener("chatMessageSent",$),clearInterval(B)}},[]);const O=w.useMemo(()=>a?c(a):[],[a,c,m.length,m]);w.useEffect(()=>{A($=>$+1)},[O.length,m.length]),w.useEffect(()=>{O.length>0&&A($=>$+1)},[O.map($=>$.id).join(",")]),w.useEffect(()=>{a&&h(a)},[a,h]),w.useEffect(()=>{q()},[O]),w.useEffect(()=>{const F=setTimeout(async()=>{if(!p.trim()||!b){S(null),D(!1);return}try{const B=await N(p);S(B),D(B.shouldBlock)}catch(B){console.error("PII check failed:",B),S(null),D(!1)}},500);return()=>clearTimeout(F)},[p,N,b]);const q=()=>{x.current?.scrollIntoView({behavior:"smooth"})},Z=async()=>{if(!a||!p.trim()||!j)return;let $=p,F=!0;if(b)try{const B=await N(p);if(B.shouldBlock){alert(`Message blocked: ${B.reason}

Detected violations: ${B.violations.map(J=>J.type).join(", ")}

Please remove personal information before sending.`);return}B.violations.length>0&&B.maskedText!==p&&(confirm(`Personal information detected in your message.

Would you like to send the masked version instead?

Original: "${p}"
Masked: "${B.maskedText}"`)?$=B.maskedText:F=!1)}catch(B){console.error("PII check failed during send:",B),confirm("PII detection service is unavailable. Send message anyway?")||(F=!1)}F&&(u(a,$),g(""),S(null),D(!1))},ee=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Z())};return a?r.jsxs("div",{className:"flex flex-col h-full bg-white",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center flex-shrink-0",children:[r.jsx("button",{onClick:i,className:"mr-3 p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(ja,{className:"h-5 w-5 text-gray-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n}),r.jsx("p",{className:"text-sm text-gray-500",children:"Doctor"})]})]}),r.jsxs("div",{ref:v,className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:[O.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("p",{className:"text-gray-400",children:"No messages yet. Start the conversation!"})}):r.jsx("div",{className:"space-y-3",children:O.map($=>{const F=$.sender_id===j;return r.jsx("div",{className:`flex ${F?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${F?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:[r.jsx("p",{className:`text-sm whitespace-pre-wrap break-words ${F?"text-white":""}`,children:$.message}),r.jsx("p",{className:`text-xs mt-1 ${F?"text-blue-100":"text-gray-500"}`,children:new Date($.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$.id)})}),r.jsx("div",{ref:x})]}),r.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white flex-shrink-0",children:[T&&E&&E.violations.length>0&&r.jsx("div",{className:"mb-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(rn,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-red-800",children:"PII detected, this message is not allowed"})})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("textarea",{value:p,onChange:$=>g($.target.value),onKeyPress:ee,placeholder:"Type a message...",rows:1,className:`flex-1 resize-none border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:border-transparent transition-colors ${T?"border-red-300 focus:ring-red-500 bg-red-50":"border-gray-300 focus:ring-blue-500"}`,style:{minHeight:"44px",maxHeight:"120px"}}),r.jsx("button",{onClick:Z,disabled:!p.trim()||T&&E?.shouldBlock,className:`p-2 rounded-lg transition-colors ${T&&E?.shouldBlock?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50 disabled:cursor-not-allowed`,title:T&&E?.shouldBlock?"Message contains PII and will be blocked":"Send message",children:r.jsx(Zr,{className:"h-5 w-5"})})]})]})]}):r.jsx("div",{className:"doctor-chat-container flex items-center justify-center h-full bg-gray-50",style:{position:"relative",width:"100%",display:"block",overflow:"visible"},children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-500 text-lg",children:"Select a doctor to start chatting"})})})},Nv=()=>{const a=ya(),{user:n,logout:i}=Fe(),{onlineUsers:o,getUnreadCount:c}=ba(),[u,h]=w.useState(null),[m,p]=w.useState(null),[g,x]=w.useState(!1),[v,j]=w.useState(null),[N,b]=w.useState(null),[E,S]=w.useState(!1);w.useEffect(()=>{(!n||n.role!=="agent")&&a("/login")},[n,a]);const T=()=>{i(),a("/login")},D=o.filter($=>$.role==="patient"),A=o.filter($=>$.role==="doctor"),O=($,F)=>{h($),p(F),x(!0)},q=($,F)=>{j($),b(F),S(!0)},Z=()=>{x(!1),h(null),p(null)},ee=()=>{S(!1),j(null),b(null)};return g?r.jsx("div",{className:"h-screen flex flex-col",children:r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx("div",{className:"w-80 flex-shrink-0",children:r.jsx(vv,{patients:D,selectedPatientId:u,onSelectPatient:O,getUnreadCount:c})}),r.jsx("div",{className:"flex-1",children:r.jsx(bv,{selectedPatientId:u,selectedPatientName:m,onBack:Z})})]})}):E?r.jsx("div",{className:"h-screen flex flex-col",children:r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx("div",{className:"w-80 flex-shrink-0",children:r.jsx(wv,{doctors:A,selectedDoctorId:v,onSelectDoctor:q,getUnreadCount:c})}),r.jsx("div",{className:"flex-1",children:r.jsx(jv,{selectedDoctorId:v,selectedDoctorName:N,onBack:ee})})]})}):r.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Agent Dashboard"}),n&&r.jsxs("p",{className:"text-gray-600",children:["Welcome, Agent ",n.name||"User","!"]})]}),r.jsxs("button",{type:"button",onClick:T,className:"inline-flex items-center px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200",children:[r.jsx(zf,{className:"h-4 w-4 mr-2"}),"Logout"]})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Patient Chats"}),D.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[r.jsx(Jt,{className:"h-12 w-12 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients online"}),r.jsx("p",{className:"text-sm text-gray-500",children:"When patients log in, they will appear here"})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:D.map($=>{const F=c($.userId);return r.jsxs("button",{onClick:()=>O($.userId,$.userName),className:"flex items-center space-x-3 p-4 rounded-lg hover:bg-gray-50 transition-colors border border-gray-100 text-left",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:$.userName.charAt(0).toUpperCase()}),$.isOnline&&r.jsx("div",{className:"absolute bottom-0 right-0",children:r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border-2 border-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:$.userName}),r.jsx("p",{className:"text-sm text-gray-500",children:$.isOnline?"Online":"Offline"})]}),F>0&&r.jsx("div",{className:"bg-blue-600 text-white text-xs font-semibold rounded-full h-6 w-6 flex items-center justify-center",children:F>9?"9+":F})]},$.userId)})})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Doctor Chats"}),A.length===0?r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[r.jsx(Jt,{className:"h-12 w-12 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No doctors online"}),r.jsx("p",{className:"text-sm text-gray-500",children:"When doctors log in, they will appear here"})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:A.map($=>{const F=c($.userId);return r.jsxs("button",{onClick:()=>q($.userId,$.userName),className:"flex items-center space-x-3 p-4 rounded-lg hover:bg-gray-50 transition-colors border border-gray-100 text-left",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:$.userName.charAt(0).toUpperCase()}),$.isOnline&&r.jsx("div",{className:"absolute bottom-0 right-0",children:r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border-2 border-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:$.userName}),r.jsx("p",{className:"text-sm text-gray-500",children:$.isOnline?"Online":"Offline"})]}),F>0&&r.jsx("div",{className:"bg-blue-600 text-white text-xs font-semibold rounded-full h-6 w-6 flex items-center justify-center",children:F>9?"9+":F})]},$.userId)})})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Assigned Patients"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[r.jsx(Jt,{className:"h-12 w-12 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assigned patients yet"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Patients assigned to you will appear here"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-100 text-blue-600",children:r.jsx(Jt,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Patients"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-green-100 text-green-600",children:r.jsx(ct,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Appointments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-purple-100 text-purple-600",children:r.jsx(Yl,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Online Patients"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.filter($=>$.isOnline).length})]})]})})]})]})},kv=()=>{const{user:a,loading:n}=Fe();return console.log("[ProtectedRoute] render",{loading:n,hasUser:!!a}),n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a?r.jsx(ic,{}):r.jsx(ir,{to:"/login",replace:!0})},ua=({allowedRoles:a})=>{const{user:n}=Fe();return!n||!a.includes(n.role)?r.jsx(ir,{to:"/",replace:!0}):r.jsx(ic,{})};function _v(){const{user:a}=Fe();return r.jsxs(H0,{children:[r.jsx(Ae,{path:"/",element:r.jsx(av,{})}),r.jsx(Ae,{path:"/login",element:a?r.jsx(ir,{to:`/${a.role}`}):r.jsx(ov,{})}),r.jsx(Ae,{path:"/signup",element:a?r.jsx(ir,{to:`/${a.role}`}):r.jsx(lv,{})}),r.jsx(Ae,{element:r.jsx(kv,{}),children:r.jsxs(Ae,{element:r.jsx(iv,{}),children:[r.jsxs(Ae,{element:r.jsx(ua,{allowedRoles:["patient"]}),children:[r.jsx(Ae,{path:"/patient",element:r.jsx(ir,{to:"/patient/browse"})}),r.jsx(Ae,{path:"/patient/browse",element:r.jsx(cv,{})}),r.jsx(Ae,{path:"/patient/category/:slug",element:r.jsx(hv,{})}),r.jsx(Ae,{path:"/patient/messages",element:r.jsx(pv,{})}),r.jsx(Ae,{path:"/patient/appointments",element:r.jsx(fv,{})}),r.jsx(Ae,{path:"/patient/profile",element:r.jsx(mv,{})})]}),r.jsxs(Ae,{element:r.jsx(ua,{allowedRoles:["doctor"]}),children:[r.jsx(Ae,{path:"/doctor",element:r.jsx(ir,{to:"/doctor/dashboard"})}),r.jsx(Ae,{path:"/doctor/dashboard",element:r.jsx(gv,{})}),r.jsx(Ae,{path:"/doctor/profile",element:r.jsx(xv,{})})]}),r.jsxs(Ae,{element:r.jsx(ua,{allowedRoles:["admin"]}),children:[r.jsx(Ae,{path:"/admin",element:r.jsx(ir,{to:"/admin/dashboard"})}),r.jsx(Ae,{path:"/admin/dashboard",element:r.jsx(yv,{})})]}),r.jsxs(Ae,{element:r.jsx(ua,{allowedRoles:["agent"]}),children:[r.jsx(Ae,{path:"/agent",element:r.jsx(ir,{to:"/agent/dashboard"})}),r.jsx(Ae,{path:"/agent/dashboard",element:r.jsx(Nv,{})})]})]})}),r.jsx(Ae,{path:"*",element:r.jsx(ir,{to:"/"})})]})}function Sv(){return r.jsx(Cy,{children:r.jsx(Py,{children:r.jsx(Ty,{children:r.jsx(hg,{children:r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx(_v,{})})})})})})}Yp.createRoot(document.getElementById("root")).render(r.jsx(w.StrictMode,{children:r.jsx(Sv,{})}));
